<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Takawala - Ultimate Final</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Remix Icons -->
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
    
    <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    
    <!-- Animate.css -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    
    <!-- html2canvas -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
              

    <style>
        
                /* ‚úÖ EMERGENCY FIX: FORCE HIDE */
        .hidden { 
            display: none !important; 
            visibility: hidden !important;
            pointer-events: none !important;
        }

        
                /* ‚úÖ iOS STYLE POPUP DESIGN */
        .ios-modal-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.4); /* ‡¶π‡¶æ‡¶≤‡¶ï‡¶æ ‡¶ï‡¶æ‡¶≤‡ßã ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶° */
            backdrop-filter: blur(5px); /* ‡¶¨‡ßç‡¶≤‡¶æ‡¶∞ ‡¶á‡¶´‡ßá‡¶ï‡ßç‡¶ü */
            z-index: 9999999;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .ios-modal {
            background: rgba(255, 255, 255, 0.95);
            width: 85%;
            max-width: 320px;
            border-radius: 15px;
            text-align: center;
            overflow: hidden;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }
        
        .ios-modal-content {
            padding: 20px 20px 15px;
        }

        .ios-icon-box {
            width: 50px; height: 50px;
            background: #eef2ff;
            color: #6366f1;
            font-size: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 10px;
        }
        
        .ios-title {
            font-size: 18px;
            font-weight: 700;
            color: #1c1c1e;
            margin-bottom: 5px;
        }
        
        .ios-message {
            font-size: 14px;
            color: #3a3a3c;
            line-height: 1.5;
        }
        
        /* ‡¶∞‡¶ô‡¶ø‡¶® ‡¶≤‡ßá‡¶ñ‡¶æ ‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶∏‡ßç‡¶™‡ßá‡¶∂‡¶æ‡¶≤ ‡¶ï‡ßç‡¶≤‡¶æ‡¶∏ */
        .ios-message span { font-weight: bold; }
        .red-text { color: #ef4444; }
        .green-text { color: #10b981; }
        .blue-text { color: #3b82f6; }
        .gold-text { color: #d97706; }

        .ios-modal-actions {
            border-top: 1px solid #e5e5ea;
            display: flex;
        }
        
        .ios-btn {
            background: transparent;
            color: #007aff; /* ‡¶Ü‡¶á‡¶´‡ßã‡¶® ‡¶¨‡ßç‡¶≤‡ßÅ */
            font-size: 16px;
            font-weight: 600;
            width: 100%;
            padding: 12px;
            border: none;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .ios-btn:active {
            background: #f2f2f7;
        }
        
        .hidden { display: none !important; }

        
        @import url('https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@300;400;500;600;700&display=swap');
        
        body { 
            font-family: 'Hind Siliguri', sans-serif; 
            background: #f8fafc;
            color: #1e293b;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
            overflow-x: hidden;
        }

        /* PREMIUM GRADIENT */
        .bg-premium { background: linear-gradient(135deg, #059669 0%, #047857 50%, #d97706 100%); }
        
        /* GLASS EFFECTS */
        .glass-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.8);
            box-shadow: 0 4px 20px rgba(0,0,0,0.05);
        }

        /* SCROLL HIDE */
        ::-webkit-scrollbar { width: 0px; }
        
        /* ‚úÖ FIXED NOTIFICATION */
        #notificationMessage {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 100000;
            min-width: 300px;
            max-width: 90%;
            width: auto;
            padding: 12px 20px;
            border-radius: 10px;
            font-weight: bold;
            text-align: center;
            animation: slideDown 0.3s ease, fadeOut 0.3s ease 2.5s;
            animation-fill-mode: forwards;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            justify-content: space-between;
            word-wrap: break-word;
            word-break: break-word;
            white-space: normal;
        }
        
        @keyframes slideDown {
            from { top: -100px; opacity: 0; }
            to { top: 20px; opacity: 1; }
        }
        
        @keyframes fadeOut {
            from { opacity: 1; visibility: visible; }
            to { opacity: 0; visibility: hidden; }
        }
        
        /* ‚úÖ iPHONE STYLE NOTIFICATION */
        .smart-toast {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 999999;
            min-width: 310px;
            max-width: 90%;
            padding: 10px 14px;
            border-radius: 50px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.5);
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            display: flex;
            align-items: center;
            gap: 12px;
            animation: slideDownFade 0.4s ease, fadeOutUp 0.4s ease 4.5s forwards;
        }
        
        .toast-icon {
            font-size: 22px;
            display: flex;
            align-items: center;
        }
        
        .toast-content p {
            color: #1e293b;
            font-family: 'Hind Siliguri', sans-serif;
            font-weight: 600;
            font-size: 13px;
            line-height: 1.3;
            margin: 0;
        }

        .toast-close {
            background: #f1f5f9;
            border: none;
            color: #94a3b8;
            width: 26px;
            height: 26px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
            margin-left: auto;
        }
        
        .toast-close:active {
            background: #e2e8f0;
            color: #ef4444;
            transform: scale(0.9);
        }

        @keyframes slideDownFade {
            from { top: -100px; opacity: 0; transform: translateX(-50%) scale(0.9); }
            to { top: 20px; opacity: 1; transform: translateX(-50%) scale(1); }
        }
        
        @keyframes fadeOutUp {
            from { top: 20px; opacity: 1; transform: translateX(-50%) scale(1); }
            to { top: -100px; opacity: 0; transform: translateX(-50%) scale(0.9); visibility: hidden; }
        }

        /* LOADING ANIMATION */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.95);
            z-index: 99999;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .loading-logo {
            width: 100px;
            animation: zoomInOut 2s ease-in-out infinite;
        }
        
        @keyframes zoomInOut {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        /* DISABLED STATE */
        .disabled-option {
            opacity: 0.5;
            cursor: not-allowed;
            position: relative;
        }
        
        .disabled-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(239, 68, 68, 0.9);
            color: white;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 10px;
            font-weight: bold;
        }

        /* ‚úÖ FIXED TEXT CONTAINERS */
        .text-container {
            word-wrap: break-word;
            word-break: break-word;
            white-space: normal;
            overflow-wrap: break-word;
            max-width: 100%;
        }
        
        .address-box {
            background: #f8fafc;
            border: 1px dashed #cbd5e1;
            border-radius: 12px;
            padding: 12px;
            margin-bottom: 10px;
            word-break: break-all;
            overflow-wrap: break-word;
            white-space: normal;
            font-size: 13px;
            line-height: 1.4;
        }

        /* ‚úÖ HISTORY ITEM STYLES - FIXED LAYOUT */
        .history-item {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .history-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

                       /* ‚úÖ FIXED: WIDE & COMPACT RECEIPT STYLE */
        .receipt-box {
            background: #ffffff;
            width: 100% !important;   /* ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤‡ßá ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®‡ßá‡¶∞ ‡ßØ‡ß´% ‡¶ú‡¶æ‡ßü‡¶ó‡¶æ ‡¶®‡¶ø‡¶¨‡ßá */
            max-width: 500px;        /* ‡¶∏‡¶∞‡ßç‡¶¨‡ßã‡¶ö‡ßç‡¶ö ‡¶ö‡¶ì‡ßú‡¶æ */
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            position: relative;
            margin: auto;            /* ‡¶Æ‡¶æ‡¶ù‡¶ñ‡¶æ‡¶®‡ßá ‡¶•‡¶æ‡¶ï‡¶¨‡ßá */
        }

        .receipt-header {
            background: linear-gradient(135deg, #059669, #047857);
            padding: 15px;           /* ‡¶™‡ßç‡¶Ø‡¶æ‡¶°‡¶ø‡¶Ç ‡¶ï‡¶Æ‡¶ø‡ßü‡ßá‡¶õ‡¶ø ‡¶Ø‡¶æ‡¶§‡ßá ‡¶≤‡¶Æ‡ßç‡¶¨‡¶æ ‡¶ï‡¶Æ ‡¶π‡ßü */
            text-align: center;
            color: white;
            position: relative;
        }
        
        /* ‡¶≤‡ßã‡¶ó‡ßã ‡¶∏‡¶æ‡¶á‡¶ú ‡¶†‡¶ø‡¶ï‡¶†‡¶æ‡¶ï ‡¶∞‡¶æ‡¶ñ‡¶æ */
        .receipt-header img {
            width: 28px;
            height: 28px;
        }
        
        .receipt-header h2 { font-size: 18px; margin-bottom: 2px; }
        .receipt-header p { font-size: 11px; opacity: 0.9; }

        /* ‡¶ü‡¶æ‡¶ï‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶Æ‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶¨‡¶ï‡ßç‡¶∏ ‡¶õ‡ßã‡¶ü ‡¶ï‡¶∞‡¶æ */
        .amount-box {
            margin-top: 10px;
            background: rgba(255,255,255,0.2);
            border-radius: 12px;
            padding: 8px;
            backdrop-filter: blur(5px);
        }
        
        .amount-box h1 { font-size: 24px; margin: 0; }

        .receipt-body {
            padding: 15px;          /* ‡¶¨‡¶°‡¶ø‡¶∞ ‡¶∏‡ßç‡¶™‡ßá‡¶∏ ‡¶ï‡¶Æ‡¶æ‡¶®‡ßã */
            background-color: #fff;
        }

        .receipt-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;         /* ‡¶≤‡¶æ‡¶á‡¶®‡ßá‡¶∞ ‡¶Æ‡¶æ‡¶ù‡¶ñ‡¶æ‡¶®‡ßá‡¶∞ ‡¶´‡¶æ‡¶Å‡¶ï‡¶æ ‡¶ï‡¶Æ‡¶æ‡¶®‡ßã */
            border-bottom: 1px dashed #e2e8f0;
            font-size: 13px;
        }

        .receipt-value {
            font-weight: 700;
            color: #1e293b;
            text-align: right;
            max-width: 65%;        /* ‡¶≠‡ßç‡¶Ø‡¶æ‡¶≤‡ßÅ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ú‡¶æ‡ßü‡¶ó‡¶æ ‡¶¨‡¶æ‡ßú‡¶æ‡¶®‡ßã */
            word-break: break-all;
        }

        .receipt-footer {
            background: #f8fafc;
            padding: 10px;
            text-align: center;
            border-top: 2px dashed #cbd5e1;
        }
        
        .receipt-footer h3 { font-size: 10px; letter-spacing: 2px; }

        
        /* ‚úÖ FIXED REFERRAL LINK */
        .referral-box {
            background: #f1f5f9;
            border-radius: 12px;
            padding: 12px;
            margin: 15px 0;
            word-break: break-all;
            word-wrap: break-word;
            overflow-wrap: break-word;
            white-space: normal;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.5;
            border: 1px solid #cbd5e1;
            text-align: center;
        }

        /* ‚úÖ PROOF SUBMISSION MODAL */
        .proof-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
            z-index: 10002;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            animation: fadeIn 0.3s ease;
        }
        
        .proof-content {
            background: white;
            border-radius: 20px;
            max-width: 450px;
            width: 100%;
            overflow: hidden;
            animation: slideUp 0.4s ease;
        }
        
        .task-timer {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #3b82f6;
            color: white;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
        }

        /* ‚úÖ GLOBAL CHAT ICON */
        #globalChatIcon {
            position: fixed;
            bottom: 100px;
            right: 20px;
            z-index: 9999;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.4);
            cursor: pointer;
            border: 3px solid white;
            transition: all 0.3s ease;
        }
        
        #globalChatIcon:hover {
            transform: scale(1.1);
            box-shadow: 0 12px 30px rgba(59, 130, 246, 0.6);
        }
        
        #globalChatIcon i {
            font-size: 28px;
            color: white;
        }
        
        /* MAINTENANCE MODE */
        .maintenance-screen {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #1e293b, #0f172a);
            z-index: 999999;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            padding: 20px;
        }
        
        /* ‚úÖ UPDATED TWAI CHATBOT STYLES */
        #twaiChatbotIcon {
            position: fixed;
            bottom: 170px;
            right: 20px;
            z-index: 9998;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.4);
            cursor: pointer;
            border: 3px solid white;
            transition: all 0.3s ease;
        }
        
        #twaiChatbotIcon:hover {
            transform: scale(1.1);
            box-shadow: 0 12px 30px rgba(139, 92, 246, 0.6);
        }
        
        #twaiChatbotIcon i {
            font-size: 28px;
            color: white;
        }
        
        .chatbot-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
            z-index: 10010;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            animation: fadeIn 0.3s ease;
        }
        
        .chatbot-content {
            background: white;
            border-radius: 20px;
            width: 100%;
            max-width: 420px;
            max-height: 80vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        
        .chatbot-header {
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
            padding: 15px;
            color: white;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .chatbot-body {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
            max-height: 400px;
        }
        
               /* ‚úÖ CHATBOT LAYOUT PERFECT FIX (FINAL) */
        .chatbot-content {
            background: #f8fafc;
            border-radius: 20px 20px 0 0;
            width: 100%;
            max-width: 450px;
            height: 85vh; 
            display: flex;
            flex-direction: column;
            overflow: hidden;
            box-shadow: 0 -10px 40px rgba(0,0,0,0.1);
            position: absolute;
            bottom: 0;
        }

        /* ‡¶ö‡ßç‡¶Ø‡¶æ‡¶ü ‡¶è‡¶∞‡¶ø‡ßü‡¶æ (‡¶´‡ßç‡¶≤‡ßá‡¶ï‡ßç‡¶∏‡¶ø‡¶¨‡¶≤) */
        .chatbot-body {
            flex: 1; 
            overflow-y: auto;
            padding: 20px;
            padding-bottom: 20px; 
            background: #f8fafc;
        }

        /* ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶¨‡¶ï‡ßç‡¶∏ (‡¶®‡¶ø‡¶ö‡ßá ‡¶´‡¶ø‡¶ï‡ßç‡¶∏‡¶° ‡¶•‡¶æ‡¶ï‡¶¨‡ßá) */
        .quick-questions {
            height: 140px; /* ‡¶´‡¶ø‡¶ï‡ßç‡¶∏‡¶° ‡¶π‡¶æ‡¶á‡¶ü */
            min-height: 140px;
            overflow-y: auto;
            background: #ffffff;
            border-top: 1px solid #e2e8f0;
            padding: 10px;
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
            z-index: 20;
            box-shadow: 0 -4px 10px rgba(0,0,0,0.03);
            flex-shrink: 0; 
        }

        .quick-question {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            padding: 8px 5px;
            border-radius: 10px;
            font-size: 11px;
            font-weight: 600;
            color: #475569;
            cursor: pointer;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 40px;
            line-height: 1.2;
            transition: all 0.2s;
        }

        .quick-question:hover {
            background: #ffffff;
            border-color: #8b5cf6;
            color: #7c3aed;
            box-shadow: 0 2px 8px rgba(139, 92, 246, 0.15);
        }


        /* ‚úÖ HISTORY FILTER STYLES */
        .history-filter {
            display: flex;
            overflow-x: auto;
            gap: 8px;
            margin-bottom: 15px;
            padding-bottom: 10px;
        }
        
        .filter-btn {
            white-space: nowrap;
            padding: 8px 15px;
            border-radius: 20px;
            background: #f1f5f9;
            border: none;
            font-size: 12px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .filter-btn.active {
            background: #059669;
            color: white;
        }
        
        /* ‚úÖ SETTINGS TOGGLE STYLES */
        .toggle {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 26px;
        }
        
        .toggle input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #cbd5e1;
            transition: .4s;
            border-radius: 34px;
        }
        
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .toggle-slider {
            background-color: #059669;
        }
        
        input:checked + .toggle-slider:before {
            transform: translateX(24px);
        }

        /* ‚úÖ NEW LOGIN NOTICE MODAL STYLES */
        .login-notice-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
            z-index: 100000;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            animation: fadeIn 0.5s ease;
        }
        
        .login-notice-content {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(255, 255, 255, 0.85));
            backdrop-filter: blur(20px);
            border-radius: 25px;
            max-width: 450px;
            width: 100%;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 25px 50px rgba(0,0,0,0.3);
            transform: translateY(20px);
            animation: slideUpNotice 0.6s ease forwards;
        }
        
        @keyframes slideUpNotice {
            to { transform: translateY(0); opacity: 1; }
        }

        /* ‚úÖ INTERSTITIAL AD STYLES */
        .interstitial-ad {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 10001;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            backdrop-filter: blur(5px);
        }

        /* ‚úÖ EMERGENCY FIX: FORCE HIDE */
        .hidden { display: none !important; }

        /* üçé ULTRA PREMIUM iPHONE STYLE POPUP */
        div:where(.swal2-container) div:where(.swal2-popup) {
            border-radius: 30px !important;
            background: rgba(255, 255, 255, 0.85) !important;
            backdrop-filter: blur(25px) saturate(180%) !important;
            -webkit-backdrop-filter: blur(25px) saturate(180%) !important;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2) !important;
            padding: 15px !important;
            width: 320px!important;
            border: 1px solid rgba(255, 255, 255, 0.5) !important;
        }

        div:where(.swal2-title) {
            font-family: 'Hind Siliguri', sans-serif !important;
            font-weight: 700 !important;
            color: #1e293b !important;
            font-size: 1.3rem !important;
            padding: 0 !important;
            margin-bottom: 2px !important;
        }

        div:where(.swal2-html-container) {
            font-family: 'Hind Siliguri', sans-serif !important;
            font-size: 0.95rem !important;
            color: #64748b !important;
            margin: 0 !important;
            line-height: 1.5 !important;
            font-weight: 500 !important;
        }

        div:where(.swal2-icon) {
            width: 60px !important;
            height: 60px !important;
            margin: 0 auto 5px auto !important;
            border-width: 3px !important;
        }
        
        .swal2-icon-content {
            font-size: 30px !important;
        }

        div:where(.swal2-actions) {
            margin-top: 10px !important;
            gap: 12px !important;
            width: 100% !important;
            display: flex !important;
            flex-direction: column !important;
        }

        div:where(.swal2-confirm), div:where(.swal2-cancel) {
            border-radius: 18px !important;
            font-weight: 700 !important;
            padding: 14px 0 !important;
            box-shadow: none !important;
            width: 100% !important;
            font-size: 15px !important;
            margin: 0 !important;
            display: flex !important;
            justify-content: center !important;
            align-items: center !important;
            transition: transform 0.2s ease !important;
        }

        div:where(.swal2-confirm) {
            background: #007AFF !important;
            color: white !important;
            background-image: linear-gradient(135deg, #007AFF, #005ecb) !important;
        }
        
        div:where(.swal2-cancel) {
            background: #F2F2F7 !important;
            color: #8E8E93 !important;
        }

        div:where(.swal2-confirm):active, div:where(.swal2-cancel):active {
            transform: scale(0.96) !important;
        }

        /* ‚úÖ MODERN iPHONE DOCK BOTTOM NAV */
        #bottomNav {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-top: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 -10px 30px rgba(0, 0, 0, 0.1);
        }
        
              /* ‚úÖ ULTRA PREMIUM 3D CHATBOT DESIGN */
        
        /* ‡¶ö‡ßç‡¶Ø‡¶æ‡¶ü‡¶¨‡¶°‡¶ø‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶° ‡¶ï‡ßç‡¶≤‡¶ø‡¶® ‡¶∞‡¶æ‡¶ñ‡¶æ */
        .chatbot-body {
            background-color: #f8fafc;
            padding: 20px !important;
        }

        .chat-message {
            display: flex;
            flex-direction: column;
            margin-bottom: 20px; /* ‡¶ó‡ßç‡¶Ø‡¶æ‡¶™ ‡¶¨‡¶æ‡ßú‡¶æ‡¶®‡ßã ‡¶π‡ßü‡ßá‡¶õ‡ßá */
            opacity: 0;
            animation: messagePopUp 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; /* ‡¶¨‡¶æ‡¶â‡¶®‡ßç‡¶∏‡¶ø ‡¶è‡¶®‡¶ø‡¶Æ‡ßá‡¶∂‡¶® */
        }

        .user-message {
            align-items: flex-end;
        }

        .bot-message {
            align-items: flex-start;
        }

        .message-bubble {
            max-width: 78%;
            padding: 14px 18px;
            font-size: 13.5px;
            line-height: 1.6;
            font-weight: 500;
            position: relative;
            letter-spacing: 0.3px;
        }

        /* üë§ User Bubble (GORGEOUS PURPLE GRADIENT) */
        .user-bubble {
            background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%); /* ‡¶°‡¶ø‡¶™ ‡¶™‡¶æ‡¶∞‡ßç‡¶™‡¶≤ ‡¶ó‡ßç‡¶∞‡ßá‡¶°‡¶ø‡ßü‡ßá‡¶®‡ßç‡¶ü */
            color: white;
            border-radius: 18px 18px 2px 18px; /* ‡¶∏‡ßÅ‡¶®‡ßç‡¶¶‡¶∞ ‡¶∂‡ßá‡¶™ */
            box-shadow: 0 10px 25px -5px rgba(124, 58, 237, 0.4), 
                        0 8px 10px -6px rgba(124, 58, 237, 0.2); /* ‡¶ó‡ßç‡¶≤‡ßã‡¶Ø‡¶º‡¶ø‡¶Ç ‡¶∂‡ßç‡¶Ø‡¶æ‡¶°‡ßã */
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* ü§ñ Bot Bubble (MODERN WHITE CARD) */
        .bot-bubble {
            background: #ffffff;
            color: #334155;
            border-radius: 18px 18px 18px 2px; /* ‡¶∏‡ßÅ‡¶®‡ßç‡¶¶‡¶∞ ‡¶∂‡ßá‡¶™ */
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.05), 
                        0 8px 10px -6px rgba(0, 0, 0, 0.01);
            border: 1px solid #f1f5f9;
        }
        
        /* ‡¶¨‡¶ü‡ßá‡¶∞ ‡¶¨‡¶æ‡¶¨‡¶≤‡ßá‡¶∞ ‡¶™‡¶æ‡¶∂‡ßá ‡¶õ‡ßã‡¶ü‡ßç‡¶ü ‡¶Ü‡¶á‡¶ï‡¶® ‡¶¨‡¶æ ‡¶°‡¶ü (‡¶Ö‡¶™‡¶∂‡¶®‡¶æ‡¶≤ ‡¶°‡ßá‡¶ï‡ßã‡¶∞‡ßá‡¶∂‡¶®) */
        .bot-bubble::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: -6px;
            width: 10px;
            height: 10px;
            background: #ffffff;
            border-bottom-right-radius: 20px;
            z-index: -1;
        }

        .message-time {
            font-size: 10px;
            color: #94a3b8;
            margin-top: 5px;
            font-weight: 700;
            padding: 0 4px;
            opacity: 0.8;
        }

        /* ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶¨‡¶ï‡ßç‡¶∏‡ßá‡¶∞ ‡¶°‡¶ø‡¶ú‡¶æ‡¶á‡¶® ‡¶á‡¶Æ‡¶™‡ßç‡¶∞‡ßÅ‡¶≠‡¶Æ‡ßá‡¶®‡ßç‡¶ü */
        .chatbot-input {
            padding: 15px;
            background: white;
            border-top: 1px solid #f1f5f9;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.02);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .chatbot-input input {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 25px;
            padding: 12px 20px;
            font-size: 14px;
            transition: all 0.3s;
            flex: 1;
        }

        .chatbot-input input:focus {
            background: white;
            border-color: #8b5cf6;
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);
        }

        .chatbot-input button {
            background: linear-gradient(135deg, #8b5cf6 0%, #6d28d9 100%);
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(109, 40, 217, 0.3);
            transition: transform 0.2s;
            margin: 0; /* ‡¶Æ‡¶æ‡¶∞‡ßç‡¶ú‡¶ø‡¶® ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü */
        }

        .chatbot-input button:active {
            transform: scale(0.95);
        }

        /* ‡¶¨‡¶æ‡¶â‡¶®‡ßç‡¶∏‡¶ø ‡¶™‡¶™-‡¶Ü‡¶™ ‡¶è‡¶®‡¶ø‡¶Æ‡ßá‡¶∂‡¶® */
        @keyframes messagePopUp {
            0% { opacity: 0; transform: translateY(20px) scale(0.9); }
            100% { opacity: 1; transform: translateY(0) scale(1); }
        }

               /* ‚úÖ MARQUEE FIX */
        marquee {
            width: 100%;
            white-space: nowrap;
            overflow: hidden;
            display: block;
        }
        
               
        
    </style>
</head>
<body class="bg-slate-50">

    <!-- MAINTENANCE SCREEN (HIDDEN BY DEFAULT) -->
    <div id="maintenanceScreen" class="maintenance-screen hidden">
        <div class="maintenance-content">
            <img src="https://i.postimg.cc/GpZMXGKR/1769418328212-removebg-preview.png" alt="Logo">
            <h1 class="text-4xl font-bold mb-4">üîß ‡¶ï‡¶æ‡¶ú ‡¶ö‡¶≤‡¶õ‡ßá</h1>
            <p class="text-xl mb-6">‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶∏‡¶æ‡¶á‡¶ü‡¶ü‡¶ø‡¶ï‡ßá ‡¶Ü‡¶∞‡ßã ‡¶â‡¶®‡ßç‡¶®‡¶§ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡¶õ‡¶ø</p>
            <p class="text-lg text-slate-300 mb-8">‡¶Ö‡¶≤‡ßç‡¶™ ‡¶∏‡¶Æ‡¶Ø‡¶º‡ßá‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡¶æ‡¶≤‡ßÅ ‡¶π‡¶¨‡ßã‡•§ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ß‡ßà‡¶∞‡ßç‡¶Ø‡ßç‡¶Ø‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ß‡¶®‡ßç‡¶Ø‡¶¨‡¶æ‡¶¶‡•§</p>
            <div class="bg-white/10 p-6 rounded-2xl">
                <p class="text-sm">üìû ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó: support@takawala.com</p>
                <p class="text-sm mt-2">üì± ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ: @TAKAR_WALA_ADMIN</p>
            </div>
        </div>
    </div>

    <!-- ‚úÖ GLOBAL CHAT ICON -->
    <div id="globalChatIcon" onclick="window.openSupport()">
        <i class="ri-customer-service-2-fill"></i>
    </div>
    
    <!-- ‚úÖ UPDATED TWAI CHATBOT ICON -->
    <div id="twaiChatbotIcon" onclick="window.openTWAI()">
        <i class="ri-robot-2-fill"></i>
    </div>

    <!-- LOADING OVERLAY -->
    <div id="loadingOverlay" class="loading-overlay hidden">
        <img src="https://i.postimg.cc/GpZMXGKR/1769418328212-removebg-preview.png" class="loading-logo">
    </div>

    <!-- ‚úÖ NEW SMART NOTIFICATION (TOAST) -->
    <div id="smartToast" class="smart-toast hidden">
        <div class="toast-icon"></div>
        <div class="toast-content">
            <p id="toastMessage"></p>
        </div>
        <button onclick="document.getElementById('smartToast').classList.add('hidden')" class="toast-close">
            <i class="ri-close-line"></i>
        </button>
    </div>

    <!-- ‚úÖ NEW LOGIN NOTICE MODAL -->
    <div id="loginNoticeModal" class="ios-modal-overlay hidden">
        <div class="ios-modal animate__animated animate__zoomIn">
            <div class="ios-modal-content">
                <div class="ios-icon-box" style="background: transparent; box-shadow: none; margin-bottom: 0;">
                    <img src="https://i.postimg.cc/6p7RQSVx/megaphone.png" class="w-14 h-14 animate__animated animate__tada animate__infinite" style="filter: drop-shadow(0 5px 10px rgba(0,0,0,0.2));">
                </div>
                
                <h3 id="noticeTitle" class="ios-title mt-2">‡¶®‡ßã‡¶ü‡¶ø‡¶∂</h3>
                
                <div id="noticeMessage" class="ios-message mt-2">
                    ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...
                </div>
            </div>
            
            <div class="ios-modal-actions">
                <button onclick="closeLoginNoticeWithConfetti()" class="ios-btn text-blue-600 font-bold" style="font-size: 17px;">
                    ‡¶ì‡¶ï‡ßá, ‡¶¨‡ßÅ‡¶ù‡ßá‡¶õ‡¶ø
                </button>
            </div>
        </div>
    </div>

    <!-- INTERSTITIAL AD (HIDDEN INITIALLY) -->
    <div id="monitagInterstitial" class="interstitial-ad hidden">
        <div id="interstitialContent" class="text-center bg-white p-5 md:p-8 rounded-2xl w-[95%] max-w-md relative overflow-hidden max-h-[85vh] overflow-y-auto mx-auto my-auto shadow-2xl border-4 border-white/50">
            <h3 class="font-bold text-xl mb-2 text-red-600">‚ö†Ô∏è ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶® ‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ú‡¶®</h3>
            
            <div class="bg-yellow-50 p-4 rounded-xl border border-yellow-200 mb-6">
                <p class="text-sm font-bold text-slate-700 mb-2">‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶™‡ßá‡¶§‡ßá ‡¶π‡¶≤‡ßá:</p>
                <ul class="text-xs text-left text-slate-600 list-disc pl-4 space-y-1">
                    <li>‡¶®‡¶ø‡¶ö‡ßá‡¶∞ ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®</li>
                    <li>‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶ü‡¶ø ‡¶ì‡¶™‡ßá‡¶® ‡¶ï‡¶∞‡ßá ‡ß´ ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®</li>
                    <li>‡¶§‡¶æ‡¶∞‡¶™‡¶∞ ‡¶´‡¶ø‡¶∞‡ßá ‡¶è‡¶∏‡ßá "‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßÅ‡¶®" ‡¶ö‡¶æ‡¶™‡ßÅ‡¶®</li>
                </ul>
            </div>

            <button onclick="window.openAdLink()" class="w-full bg-blue-600 text-white px-6 py-4 rounded-xl font-bold text-lg shadow-lg hover:scale-105 transition animate-pulse">
                üëâ ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßá ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®
            </button>
            
            <div id="adTimer" class="mt-4 text-slate-400 font-bold text-sm">‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®: ‡ßß‡ß¶</div>
            
            <button onclick="closeInterstitialAd()" class="mt-4 w-full bg-slate-200 text-slate-800 px-6 py-3 rounded-xl font-bold hidden">
                ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßÅ‡¶®
            </button>
        </div>
    </div>

    <!-- ‚úÖ UPDATED TWAI CHATBOT MODAL -->
    <div id="twaiModal" class="chatbot-modal hidden">
        <div class="chatbot-content">
            <div class="chatbot-header">
                <h3><i class="ri-robot-2-fill"></i> TWAI ‡¶∏‡¶π‡¶æ‡¶Ø‡¶º‡¶ø‡¶ï‡¶æ ü§ñ</h3>
                <button onclick="window.closeTWAI()" class="bg-white/20 text-white p-2 rounded-full">
                    <i class="ri-close-line"></i>
                </button>
            </div>
            
            <div class="chatbot-body" id="chatbotMessages">
                <div class="chat-message bot-message">
                    <div class="message-bubble bot-bubble">
                        ‡¶Ü‡¶∏‡¶∏‡¶æ‡¶≤‡¶æ‡¶Æ‡ßÅ ‡¶Ü‡¶≤‡¶æ‡¶á‡¶ï‡ßÅ‡¶Æ! ‡¶Ü‡¶Æ‡¶ø TWAI (Takawala AI)‡•§ ‡¶Ü‡¶Æ‡¶ø ‡¶Ü‡¶™‡¶®‡¶æ‡¶ï‡ßá ‡¶∏‡¶æ‡¶π‡¶æ‡¶Ø‡ßç‡¶Ø ‡¶ï‡¶∞‡¶§‡ßá ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶Ü‡¶õ‡¶ø‡•§ ‡¶®‡¶ø‡¶ö‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®‡¶ó‡ßÅ‡¶≤‡ßã‡¶§‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶Ö‡¶•‡¶¨‡¶æ ‡¶∏‡¶∞‡¶æ‡¶∏‡¶∞‡¶ø ‡¶ú‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶∏‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®:
                    </div>
                    <div class="message-time">‡¶è‡¶ñ‡¶®‡¶á</div>
                </div>
            </div>
            
            <!-- ‚úÖ UPDATED: 20 QUESTIONS GRID -->
                        <div class="quick-questions" id="quickQuestionsGrid" style="grid-template-columns: 1fr; gap: 5px;">
                <button onclick="window.askTWAI('‡¶ï‡¶ø‡¶≠‡¶æ‡¶¨‡ßá ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡¶¨?')" class="quick-question">‡ßß. ‡¶ï‡¶ø‡¶≠‡¶æ‡¶¨‡ßá ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡¶¨?</button>
                <button onclick="window.askTWAI('‡¶ü‡¶æ‡¶ï‡¶æ ‡¶§‡ßÅ‡¶≤‡¶¨ ‡¶ï‡¶ø‡¶≠‡¶æ‡¶¨‡ßá?')" class="quick-question">‡ß®. ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶§‡ßÅ‡¶≤‡¶¨ ‡¶ï‡¶ø‡¶≠‡¶æ‡¶¨‡ßá?</button>
                <button onclick="window.askTWAI('‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶ï‡¶§?')" class="quick-question">‡ß©. ‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶ï‡¶§?</button>
                <button onclick="window.askTWAI('‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶™‡ßá‡¶§‡ßá ‡¶ï‡¶§‡¶ï‡ßç‡¶∑‡¶£ ‡¶≤‡¶æ‡¶ó‡ßá?')" class="quick-question">‡ß™. ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶™‡ßá‡¶§‡ßá ‡¶ï‡¶§‡¶ï‡ßç‡¶∑‡¶£ ‡¶≤‡¶æ‡¶ó‡ßá?</button>
                <button onclick="window.askTWAI('‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶≠‡ßÅ‡¶≤‡ßá ‡¶ó‡ßá‡¶õ‡¶ø, ‡¶ï‡¶ø ‡¶ï‡¶∞‡¶¨?')" class="quick-question">‡ß´. ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶≠‡ßÅ‡¶≤‡ßá ‡¶ó‡ßá‡¶õ‡¶ø, ‡¶ï‡¶ø ‡¶ï‡¶∞‡¶¨?</button>
                <button onclick="window.askTWAI('‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶¨‡ßç‡¶Ø‡¶æ‡¶® ‡¶π‡¶≤‡ßá ‡¶ï‡¶ø ‡¶ï‡¶∞‡¶¨?')" class="quick-question">‡ß¨. ‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶¨‡ßç‡¶Ø‡¶æ‡¶® ‡¶π‡¶≤‡ßá ‡¶ï‡¶ø ‡¶ï‡¶∞‡¶¨?</button>
                <button onclick="window.askTWAI('‡¶Æ‡¶ø‡¶®‡¶ø‡¶Æ‡¶æ‡¶Æ ‡¶â‡¶á‡¶•‡¶°‡ßç‡¶∞ ‡¶ï‡¶§?')" class="quick-question">‡ß≠. ‡¶Æ‡¶ø‡¶®‡¶ø‡¶Æ‡¶æ‡¶Æ ‡¶â‡¶á‡¶•‡¶°‡ßç‡¶∞ ‡¶ï‡¶§?</button>
                <button onclick="window.askTWAI('‡¶≠‡ßç‡¶Ø‡¶æ‡¶ü ‡¶¨‡¶æ ‡¶ö‡¶æ‡¶∞‡ßç‡¶ú ‡¶ï‡¶§ ‡¶ï‡¶æ‡¶ü‡ßá?')" class="quick-question">‡ßÆ. ‡¶≠‡ßç‡¶Ø‡¶æ‡¶ü ‡¶¨‡¶æ ‡¶ö‡¶æ‡¶∞‡ßç‡¶ú ‡¶ï‡¶§ ‡¶ï‡¶æ‡¶ü‡ßá?</button>
                <button onclick="window.askTWAI('‡¶è‡¶ï ‡¶´‡ßã‡¶®‡ßá ‡¶ï‡¶Ø‡¶º‡¶ü‡¶ø ‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá?')" class="quick-question">‡ßØ. ‡¶è‡¶ï ‡¶´‡ßã‡¶®‡ßá ‡¶ï‡¶Ø‡¶º‡¶ü‡¶ø ‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá?</button>
                <button onclick="window.askTWAI('‡¶ï‡ßÅ‡¶á‡¶ú ‡¶ñ‡ßá‡¶≤‡¶æ‡¶∞ ‡¶®‡¶ø‡ßü‡¶Æ ‡¶ï‡¶ø?')" class="quick-question">‡ßß‡ß¶. ‡¶ï‡ßÅ‡¶á‡¶ú ‡¶ñ‡ßá‡¶≤‡¶æ‡¶∞ ‡¶®‡¶ø‡ßü‡¶Æ ‡¶ï‡¶ø?</button>
                <button onclick="window.askTWAI('‡¶≠‡¶ø‡¶™‡¶ø‡¶è‡¶® (VPN) ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶¨ ‡¶ï‡¶ø‡¶®‡¶æ?')" class="quick-question">‡ßß‡ßß. ‡¶≠‡¶ø‡¶™‡¶ø‡¶è‡¶® ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶¨ ‡¶ï‡¶ø‡¶®‡¶æ?</button>
                <button onclick="window.askTWAI('‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶ï‡¶ñ‡¶® ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶π‡ßü?')" class="quick-question">‡ßß‡ß®. ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶ï‡¶ñ‡¶® ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶π‡ßü?</button>
                <button onclick="window.askTWAI('‡¶°‡¶ø‡¶™‡ßã‡¶ú‡¶ø‡¶ü ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶è‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá ‡¶®‡¶æ ‡¶ï‡ßá‡¶®?')" class="quick-question">‡ßß‡ß©. ‡¶°‡¶ø‡¶™‡ßã‡¶ú‡¶ø‡¶ü ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶è‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá ‡¶®‡¶æ ‡¶ï‡ßá‡¶®?</button>
                <button onclick="window.askTWAI('‡¶≠‡ßÅ‡¶≤ ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞‡ßá ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶™‡¶æ‡¶†‡¶æ‡¶≤‡ßá ‡¶ï‡¶ø ‡¶ï‡¶∞‡¶¨?')" class="quick-question">‡ßß‡ß™. ‡¶≠‡ßÅ‡¶≤ ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞‡ßá ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶™‡¶æ‡¶†‡¶æ‡¶≤‡ßá ‡¶ï‡¶ø ‡¶ï‡¶∞‡¶¨?</button>
                <button onclick="window.askTWAI('‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡¶ü‡¶ø ‡¶ï‡¶ø ‡¶∞‡¶ø‡¶Ø‡¶º‡ßá‡¶≤?')" class="quick-question">‡ßß‡ß´. ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡¶ü‡¶ø ‡¶ï‡¶ø ‡¶∞‡¶ø‡¶Ø‡¶º‡ßá‡¶≤?</button>
                <button onclick="window.askTWAI('‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü ‡¶è‡¶¨‡¶Ç ‡¶ü‡¶æ‡¶ï‡¶æ‡¶∞ ‡¶π‡¶ø‡¶∏‡¶æ‡¶¨ ‡¶ï‡¶ø?')" class="quick-question">‡ßß‡ß¨. ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü ‡¶è‡¶¨‡¶Ç ‡¶ü‡¶æ‡¶ï‡¶æ‡¶∞ ‡¶π‡¶ø‡¶∏‡¶æ‡¶¨ ‡¶ï‡¶ø?</button>
                <button onclick="window.askTWAI('‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü‡ßá ‡¶ï‡¶•‡¶æ ‡¶¨‡¶≤‡¶¨ ‡¶ï‡¶ø‡¶≠‡¶æ‡¶¨‡ßá?')" class="quick-question">‡ßß‡ß≠. ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü‡ßá ‡¶ï‡¶•‡¶æ ‡¶¨‡¶≤‡¶¨ ‡¶ï‡¶ø‡¶≠‡¶æ‡¶¨‡ßá?</button>
                <button onclick="window.askTWAI('‡¶¨‡¶ø‡¶ï‡¶æ‡¶∂‡ßá ‡¶∏‡¶∞‡ßç‡¶¨‡¶®‡¶ø‡¶Æ‡ßç‡¶® ‡¶ï‡¶§ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶§‡ßã‡¶≤‡¶æ ‡¶Ø‡¶æ‡ßü?')" class="quick-question">‡ßß‡ßÆ. ‡¶¨‡¶ø‡¶ï‡¶æ‡¶∂‡ßá ‡¶∏‡¶∞‡ßç‡¶¨‡¶®‡¶ø‡¶Æ‡ßç‡¶® ‡¶ï‡¶§ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶§‡ßã‡¶≤‡¶æ ‡¶Ø‡¶æ‡ßü?</button>
                <button onclick="window.askTWAI('‡¶®‡¶ó‡¶¶‡ßá ‡¶∏‡¶∞‡ßç‡¶¨‡¶®‡¶ø‡¶Æ‡ßç‡¶® ‡¶ï‡¶§ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶§‡ßã‡¶≤‡¶æ ‡¶Ø‡¶æ‡ßü?')" class="quick-question">‡ßß‡ßØ. ‡¶®‡¶ó‡¶¶‡ßá ‡¶∏‡¶∞‡ßç‡¶¨‡¶®‡¶ø‡¶Æ‡ßç‡¶® ‡¶ï‡¶§ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶§‡ßã‡¶≤‡¶æ ‡¶Ø‡¶æ‡ßü?</button>
                <button onclick="window.askTWAI('‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶ï‡¶ñ‡¶® ‡¶≤‡¶æ‡¶á‡¶®‡ßá ‡¶•‡¶æ‡¶ï‡ßá?')" class="quick-question">‡ß®‡ß¶. ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶ï‡¶ñ‡¶® ‡¶≤‡¶æ‡¶á‡¶®‡ßá ‡¶•‡¶æ‡¶ï‡ßá?</button>
                
                <button onclick="window.askTWAI('‡¶°‡ßá‡¶á‡¶≤‡¶ø ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶ï‡¶ø‡¶≠‡¶æ‡¶¨‡ßá ‡¶®‡¶ø‡¶¨?')" class="quick-question">‡ß®‡ßß. ‡¶°‡ßá‡¶á‡¶≤‡¶ø ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶ï‡¶ø‡¶≠‡¶æ‡¶¨‡ßá ‡¶®‡¶ø‡¶¨?</button>
                <button onclick="window.askTWAI('‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ ‡¶ï‡¶ø‡¶®‡¶≤‡ßá ‡¶ï‡¶ø ‡¶≤‡¶æ‡¶≠?')" class="quick-question">‡ß®‡ß®. ‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ ‡¶ï‡¶ø‡¶®‡¶≤‡ßá ‡¶ï‡¶ø ‡¶≤‡¶æ‡¶≠?</button>
                <button onclick="window.askTWAI('‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶™‡ßç‡¶∞‡¶ø‡¶Æ‡¶ø‡¶Ø‡¶º‡¶æ‡¶Æ ‡¶ï‡¶ø‡¶≠‡¶æ‡¶¨‡ßá ‡¶ï‡¶ø‡¶®‡¶¨?')" class="quick-question">‡ß®‡ß©. ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶™‡ßç‡¶∞‡¶ø‡¶Æ‡¶ø‡¶Ø‡¶º‡¶æ‡¶Æ ‡¶ï‡¶ø‡¶≠‡¶æ‡¶¨‡ßá ‡¶ï‡¶ø‡¶®‡¶¨?</button>
                <button onclick="window.askTWAI('‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶ï‡ßá‡¶® ‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü ‡¶π‡ßü‡ßá ‡¶Ø‡¶æ‡ßü?')" class="quick-question">‡ß®‡ß™. ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶ï‡ßá‡¶® ‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü ‡¶π‡ßü‡ßá ‡¶Ø‡¶æ‡ßü?</button>
                <button onclick="window.askTWAI('‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶ï‡ßã‡¶•‡¶æ‡ßü ‡¶™‡¶æ‡¶¨?')" class="quick-question">‡ß®‡ß´. ‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶ï‡ßã‡¶•‡¶æ‡ßü ‡¶™‡¶æ‡¶¨?</button>
                <button onclick="window.askTWAI('‡¶≠‡ßÅ‡¶≤ ‡¶§‡¶•‡ßç‡¶Ø ‡¶¶‡¶ø‡ßü‡ßá ‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶ñ‡ßÅ‡¶≤‡¶≤‡ßá ‡¶ï‡¶ø ‡¶π‡¶¨‡ßá?')" class="quick-question">‡ß®‡ß¨. ‡¶≠‡ßÅ‡¶≤ ‡¶§‡¶•‡ßç‡¶Ø ‡¶¶‡¶ø‡ßü‡ßá ‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶ñ‡ßÅ‡¶≤‡¶≤‡ßá ‡¶ï‡¶ø ‡¶π‡¶¨‡ßá?</button>
                <button onclick="window.askTWAI('‡¶Ü‡¶Æ‡¶ø ‡¶ï‡¶ø ‡¶¨‡¶ø‡¶¶‡ßá‡¶∂‡ßá ‡¶¨‡¶∏‡ßá ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨?')" class="quick-question">‡ß®‡ß≠. ‡¶Ü‡¶Æ‡¶ø ‡¶ï‡¶ø ‡¶¨‡¶ø‡¶¶‡ßá‡¶∂‡ßá ‡¶¨‡¶∏‡ßá ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨?</button>
                <button onclick="window.askTWAI('‡¶ü‡¶æ‡¶∏‡ßç‡¶ï‡ßá‡¶∞ ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá ‡¶®‡¶æ ‡¶ï‡ßá‡¶®?')" class="quick-question">‡ß®‡ßÆ. ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï‡ßá‡¶∞ ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá ‡¶®‡¶æ ‡¶ï‡ßá‡¶®?</button>
                <button onclick="window.askTWAI('‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∞‡¶ø‡¶ú‡ßá‡¶ï‡ßç‡¶ü ‡¶π‡ßü‡ßá‡¶õ‡ßá ‡¶ï‡ßá‡¶®?')" class="quick-question">‡ß®‡ßØ. ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∞‡¶ø‡¶ú‡ßá‡¶ï‡ßç‡¶ü ‡¶π‡ßü‡ßá‡¶õ‡ßá ‡¶ï‡ßá‡¶®?</button>
                      <button onclick="window.askTWAI('‡¶®‡¶§‡ßÅ‡¶® ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶¨‡ßá ‡¶Ü‡¶∏‡¶¨‡ßá?')" class="quick-question">‡ß©‡ß¶. ‡¶®‡¶§‡ßÅ‡¶® ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶¨‡ßá ‡¶Ü‡¶∏‡¶¨‡ßá?</button>
            </div>

            <div class="chatbot-input">
                <input type="text" id="chatbotInput" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®...">
                <button onclick="window.sendTWAI()"><i class="ri-send-plane-fill"></i></button>
            </div>

        </div> </div> 
            
    <!-- AUTH SCREEN -->
    <div id="authScreen" class="min-h-screen flex flex-col items-center justify-center p-6 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]">
        <div class="glass-card w-full max-w-md p-8 rounded-[35px] text-center animate__animated animate__fadeInUp">
            <img src="https://i.postimg.cc/GpZMXGKR/1769418328212-removebg-preview.png" class="w-32 mx-auto mb-2 drop-shadow-xl animate__animated animate__pulse animate__infinite">
            <h1 class="text-3xl font-extrabold text-slate-800 mb-1">‡¶ü‡¶æ‡¶ï‡¶æ‡¶ì‡ßü‡¶æ‡¶≤‡¶æ</h1>
            <p class="text-slate-500 text-sm font-medium mb-8">‡¶™‡ßç‡¶∞‡¶´‡ßá‡¶∂‡¶®‡¶æ‡¶≤ ‡¶Ü‡¶∞‡ßç‡¶®‡¶ø‡¶Ç ‡¶™‡ßç‡¶≤‡ßç‡¶Ø‡¶æ‡¶ü‡¶´‡¶∞‡ßç‡¶Æ</p>

            <div class="flex bg-slate-100 p-1.5 rounded-full mb-6 border border-slate-200">
                <button onclick="window.toggleAuthTab('login')" id="btnTabLogin" class="flex-1 py-3 rounded-full text-sm font-bold bg-premium text-white shadow-lg transition-all">‡¶≤‡¶ó‡¶á‡¶®</button>
                <button onclick="window.toggleAuthTab('register')" id="btnTabRegister" class="flex-1 py-3 rounded-full text-sm font-bold text-slate-500 transition-all">‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡ßá‡¶∂‡¶®</button>
            </div>

                        <div id="loginForm" class="space-y-4 text-left">
                <input type="email" id="loginEmail" placeholder="‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶è‡¶°‡ßç‡¶∞‡ßá‡¶∏" class="w-full p-4 bg-slate-50 border rounded-2xl outline-none focus:border-green-500 font-bold">
                <input type="password" id="loginPass" placeholder="‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶°" class="w-full p-4 bg-slate-50 border rounded-2xl outline-none focus:border-green-500 font-bold">
                
                <div class="text-right">
                    <button onclick="window.resetPassword()" class="text-xs font-bold text-slate-500 hover:text-green-600 transition">‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° ‡¶≠‡ßÅ‡¶≤‡ßá ‡¶ó‡ßá‡¶õ‡ßá‡¶®?</button>
                </div>

                <button id="btnLoginAction" class="w-full bg-premium text-white font-bold py-4 rounded-2xl shadow-xl active:scale-95 transition mt-1">‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</button>
            </div>

            <div id="registerForm" class="hidden space-y-3 text-left">
                <input type="text" id="regName" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ" class="w-full p-4 bg-slate-50 border rounded-2xl outline-none focus:border-green-500 font-bold">
                <input type="text" id="regPhone" placeholder="‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞" class="w-full p-4 bg-slate-50 border rounded-2xl outline-none focus:border-green-500 font-bold">
                <input type="email" id="regEmail" placeholder="‡¶á‡¶Æ‡ßá‡¶á‡¶≤" class="w-full p-4 bg-slate-50 border rounded-2xl outline-none focus:border-green-500 font-bold">
                <input type="password" id="regPass" placeholder="‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° (‡ß¨+ ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ)" class="w-full p-4 bg-slate-50 border rounded-2xl outline-none focus:border-green-500 font-bold">
                <input type="text" id="regReferralCode" placeholder="‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶ï‡ßã‡¶° (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï)" class="w-full p-4 bg-slate-50 border rounded-2xl outline-none focus:border-green-500 font-bold">
                <button id="btnRegAction" class="w-full bg-premium text-white font-bold py-4 rounded-2xl shadow-xl active:scale-95 transition">‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶ñ‡ßÅ‡¶≤‡ßÅ‡¶®</button>
            </div>
        </div>
    </div>

    <!-- MAIN APP -->
    <div id="mainApp" class="hidden pb-24 max-w-md mx-auto min-h-screen relative bg-white">
        
        <!-- HOME SCREEN -->
        <div id="homeScreen" class="animate__animated animate__fadeIn relative">
            
            <div class="bg-premium pb-8 pt-8 px-5 rounded-b-[40px] text-white shadow-xl relative z-10">
                
                <div class="absolute inset-0 opacity-10 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]"></div>
                
                <div class="relative flex justify-between items-center mb-6">
                    <div class="flex items-center gap-3" onclick="window.showPage('profileScreen')">
                        <div class="relative">
                            <img src="https://img.icons8.com/fluency/96/user-male-circle.png" class="w-12 h-12 rounded-full border-2 border-white/30 bg-white/10 backdrop-blur-sm">
                            <span class="absolute bottom-0 right-0 w-3 h-3 bg-green-400 border-2 border-white rounded-full"></span>
                        </div>
                        <div>
                           <h3 class="font-bold text-lg leading-tight text-white drop-shadow-sm flex items-center gap-1" id="userNameDisplay">
    Guest
    <span id="verifiedBadge" class="hidden text-blue-400 text-sm">
        <i class="ri-checkbox-circle-fill"></i>
    </span>
</h3>

                            <div class="flex items-center gap-1 opacity-90">
                                <img src="https://i.postimg.cc/TwfTZM7Z/award.png" class="w-3">
                                <span class="text-[11px] font-bold text-yellow-300 tracking-wide" id="userPlanDisplay">Free Member</span>
                            </div>
                        </div>
                    </div>
                    
                    <div id="notificationIcon" class="w-10 h-10 bg-white/20 backdrop-blur-md rounded-full flex items-center justify-center border border-white/20 relative cursor-pointer hover:bg-white/30 transition shadow-sm">
                        <img src="https://i.postimg.cc/c1nSnFz4/notofication.png" class="w-5 h-5 invert opacity-90">
                        <span class="absolute top-2.5 right-2.5 w-2 h-2 bg-red-500 rounded-full animate-ping"></span>
                        <span class="absolute top-2.5 right-2.5 w-2 h-2 bg-red-500 rounded-full border border-white"></span>
                    </div>
                </div>

                <div class="bg-white/10 backdrop-blur-md rounded-full p-1.5 border border-white/20 shadow-lg relative mx-1 mb-2">
                    <div class="flex items-center justify-between">
                        
                        <div class="relative z-10 pl-1 cursor-pointer" onclick="toggleBalance()">
                            <div id="balancePill" class="balance-pill bg-white/95 rounded-full pl-1 pr-5 py-1 flex items-center gap-2 shadow-sm transition-all active:scale-95 h-10">
                                <div class="w-8 h-8 rounded-full bg-gradient-to-br from-pink-500 to-rose-600 flex items-center justify-center text-white shadow-md">
                                    <i class="ri-wallet-3-fill text-sm"></i>
                                </div>
                                <div class="flex flex-col justify-center min-w-[80px]">
                                    <span id="balanceText" class="text-[11px] font-bold text-slate-600 leading-none">‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®</span>
                                    <span id="balanceAmount" class="text-[13px] font-black text-rose-600 leading-none hidden">‡ß≥0.00</span>
                                </div>
                            </div>
                        </div>

                        <button onclick="window.showPage('walletScreen')" class="bg-white text-emerald-700 px-5 py-2 rounded-full text-[11px] font-bold shadow-md flex items-center gap-2 active:scale-95 transition-transform z-10 mr-1 hover:bg-emerald-50 h-9">
                            <img src="https://i.postimg.cc/7ZGpHH5q/save-money.png" class="w-4 h-4">
                            ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶Æ‡¶æ‡¶®‡¶ø
                        </button>
                    </div>
                </div>
            </div>

                        <div class="mx-5 -mt-6 bg-white p-3 rounded-2xl shadow-lg border border-slate-100 flex items-center gap-3 relative z-20 overflow-hidden">
                <div class="w-8 h-8 bg-orange-50 rounded-full flex items-center justify-center shrink-0">
                    <img src="https://i.postimg.cc/6p7RQSVx/megaphone.png" class="w-5 h-5 animate-pulse">
                </div>
                <div class="w-full overflow-hidden">
                     <marquee behavior="scroll" direction="left" scrollamount="4" class="text-sm font-bold text-slate-600 leading-none pt-1" id="noticeText">
                        ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...
                     </marquee>
                </div>
            </div>


                       <div class="px-5 grid grid-cols-3 gap-3 text-center mt-4 mb-20">
                
    <div onclick="window.showPage('taskScreen')" class="glass-card p-4 rounded-2xl flex flex-col items-center justify-center cursor-pointer active:scale-95 transition shadow-sm hover:shadow-md">
        <img src="https://i.postimg.cc/d1sXyCb6/clipboard.png" class="w-11 mb-2 drop-shadow-md">
        <span class="text-[12px] font-bold text-slate-700">‡¶ü‡¶æ‡¶∏‡ßç‡¶ï</span>
    </div>

    <div onclick="window.showPage('rechargeScreen')" class="glass-card p-4 rounded-2xl flex flex-col items-center justify-center cursor-pointer active:scale-95 transition shadow-sm hover:shadow-md">
        <img src="https://i.postimg.cc/jjdpNH5b/payment-method.png" class="w-11 mb-2 drop-shadow-md">
        <span class="text-[12px] font-bold text-slate-700">‡¶∞‡¶ø‡¶ö‡¶æ‡¶∞‡ßç‡¶ú</span>
    </div>

    <div onclick="window.showPage('vipScreen')" class="glass-card p-4 rounded-2xl flex flex-col items-center justify-center cursor-pointer active:scale-95 transition shadow-sm hover:shadow-md relative">
        <div class="absolute -top-2 -right-2 bg-red-500 text-white text-[9px] font-bold px-2 py-0.5 rounded-full animate-pulse">HOT</div>
        <img src="https://i.postimg.cc/TwfTZM7Z/award.png" class="w-11 mb-2 drop-shadow-md">
        <span class="text-[12px] font-bold text-slate-700">‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ú</span>
    </div>

    <div onclick="window.loadHistory()" class="glass-card p-4 rounded-2xl flex flex-col items-center justify-center cursor-pointer active:scale-95 transition shadow-sm hover:shadow-md">
        <img src="https://i.postimg.cc/VNTvSLRX/transaction-history.png" class="w-11 mb-2 drop-shadow-md">
        <span class="text-[12px] font-bold text-slate-700">‡¶π‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø</span>
    </div>

    <div onclick="window.showDailyBonus()" class="glass-card p-4 rounded-2xl flex flex-col items-center justify-center cursor-pointer active:scale-95 transition shadow-sm hover:shadow-md">
        <img src="https://i.postimg.cc/qqLQKVHV/bonus.png" class="w-11 mb-2 drop-shadow-md">
        <span class="text-[12px] font-bold text-slate-700">‡¶¨‡ßã‡¶®‡¶æ‡¶∏</span>
    </div>

    <div onclick="window.showPage('walletScreen')" class="glass-card p-4 rounded-2xl flex flex-col items-center justify-center cursor-pointer active:scale-95 transition shadow-sm hover:shadow-md">
        <img src="https://i.postimg.cc/wMdF5zV5/withdraw.png" class="w-11 mb-2 drop-shadow-md">
        <span class="text-[12px] font-bold text-slate-700">‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶®</span>
    </div>

    <div onclick="window.showDriveOffer()" class="glass-card p-4 rounded-2xl flex flex-col items-center justify-center cursor-pointer active:scale-95 transition shadow-sm hover:shadow-md">
        <img src="https://i.postimg.cc/qByrJYrn/sim-card.png" class="w-11 mb-2 drop-shadow-md">
        <span class="text-[12px] font-bold text-slate-700">‡¶°‡ßç‡¶∞‡¶æ‡¶á‡¶≠ ‡¶Ö‡¶´‡¶æ‡¶∞</span>
    </div>

    <div onclick="showAnnouncement()" class="glass-card p-4 rounded-2xl flex flex-col items-center justify-center cursor-pointer active:scale-95 transition shadow-sm hover:shadow-md">
        <img src="https://i.postimg.cc/9MW7x5nG/billboard.png" class="w-11 mb-2 drop-shadow-md">
        <span class="text-[12px] font-bold text-slate-700">‡¶Ö‡ßç‡¶Ø‡¶æ‡¶®‡¶æ‡¶â‡¶®‡ßç‡¶∏‡¶Æ‡ßá‡¶®‡ßç‡¶ü</span>
    </div>

    <div onclick="window.showPage('moreScreen')" class="glass-card p-4 rounded-2xl flex flex-col items-center justify-center cursor-pointer active:scale-95 transition shadow-sm hover:shadow-md">
        <img src="https://i.postimg.cc/76SnZckK/more.png" class="w-11 mb-2 drop-shadow-md">
        <span class="text-[12px] font-bold text-slate-700">‡¶Ü‡¶∞‡¶ì</span>
    </div>

</div>

        <!-- TASK SCREEN -->
        <div id="taskScreen" class="hidden p-5 pt-8 animate__animated animate__fadeInRight">
            <div class="flex justify-between items-center mb-6">
                <div class="flex items-center gap-3"><button onclick="window.showPage('homeScreen')" class="bg-white p-2 rounded-full shadow-md"><i class="ri-arrow-left-line text-xl"></i></button><h2 class="text-2xl font-bold text-slate-800">‡¶°‡ßá‡¶á‡¶≤‡¶ø ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï</h2></div>
                <img src="https://i.postimg.cc/1zy2ppvd/insurance.png" onclick="window.showRules('‡¶ü‡¶æ‡¶∏‡ßç‡¶ï')" class="w-8 cursor-pointer">
            </div>
            
            <div class="flex bg-white p-1 rounded-2xl shadow-sm mb-6 border">
                <button onclick="window.switchTaskTab('free')" id="tabFreeTask" class="flex-1 py-3 font-bold text-sm rounded-xl bg-green-500 text-white shadow">‡¶´‡ßç‡¶∞‡¶ø ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï</button>
                <button onclick="window.switchTaskTab('vip')" id="tabVipTask" class="flex-1 py-3 font-bold text-sm rounded-xl text-slate-500">‡¶≠‡¶ø‡¶Ü‡¶á‡¶™‡¶ø ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï</button>
            </div>

            <div id="taskListContainer" class="space-y-3">
                <div class="glass-card p-3 rounded-2xl flex justify-between items-center animate__animated animate__fadeInUp">
                    <div class="flex items-center gap-3"><img src="https://i.postimg.cc/TYLvN32V/telegram.png" class="w-10"><div><h4 class="font-bold text-slate-700">Telegram Channel</h4><p class="text-[10px] text-slate-400">‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶ö‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤ ‡¶∏‡¶æ‡¶¨‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶æ‡¶á‡¶¨ ‡¶ï‡¶∞‡ßÅ‡¶®</p></div></div>
                    <button onclick="window.completeTask('telegram_task', 5)" class="bg-blue-100 text-blue-600 px-4 py-1.5 rounded-full text-xs font-bold">+‡ß≥5</button>
                </div>
            </div>
        </div>

        <!-- WALLET SCREEN -->
        <div id="walletScreen" class="hidden p-5 pt-8 animate__animated animate__fadeInRight">
            <div class="flex items-center justify-between mb-6">
                <div class="flex items-center gap-3"><button onclick="window.showPage('homeScreen')" class="bg-white p-2 rounded-full shadow-md"><i class="ri-arrow-left-line text-xl"></i></button><h2 class="text-2xl font-bold text-slate-800">‡¶ì‡¶Ø‡¶º‡¶æ‡¶≤‡ßá‡¶ü</h2></div>
                <img src="https://i.postimg.cc/1zy2ppvd/insurance.png" onclick="window.showRules('‡¶≤‡ßá‡¶®‡¶¶‡ßá‡¶®')" class="w-8 cursor-pointer">
            </div>

            <div class="grid grid-cols-2 gap-3 mb-6">
                <div class="bg-premium p-4 rounded-2xl text-white text-center shadow-lg"><p class="text-[10px] font-bold opacity-80">‡¶Æ‡ßá‡¶á‡¶® ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏</p><h2 class="text-xl font-extrabold mt-1">‡ß≥ <span id="walletMainDisplay">0.00</span></h2></div>
                <div class="bg-blue-600 p-4 rounded-2xl text-white text-center shadow-lg"><p class="text-[10px] font-bold opacity-80">‡¶∞‡¶ø‡¶ö‡¶æ‡¶∞‡ßç‡¶ú ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏</p><h2 class="text-xl font-extrabold mt-1">‡ß≥ <span id="walletRechargeDisplay">0.00</span></h2></div>
            </div>

            <div class="flex bg-white p-1 rounded-2xl shadow-sm mb-6 border">
                <button onclick="window.toggleWalletTab('deposit')" id="tabDeposit" class="flex-1 py-3 font-bold text-sm rounded-xl bg-green-500 text-white shadow">‡¶°‡¶ø‡¶™‡ßã‡¶ú‡¶ø‡¶ü</button>
                <button onclick="window.toggleWalletTab('withdraw')" id="tabWithdraw" class="flex-1 py-3 font-bold text-sm rounded-xl text-slate-500">‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶®</button>
                <button onclick="window.toggleWalletTab('transfer')" id="tabTransfer" class="flex-1 py-3 font-bold text-sm rounded-xl text-slate-500">‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡ßç‡¶∏‡¶´‡¶æ‡¶∞</button>
            </div>

            <div id="depositSection">
                <div class="grid grid-cols-4 gap-3 mb-6">
                    <div onclick="window.selectPayment(this, 'bKash')" id="payment_bKash" class="bg-white p-2 rounded-2xl border cursor-pointer h-16 flex items-center justify-center"><img src="https://i.postimg.cc/C5vDR4nz/1656235223bkash-logo.png" class="h-10 object-contain"></div>
                    <div onclick="window.selectPayment(this, 'Nagad')" id="payment_Nagad" class="bg-white p-2 rounded-2xl border cursor-pointer h-16 flex items-center justify-center"><img src="https://i.postimg.cc/k4phWWbK/1679248787Nagad-Logo.png" class="h-8 object-contain"></div>
                    <div onclick="window.selectPayment(this, 'Rocket')" id="payment_Rocket" class="bg-white p-2 rounded-2xl border cursor-pointer h-16 flex items-center justify-center"><img src="https://i.postimg.cc/xTbBypgf/vecteezy-rocket-color-logo-mobile-banking-icon-68706013.png" class="h-10 object-contain"></div>
                    <div onclick="window.selectPayment(this, 'USDT')" id="payment_USDT" class="bg-white p-2 rounded-2xl border cursor-pointer h-16 flex items-center justify-center"><img src="https://i.postimg.cc/0QRCvZDV/usdt.png" class="h-10 object-contain"></div>
                </div>
                <div class="glass-card p-5 rounded-[25px] space-y-4 text-center">
                    <div id="depositAddressContainer" class="address-box">
                        <p class="text-slate-500">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</p>
                    </div>
                    
                    <input type="text" id="depositTrxId" placeholder="TrxID" class="w-full p-3 bg-slate-50 rounded-xl border font-bold outline-none">
                    <input type="number" id="depositAmount" placeholder="‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£" class="w-full p-3 bg-slate-50 rounded-xl border font-bold outline-none">
                    <div class="text-xs text-red-500 font-bold" id="vatCalculation">‡¶≠‡ßç‡¶Ø‡¶æ‡¶ü (‡ßß‡ß¶%): ‡ß≥0.00 | ‡¶Æ‡ßã‡¶ü: ‡ß≥0.00</div>
                    <input type="hidden" id="selectedDepositMethod" value="">
                    <button onclick="window.submitDeposit()" class="w-full bg-green-600 text-white font-bold py-3.5 rounded-xl shadow-lg">‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
                </div>
            </div>

            <div id="withdrawSection" class="hidden">
                 <div class="grid grid-cols-4 gap-3 mb-6">
                    <div onclick="window.selectWithdrawMethod(this, 'bKash')" id="withdraw_bKash" class="bg-white p-2 rounded-2xl border cursor-pointer h-16 flex items-center justify-center"><img src="https://i.postimg.cc/C5vDR4nz/1656235223bkash-logo.png" class="h-10 object-contain"></div>
                    <div onclick="window.selectWithdrawMethod(this, 'Nagad')" id="withdraw_Nagad" class="bg-white p-2 rounded-2xl border cursor-pointer h-16 flex items-center justify-center"><img src="https://i.postimg.cc/k4phWWbK/1679248787Nagad-Logo.png" class="h-8 object-contain"></div>
                    <div onclick="window.selectWithdrawMethod(this, 'Rocket')" id="withdraw_Rocket" class="bg-white p-2 rounded-2xl border cursor-pointer h-16 flex items-center justify-center"><img src="https://i.postimg.cc/xTbBypgf/vecteezy-rocket-color-logo-mobile-banking-icon-68706013.png" class="h-10 object-contain"></div>
                    <div onclick="window.selectWithdrawMethod(this, 'USDT')" id="withdraw_USDT" class="bg-white p-2 rounded-2xl border cursor-pointer h-16 flex items-center justify-center"><img src="https://i.postimg.cc/0QRCvZDV/usdt.png" class="h-10 object-contain"></div>
                </div>
                 <div class="glass-card p-5 rounded-[25px] space-y-4">
                    <input type="number" id="withdrawNumber" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞" class="w-full p-3 bg-slate-50 rounded-xl border font-bold outline-none">
                    <input type="number" id="withdrawAmount" placeholder="‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£" class="w-full p-3 bg-slate-50 rounded-xl border font-bold outline-none">
                    <div class="text-xs text-red-500 font-bold" id="withdrawVat">‡¶≠‡ßç‡¶Ø‡¶æ‡¶ü (‡ßß‡ß¶%): ‡ß≥0.00 | ‡¶™‡ßç‡¶∞‡¶æ‡¶™‡ßç‡¶§: ‡ß≥0.00</div>
                    <input type="hidden" id="selectedWithdrawMethod" value="">
                    <button onclick="window.submitWithdraw()" class="w-full bg-red-500 text-white font-bold py-3.5 rounded-xl shadow-lg">‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</button>
                </div>
            </div>

            <div id="transferSection" class="hidden">
                <div class="glass-card p-6 rounded-[25px] text-center space-y-4">
                    <div class="flex items-center justify-center gap-3 text-sm font-bold text-slate-600">
                        <span>‡¶Æ‡ßá‡¶á‡¶® ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏</span> <i class="ri-arrow-right-line"></i> <span>‡¶∞‡¶ø‡¶ö‡¶æ‡¶∞‡ßç‡¶ú ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏</span>
                    </div>
                    <input type="number" id="transferAmount" placeholder="‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£" class="w-full p-3 bg-slate-50 rounded-xl border font-bold outline-none text-center text-xl">
                    <button onclick="window.transferBalance()" class="w-full bg-slate-800 text-white font-bold py-3.5 rounded-xl shadow-lg">‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡ßç‡¶∏‡¶´‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
                    <p class="text-xs text-red-500">* ‡¶∞‡¶ø‡¶ö‡¶æ‡¶∞‡ßç‡¶ú ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶•‡ßá‡¶ï‡ßá ‡¶Æ‡ßá‡¶á‡¶® ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏‡ßá ‡¶®‡ßá‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá ‡¶®‡¶æ‡•§</p>
                </div>
            </div>
        </div>

        <!-- RECHARGE SCREEN -->
        <div id="rechargeScreen" class="hidden p-5 pt-8 animate__animated animate__fadeInRight">
            <div class="flex justify-between items-center mb-6">
                <div class="flex items-center gap-3"><button onclick="window.showPage('homeScreen')" class="bg-white p-2 rounded-full shadow-md"><i class="ri-arrow-left-line text-xl"></i></button><h2 class="text-2xl font-bold text-slate-800">‡¶∞‡¶ø‡¶ö‡¶æ‡¶∞‡ßç‡¶ú</h2></div>
                <img src="https://i.postimg.cc/1zy2ppvd/insurance.png" onclick="window.showRules('‡¶∞‡¶ø‡¶ö‡¶æ‡¶∞‡ßç‡¶ú')" class="w-8 cursor-pointer">
            </div>
            
            <div class="bg-blue-50 p-4 rounded-2xl border border-blue-100 flex justify-between items-center mb-6">
                <div><p class="text-xs font-bold text-slate-500">‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏</p><h2 class="text-2xl font-extrabold text-blue-600">‡ß≥ <span id="rechargePageBalance">0.00</span></h2></div>
                <img src="https://i.postimg.cc/jjdpNH5b/payment-method.png" class="w-10">
            </div>

            <div class="grid grid-cols-5 gap-3 mb-6">
                <div onclick="window.selectOperator(this, 'GP')" class="bg-white p-2 rounded-2xl border cursor-pointer h-16 flex items-center justify-center"><img src="https://i.postimg.cc/65w1n62J/FB-IMG-1769495932877.jpg" class="h-full object-contain rounded-lg"></div>
                <div onclick="window.selectOperator(this, 'BL')" class="bg-white p-2 rounded-2xl border cursor-pointer h-16 flex items-center justify-center"><img src="https://i.postimg.cc/gJ8NL1Gx/FB-IMG-1769495999103.jpg" class="h-full object-contain rounded-lg"></div>
                <div onclick="window.selectOperator(this, 'Robi')" class="bg-white p-2 rounded-2xl border cursor-pointer h-16 flex items-center justify-center"><img src="https://i.postimg.cc/RFHbQNLZ/FB-IMG-1769495977203.jpg" class="h-full object-contain rounded-lg"></div>
                <div onclick="window.selectOperator(this, 'Airtel')" class="bg-white p-2 rounded-2xl border cursor-pointer h-16 flex items-center justify-center"><img src="https://i.postimg.cc/Wz0CjhdX/FB-IMG-1769496019329.jpg" class="h-full object-contain rounded-lg"></div>
                <div onclick="window.selectOperator(this, 'Teletalk')" class="bg-white p-2 rounded-2xl border cursor-pointer h-16 flex items-center justify-center"><img src="https://i.postimg.cc/TYCQbVvT/FB-IMG-1769496047333.jpg" class="h-full object-contain rounded-lg"></div>
            </div>

            <div class="glass-card p-6 rounded-[25px] space-y-4">
                 <input type="number" id="rechPhone" placeholder="‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞" class="w-full bg-slate-50 p-3 rounded-xl border font-bold outline-none">
                 <input type="number" id="rechAmount" placeholder="‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£" class="w-full bg-slate-50 p-3 rounded-xl border font-bold outline-none">
                 <div class="text-xs text-red-500 font-bold" id="rechargeFee">‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏ ‡¶ö‡¶æ‡¶∞‡ßç‡¶ú: ‡ß≥5 | ‡¶Æ‡ßã‡¶ü: ‡ß≥5</div>
                 <input type="hidden" id="selectedOperator" value="GP">
                 <button onclick="window.submitRecharge()" class="w-full bg-blue-600 text-white font-bold py-4 rounded-xl shadow-lg">‡¶∞‡¶ø‡¶ö‡¶æ‡¶∞‡ßç‡¶ú ‡¶ï‡¶∞‡ßÅ‡¶®</button>
            </div>
        </div>
        
        <!-- ‚úÖ DRIVE OFFER SCREEN -->
                        <div id="driveOfferScreen" class="hidden min-h-screen bg-slate-900 text-white animate__animated animate__fadeInRight pb-24">
            <div class="flex items-center gap-3 p-5 pt-8 bg-slate-800/50 backdrop-blur-md sticky top-0 z-50">
                <button onclick="window.showPage('homeScreen')" class="bg-white/10 p-2 rounded-full shadow-md backdrop-blur-md active:scale-95 transition">
                    <i class="ri-arrow-left-line text-xl"></i>
                </button>
                <h2 class="text-xl font-bold">‡¶°‡ßç‡¶∞‡¶æ‡¶á‡¶≠ ‡¶Ö‡¶´‡¶æ‡¶∞</h2>
            </div>
            
            <div id="driveMaintenanceView" class="p-6 text-center mt-10 hidden">
                <div class="relative inline-block mb-6">
                    <div class="absolute inset-0 bg-blue-500 blur-2xl opacity-20 rounded-full"></div>
                    <img src="https://i.postimg.cc/qByrJYrn/sim-card.png" class="w-24 relative z-10 animate-bounce">
                </div>
                <h1 class="text-2xl font-bold mb-3 text-blue-400" id="driveMainTitle">‡¶ï‡¶æ‡¶ú ‡¶ö‡¶≤‡¶õ‡ßá...</h1>
                <p class="text-slate-400 text-sm mb-6" id="driveMainMessage">‡¶°‡ßç‡¶∞‡¶æ‡¶á‡¶≠ ‡¶Ö‡¶´‡¶æ‡¶∞ ‡¶ñ‡ßÅ‡¶¨ ‡¶∂‡ßÄ‡¶ò‡ßç‡¶∞‡¶á ‡¶ö‡¶æ‡¶≤‡ßÅ ‡¶π‡¶¨‡ßá‡•§</p>
                <div class="inline-block bg-slate-800 px-4 py-1.5 rounded-full border border-slate-700">
                    <p class="text-xs font-bold text-slate-300" id="driveLaunchDate">Coming Soon</p>
                </div>
            </div>

            <div id="driveActiveView" class="hidden">
                <div class="flex overflow-x-auto gap-3 p-4 scrollbar-hide sticky top-[72px] z-40 bg-slate-900/90 backdrop-blur-sm">
                    <button onclick="window.loadDriveOffers('gp')" id="tab_gp" class="flex-shrink-0 flex items-center gap-2 px-4 py-2 rounded-full bg-slate-800 border border-slate-700 text-slate-300 font-bold text-xs transition-all hover:bg-slate-700">
                        <span class="w-2 h-2 rounded-full bg-blue-500"></span> GP
                    </button>
                    <button onclick="window.loadDriveOffers('robi')" id="tab_robi" class="flex-shrink-0 flex items-center gap-2 px-4 py-2 rounded-full bg-slate-800 border border-slate-700 text-slate-300 font-bold text-xs transition-all hover:bg-slate-700">
                        <span class="w-2 h-2 rounded-full bg-red-500"></span> Robi
                    </button>
                    <button onclick="window.loadDriveOffers('bl')" id="tab_bl" class="flex-shrink-0 flex items-center gap-2 px-4 py-2 rounded-full bg-slate-800 border border-slate-700 text-slate-300 font-bold text-xs transition-all hover:bg-slate-700">
                        <span class="w-2 h-2 rounded-full bg-orange-500"></span> BL
                    </button>
                    <button onclick="window.loadDriveOffers('airtel')" id="tab_airtel" class="flex-shrink-0 flex items-center gap-2 px-4 py-2 rounded-full bg-slate-800 border border-slate-700 text-slate-300 font-bold text-xs transition-all hover:bg-slate-700">
                        <span class="w-2 h-2 rounded-full bg-red-600"></span> Airtel
                    </button>
                    <button onclick="window.loadDriveOffers('teletalk')" id="tab_teletalk" class="flex-shrink-0 flex items-center gap-2 px-4 py-2 rounded-full bg-slate-800 border border-slate-700 text-slate-300 font-bold text-xs transition-all hover:bg-slate-700">
                        <span class="w-2 h-2 rounded-full bg-green-500"></span> Teletalk
                    </button>
                </div>

                <div id="driveOffersContainer" class="px-4 pb-20 space-y-3">
                    </div>
            </div>
        </div>


        <!-- MORE SCREEN -->
                <div id="moreScreen" class="hidden p-5 pt-8 animate__animated animate__fadeInRight">
             <div class="flex items-center gap-3 mb-6">
                 <button onclick="window.showPage('homeScreen')" class="bg-white p-2 rounded-full shadow-md">
                     <i class="ri-arrow-left-line text-xl"></i>
                 </button>
                 <h2 class="text-2xl font-bold text-slate-800">‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø</h2>
             </div>
             
            <div class="grid grid-cols-3 gap-4 text-center">
                 <div class="glass-card p-4 rounded-2xl cursor-pointer" onclick="window.showPage('profileScreen')">
                     <img src="https://img.icons8.com/fluency/96/user-male-circle.png" class="w-12 mx-auto mb-2">
                     <p class="text-xs font-bold">‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤</p>
                 </div>
                 <div class="glass-card p-4 rounded-2xl cursor-pointer" onclick="window.showPage('referralScreen')">
                     <img src="https://i.postimg.cc/c4xbp54V/add-friend.png" class="w-12 mx-auto mb-2">
                     <p class="text-xs font-bold">‡¶∞‡ßá‡¶´‡¶æ‡¶∞</p>
                 </div>
                 <div class="glass-card p-4 rounded-2xl cursor-pointer" onclick="window.showPage('marketingScreen')">
                     <img src="https://i.postimg.cc/6p7RQSVx/megaphone.png" class="w-12 mx-auto mb-2">
                     <p class="text-xs font-bold">‡¶Æ‡¶æ‡¶∞‡ßç‡¶ï‡ßá‡¶ü‡¶ø‡¶Ç</p>
                 </div>
                 <div class="glass-card p-4 rounded-2xl cursor-pointer" onclick="window.showPage('quizScreen')">
                     <img src="https://i.postimg.cc/mkNFY0L0/solution.png" class="w-12 mx-auto mb-2">
                     <p class="text-xs font-bold">‡¶ï‡ßÅ‡¶á‡¶ú</p>
                 </div>
                 <div class="glass-card p-4 rounded-2xl cursor-pointer" onclick="window.showPage('summaryScreen')">
                     <img src="https://img.icons8.com/fluency/96/statistics.png" class="w-12 mx-auto mb-2">
                     <p class="text-xs font-bold">‡¶∏‡¶æ‡¶∞‡¶∏‡¶Ç‡¶ï‡ßç‡¶∑‡ßá‡¶™</p>
                 </div>
                 <div class="glass-card p-4 rounded-2xl cursor-pointer" onclick="window.showPage('settingsScreen')">
                     <img src="https://img.icons8.com/fluency/96/settings.png" class="w-12 mx-auto mb-2">
                     <p class="text-xs font-bold">‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏</p>
                 </div>
                 
                 <div class="glass-card p-4 rounded-2xl cursor-pointer" onclick="window.showSpinGame()">
                    <img src="https://i.postimg.cc/02p5C1GN/fortune-wheel.png" class="w-12 mx-auto mb-2">
                    <p class="text-xs font-bold">‡¶∏‡ßç‡¶™‡¶ø‡¶®</p>
                 </div>

                 <div class="glass-card p-4 rounded-2xl cursor-pointer" onclick="window.showPage('subscriptionScreen')">
                     <img src="https://i.postimg.cc/Z5JxMx1z/subscription-active.png" class="w-12 mx-auto mb-2">
                     <p class="text-xs font-bold">‡¶∏‡¶æ‡¶¨‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶™‡¶∂‡¶®</p>
                 </div>
                 
                 <div class="glass-card p-4 rounded-2xl cursor-pointer" onclick="window.openSupport()">
                     <img src="https://i.postimg.cc/GhmX78Xw/comment.png" class="w-12 mx-auto mb-2">
                     <p class="text-xs font-bold">‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü</p>
                 </div>
            </div>
             
             <button onclick="window.logout()" class="w-full mt-10 bg-red-100 text-red-600 py-3 rounded-xl font-bold">‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü</button>
        </div>


        <!-- PROFILE SCREEN -->
        <div id="profileScreen" class="hidden p-5 pt-8 animate__animated animate__fadeInRight">
            <div class="flex items-center gap-3 mb-6"><button onclick="window.showPage('moreScreen')" class="bg-white p-2 rounded-full shadow-md"><i class="ri-arrow-left-line text-xl"></i></button><h2 class="text-2xl font-bold text-slate-800">‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤</h2></div>
            <div class="glass-card p-6 rounded-[25px] space-y-4">
                <div class="text-center mb-6">
                    <div class="relative inline-block">
                        <img id="currentAvatar" src="https://img.icons8.com/fluency/96/user-male-circle.png" class="w-24 h-24 mx-auto rounded-full border-4 border-slate-100">
                        <div class="absolute bottom-0 right-0 bg-green-500 text-white p-1 rounded-full cursor-pointer" onclick="window.showAvatarSelector()">
                            <i class="ri-edit-line text-sm"></i>
                        </div>
                    </div>
                    <h3 class="text-xl font-bold mt-2" id="profNameDisplay">Guest</h3>
                </div>
                <div><label class="text-xs font-bold text-slate-500 ml-2">‡¶®‡¶æ‡¶Æ</label><input type="text" id="profNameInput" class="w-full p-3 bg-white border rounded-xl font-bold"></div>
                <div><label class="text-xs font-bold text-slate-500 ml-2">‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ</label><input type="text" id="profAddressInput" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ" class="w-full p-3 bg-white border rounded-xl font-bold"></div>
                <div><label class="text-xs font-bold text-slate-500 ml-2">‡¶´‡ßã‡¶® (‡¶´‡¶ø‡¶ï‡ßç‡¶∏‡¶°)</label><input type="text" id="profPhoneInput" disabled class="w-full p-3 bg-slate-100 border rounded-xl font-bold text-slate-500"></div>
                <div><label class="text-xs font-bold text-slate-500 ml-2">‡¶á‡¶Æ‡ßá‡¶á‡¶≤</label><input type="email" id="profEmailInput" class="w-full p-3 bg-white border rounded-xl font-bold"></div>
                <button onclick="window.updateProfile()" class="w-full bg-premium text-white py-3 rounded-xl font-bold shadow-lg">‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</button>
                <button onclick="window.showChangePassword()" class="w-full bg-slate-100 text-slate-800 py-3 rounded-xl font-bold shadow-lg">‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®</button>
            </div>
        </div>

        <!-- AVATAR SELECTOR MODAL -->
        <div id="avatarModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-10000 flex items-center justify-center p-4">
            <div class="bg-white rounded-2xl p-6 max-w-md w-full">
                <h3 class="text-xl font-bold mb-4 text-center">‡¶è‡¶≠‡¶æ‡¶ü‡¶æ‡¶∞ ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</h3>
                <div class="grid grid-cols-4 gap-3">
                    <div onclick="window.selectAvatar('https://img.icons8.com/fluency/96/user-male-circle.png')" class="p-2 border rounded-xl cursor-pointer hover:border-green-500">
                        <img src="https://img.icons8.com/fluency/96/user-male-circle.png" class="w-16 h-16 mx-auto">
                    </div>
                    <div onclick="window.selectAvatar('https://img.icons8.com/color/96/user-male-circle--v1.png')" class="p-2 border rounded-xl cursor-pointer hover:border-green-500">
                        <img src="https://img.icons8.com/color/96/user-male-circle--v1.png" class="w-16 h-16 mx-auto">
                    </div>
                    <div onclick="window.selectAvatar('https://img.icons8.com/office/96/user-male-circle.png')" class="p-2 border rounded-xl cursor-pointer hover:border-green-500">
                        <img src="https://img.icons8.com/office/96/user-male-circle.png" class="w-16 h-16 mx-auto">
                    </div>
                    <div onclick="window.selectAvatar('https://img.icons8.com/plasticine/96/user-male-circle.png')" class="p-2 border rounded-xl cursor-pointer hover:border-green-500">
                        <img src="https://img.icons8.com/plasticine/96/user-male-circle.png" class="w-16 h-16 mx-auto">
                    </div>
                    <div onclick="window.selectAvatar('https://img.icons8.com/dusk/96/user-male-circle.png')" class="p-2 border rounded-xl cursor-pointer hover:border-green-500">
                        <img src="https://img.icons8.com/dusk/96/user-male-circle.png" class="w-16 h-16 mx-auto">
                    </div>
                    <div onclick="window.selectAvatar('https://img.icons8.com/fluency/96/user-female-circle.png')" class="p-2 border rounded-xl cursor-pointer hover:border-green-500">
                        <img src="https://img.icons8.com/fluency/96/user-female-circle.png" class="w-16 h-16 mx-auto">
                    </div>
                    <div onclick="window.selectAvatar('https://img.icons8.com/color/96/user-female-circle--v1.png')" class="p-2 border rounded-xl cursor-pointer hover:border-green-500">
                        <img src="https://img.icons8.com/color/96/user-female-circle--v1.png" class="w-16 h-16 mx-auto">
                    </div>
                    <div onclick="window.selectAvatar('https://img.icons8.com/office/96/user-female-circle.png')" class="p-2 border rounded-xl cursor-pointer hover:border-green-500">
                        <img src="https://img.icons8.com/office/96/user-female-circle.png" class="w-16 h-16 mx-auto">
                    </div>
                </div>
                <button onclick="window.closeAvatarModal()" class="w-full mt-4 bg-slate-100 text-slate-800 py-3 rounded-xl font-bold">‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßÅ‡¶®</button>
            </div>
        </div>

        <!-- REFERRAL SCREEN -->
        <div id="referralScreen" class="hidden p-5 pt-8 animate__animated animate__fadeInRight">
            <div class="flex items-center gap-3 mb-6"><button onclick="window.showPage('moreScreen')" class="bg-white p-2 rounded-full shadow-md"><i class="ri-arrow-left-line text-xl"></i></button><h2 class="text-2xl font-bold text-slate-800">‡¶∞‡ßá‡¶´‡¶æ‡¶∞</h2></div>
            <div class="glass-card p-6 rounded-[25px] text-center">
                <img src="https://i.postimg.cc/c4xbp54V/add-friend.png" class="w-20 mx-auto mb-4">
                <h3 class="text-lg font-bold mb-2">‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®, ‡¶Ü‡¶Ø‡¶º ‡¶ï‡¶∞‡ßÅ‡¶®!</h3>
                <p class="text-sm text-slate-600 mb-4 text-container">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡¶æ‡¶≤ ‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶∂‡ßá‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßá ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶•‡ßá‡¶ï‡ßá ‡ß≥5 ‡¶â‡¶™‡¶æ‡¶∞‡ßç‡¶ú‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</p>
                
                <div class="referral-box text-container" id="referralLink">
                    ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...
                </div>
                
                <div class="mb-4">
                    <p class="text-sm font-bold text-slate-700 text-container">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ: <span id="referralCount">0</span></p>
                    <p class="text-sm font-bold text-green-600 text-container">‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶Ü‡¶Ø‡¶º: ‡ß≥<span id="referralEarnings">0</span></p>
                </div>
                <button onclick="window.copyReferralLink()" class="w-full bg-premium text-white py-3 rounded-xl font-bold shadow-lg">‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®</button>
            </div>
        </div>

        <!-- MARKETING SCREEN -->
        <div id="marketingScreen" class="hidden p-5 pt-8 animate__animated animate__fadeInRight">
            <div class="flex items-center gap-3 mb-6"><button onclick="window.showPage('moreScreen')" class="bg-white p-2 rounded-full shadow-md"><i class="ri-arrow-left-line text-xl"></i></button><h2 class="text-2xl font-bold text-slate-800">‡¶Æ‡¶æ‡¶∞‡ßç‡¶ï‡ßá‡¶ü‡¶ø‡¶Ç</h2></div>
            <div class="glass-card p-6 rounded-[25px] text-center">
                <img src="https://img.icons8.com/fluency/96/settings.png" class="w-20 mx-auto mb-4">
                <h3 class="text-xl font-bold text-slate-800 mb-2">‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶®‡ßá ‡¶ï‡¶æ‡¶ú ‡¶ö‡¶≤‡¶§‡ßá‡¶õ‡ßá</h3>
                <p class="text-lg text-slate-600 mb-6">‡¶ñ‡ßÅ‡¶¨ ‡¶∂‡ßÄ‡¶ò‡ßç‡¶∞‡¶á ‡¶è‡¶ü‡¶æ ‡¶ö‡¶æ‡¶≤‡ßÅ ‡¶π‡¶¨‡ßá</p>
                <div class="bg-yellow-50 p-4 rounded-xl border border-yellow-200">
                    <p class="text-sm text-slate-700">‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶Æ‡¶æ‡¶∞‡ßç‡¶ï‡ßá‡¶ü‡¶ø‡¶Ç ‡¶∏‡ßá‡¶ï‡¶∂‡¶®‡¶ü‡¶ø ‡¶ñ‡ßÅ‡¶¨ ‡¶∂‡ßÄ‡¶ò‡ßç‡¶∞‡¶á ‡¶ö‡¶æ‡¶≤‡ßÅ ‡¶π‡¶¨‡ßá‡•§ ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑ ‡¶Ö‡¶´‡¶æ‡¶∞, ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶¨‡¶Ç ‡¶™‡ßç‡¶∞‡¶ö‡¶æ‡¶∞‡¶®‡¶æ ‡¶™‡¶æ‡¶¨‡ßá‡¶®‡•§</p>
                </div>
            </div>
        </div>

        <!-- QUIZ SCREEN -->
        <div id="quizScreen" class="hidden p-5 pt-8 animate__animated animate__fadeInRight">
            <div class="flex items-center gap-3 mb-6"><button onclick="window.showPage('moreScreen')" class="bg-white p-2 rounded-full shadow-md"><i class="ri-arrow-left-line text-xl"></i></button><h2 class="text-2xl font-bold text-slate-800">‡¶ï‡ßÅ‡¶á‡¶ú</h2></div>
            
            <div class="flex bg-white p-1 rounded-2xl shadow-sm mb-6 border">
                <button onclick="window.switchQuizTab('types')" id="tabQuizTypes" class="flex-1 py-3 font-bold text-sm rounded-xl bg-green-500 text-white shadow">‡¶ï‡ßÅ‡¶á‡¶ú ‡¶ü‡¶æ‡¶á‡¶™</button>
                <button onclick="window.switchQuizTab('questions')" id="tabQuizQuestions" class="flex-1 py-3 font-bold text-sm rounded-xl text-slate-500">‡¶ï‡ßÅ‡¶á‡¶ú ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®</button>
            </div>

            <div id="quizTypesSection">
                <div class="glass-card p-6 rounded-[25px] space-y-4">
                    <h3 class="text-lg font-bold text-center mb-4">‡¶ï‡ßÅ‡¶á‡¶ú‡ßá‡¶∞ ‡¶ß‡¶∞‡¶® ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</h3>
                    
                    <div class="grid grid-cols-2 gap-4">
                        <div onclick="window.showQuizQuestions('general')" class="bg-white p-4 rounded-2xl border cursor-pointer text-center hover:border-green-500 transition">
                            <img src="https://i.postimg.cc/mkNFY0L0/solution.png" class="w-12 mx-auto mb-2">
                            <p class="text-xs font-bold">‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£ ‡¶ï‡ßÅ‡¶á‡¶ú</p>
                            <p class="text-[10px] text-slate-500">+‡ß≥0.25</p>
                        </div>
                        <div onclick="window.showQuizQuestions('math')" class="bg-white p-4 rounded-2xl border cursor-pointer text-center hover:border-green-500 transition">
                            <img src="https://i.postimg.cc/Pqpp3Lfc/mathematics.png" class="w-12 mx-auto mb-2">
                            <p class="text-xs font-bold">‡¶Æ‡ßç‡¶Ø‡¶æ‡¶• ‡¶ï‡ßÅ‡¶á‡¶ú</p>
                            <p class="text-[10px] text-slate-500">+‡ß≥0.25</p>
                        </div>
                        <div onclick="window.showQuizQuestions('science')" class="bg-white p-4 rounded-2xl border cursor-pointer text-center hover:border-green-500 transition">
                            <img src="https://i.postimg.cc/V6XSw3CN/scince.png" class="w-12 mx-auto mb-2">
                            <p class="text-xs font-bold">‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶® ‡¶ï‡ßÅ‡¶á‡¶ú</p>
                            <p class="text-[10px] text-slate-500">+‡ß≥0.25</p>
                        </div>
                        <div onclick="window.showQuizQuestions('islamic')" class="bg-white p-4 rounded-2xl border cursor-pointer text-center hover:border-green-500 transition">
                            <img src="https://i.postimg.cc/QCbH91SW/rub-el-hizb.png" class="w-12 mx-auto mb-2">
                            <p class="text-xs font-bold">‡¶á‡¶∏‡¶≤‡¶æ‡¶Æ‡¶ø‡¶ï ‡¶ï‡ßÅ‡¶á‡¶ú</p>
                            <p class="text-[10px] text-slate-500">+‡ß≥0.25</p>
                        </div>
                    </div>
                </div>
            </div>

            <div id="quizQuestionsSection" class="hidden">
                <div class="glass-card p-6 rounded-[25px] space-y-4">
                    <div class="flex justify-between items-center mb-4">
                        <button onclick="window.switchQuizTab('types')" class="bg-slate-100 text-slate-800 px-3 py-1 rounded-lg font-bold text-sm">
                            <i class="ri-arrow-left-line"></i> ‡¶´‡¶ø‡¶∞‡ßá ‡¶Ø‡¶æ‡¶®
                        </button>
                        <h3 id="quizTypeTitle" class="text-lg font-bold">‡¶ï‡ßÅ‡¶á‡¶ú</h3>
                        <div class="quiz-timer" id="quizTimer">‡ß©‡ß¶</div>
                    </div>
                    
                    <div id="quizQuestionsContainer">
                        <!-- Questions will be loaded here -->
                    </div>
                    
                    <button onclick="window.submitQuiz()" id="submitQuizBtn" class="w-full bg-premium text-white py-3 rounded-xl font-bold shadow-lg hidden">‡¶∏‡¶æ‡¶¨‡¶Æ‡¶ø‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</button>
                </div>
            </div>
        </div>

        <!-- SUMMARY SCREEN -->
        <div id="summaryScreen" class="hidden p-5 pt-8 animate__animated animate__fadeInRight">
            <div class="flex items-center gap-3 mb-6"><button onclick="window.showPage('moreScreen')" class="bg-white p-2 rounded-full shadow-md"><i class="ri-arrow-left-line text-xl"></i></button><h2 class="text-2xl font-bold text-slate-800">‡¶∏‡¶æ‡¶∞‡¶∏‡¶Ç‡¶ï‡ßç‡¶∑‡ßá‡¶™</h2></div>
            <div class="glass-card p-6 rounded-[25px] space-y-4">
                <h3 class="text-lg font-bold text-center mb-4">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶∞‡¶∏‡¶Ç‡¶ï‡ßç‡¶∑‡ßá‡¶™</h3>
                <div class="grid grid-cols-2 gap-3">
                    <div class="bg-green-50 p-3 rounded-xl text-center">
                        <p class="text-xs font-bold text-green-700">‡¶Æ‡ßã‡¶ü ‡¶Ü‡¶Ø‡¶º</p>
                        <h3 class="text-xl font-bold text-green-800">‡ß≥ <span id="totalEarnings">0.00</span></h3>
                    </div>
                    <div class="bg-blue-50 p-3 rounded-xl text-center">
                        <p class="text-xs font-bold text-blue-700">‡¶Æ‡ßã‡¶ü ‡¶°‡¶ø‡¶™‡ßã‡¶ú‡¶ø‡¶ü</p>
                        <h3 class="text-xl font-bold text-blue-800">‡ß≥ <span id="totalDeposit">0.00</span></h3>
                    </div>
                    <div class="bg-red-50 p-3 rounded-xl text-center">
                        <p class="text-xs font-bold text-red-700">‡¶Æ‡ßã‡¶ü ‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶®</p>
                        <h3 class="text-xl font-bold text-red-800">‡ß≥ <span id="totalWithdraw">0.00</span></h3>
                    </div>
                    <div class="bg-purple-50 p-3 rounded-xl text-center">
                        <p class="text-xs font-bold text-purple-700">‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶Ü‡¶Ø‡¶º</p>
                        <h3 class="text-xl font-bold text-purple-800">‡ß≥ <span id="todayEarnings">0.00</span></h3>
                    </div>
                    <div class="bg-yellow-50 p-3 rounded-xl text-center">
                        <p class="text-xs font-bold text-yellow-700">‡¶Æ‡ßã‡¶ü ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï</p>
                        <h3 class="text-xl font-bold text-yellow-800"><span id="totalTasks">0</span></h3>
                    </div>
                    <div class="bg-pink-50 p-3 rounded-xl text-center">
                        <p class="text-xs font-bold text-pink-700">‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ</p>
                        <h3 class="text-xl font-bold text-pink-800"><span id="totalReferrals">0</span></h3>
                    </div>
                </div>
                <div class="mt-6">
                    <h4 class="font-bold mb-2">‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø ‡¶§‡¶•‡ßç‡¶Ø:</h4>
                    <div class="space-y-2 text-sm">
                        <div class="flex justify-between"><span>‡¶ú‡¶Ø‡¶º‡ßá‡¶® ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ:</span><span id="joinDate">-</span></div>
                        <div class="flex justify-between"><span>‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ú:</span><span id="summaryPlan">Free</span></div>
                        <div class="flex justify-between"><span>‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï:</span><span id="activeTasks">0</span></div>
                        <div class="flex justify-between"><span>‡¶°‡ßá‡¶á‡¶≤‡¶ø ‡¶¨‡ßã‡¶®‡¶æ‡¶∏:</span><span id="dailyBonusStatus">‡¶Ü‡¶ú ‡¶®‡ßá‡¶ì‡¶Ø‡¶º‡¶æ ‡¶π‡¶Ø‡¶º‡¶®‡¶ø</span></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ‚úÖ UPDATED SETTINGS SCREEN -->
        <div id="settingsScreen" class="hidden p-5 pt-8 animate__animated animate__fadeInRight">
            <div class="flex items-center gap-3 mb-6"><button onclick="window.showPage('moreScreen')" class="bg-white p-2 rounded-full shadow-md"><i class="ri-arrow-left-line text-xl"></i></button><h2 class="text-2xl font-bold text-slate-800">‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏</h2></div>
            <div class="glass-card p-6 rounded-[25px] space-y-4">
                <h3 class="text-lg font-bold mb-4">‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏</h3>
                <div class="space-y-3">
                    <div class="flex justify-between items-center">
                        <span>‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶®</span>
                        <label class="toggle">
                            <input type="checkbox" id="notificationToggle" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="flex justify-between items-center">
                        <span>‡¶°‡¶æ‡¶∞‡ßç‡¶ï ‡¶Æ‡ßã‡¶°</span>
                        <label class="toggle">
                            <input type="checkbox" id="darkModeToggle">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="flex justify-between items-center">
                        <span>‡¶∏‡¶æ‡¶â‡¶®‡ßç‡¶°</span>
                        <label class="toggle">
                            <input type="checkbox" id="soundToggle" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="flex justify-between items-center">
                        <span>‡¶≠‡¶æ‡¶á‡¶¨‡ßç‡¶∞‡ßá‡¶∂‡¶®</span>
                        <label class="toggle">
                            <input type="checkbox" id="vibrationToggle" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>
                
                <div class="mt-6">
                    <h4 class="font-bold mb-2">‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏</h4>
                    <button onclick="window.showPage('profileScreen')" class="w-full bg-slate-100 text-slate-800 py-2.5 rounded-lg font-bold text-sm mb-2">‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶è‡¶°‡¶ø‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</button>
                    <button onclick="window.showChangePassword()" class="w-full bg-slate-100 text-slate-800 py-2.5 rounded-lg font-bold text-sm mb-2">‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®</button>
                </div>
             
                         <div class="glass-card p-5 mt-4 border-t-4 border-slate-800">
                <div class="flex items-center gap-2 mb-4">
                    <img src="https://img.icons8.com/fluency/48/password-check.png" class="w-6">
                    <h3 class="font-bold text-slate-800">‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡¶ú‡ßá‡¶ï‡¶∂‡¶® ‡¶™‡¶ø‡¶® ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</h3>
                </div>
                <div class="grid grid-cols-2 gap-3">
                    <input type="password" id="newPin" maxlength="4" placeholder="‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡¶ø‡¶® (‡ß™ ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ)" class="w-full p-3 border rounded-xl text-center font-bold">
                    <input type="password" id="confirmPin" maxlength="4" placeholder="‡¶™‡¶ø‡¶® ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶®" class="w-full p-3 border rounded-xl text-center font-bold">
                </div>
                <button onclick="window.setTransactionPin()" class="w-full mt-3 bg-slate-800 text-white py-3 rounded-xl font-bold active:scale-95 transition">‡¶™‡¶ø‡¶® ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
                <p class="text-[10px] text-slate-400 mt-2 text-center">*‡¶≤‡ßá‡¶®‡¶¶‡ßá‡¶® ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßü ‡¶è‡¶á ‡¶™‡¶ø‡¶®‡¶ü‡¶ø ‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ú‡¶® ‡¶π‡¶¨‡ßá‡•§</p>
            </div>

                
                <div class="mt-6">
                    <h4 class="font-bold mb-2">‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü</h4>
                    <button onclick="window.openSupport()" class="w-full bg-slate-100 text-slate-800 py-2.5 rounded-lg font-bold text-sm mb-2">‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü</button>
                                      
                    <button onclick="window.open('mailto:support@takawala.com')" class="w-full bg-slate-100 text-slate-800 py-2.5 rounded-lg font-bold text-sm">‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü</button>
                </div>
            </div>
        </div>

        <!-- ‚úÖ ENHANCED HISTORY SCREEN WITH FILTER -->
        <div id="historyScreen" class="hidden p-5 pt-8 animate__animated animate__fadeInRight">
            <div class="flex items-center gap-3 mb-6">
                <button onclick="window.showPage('homeScreen')" class="bg-white p-2 rounded-full shadow-md">
                    <i class="ri-arrow-left-line text-xl"></i>
                </button>
                <h2 class="text-2xl font-bold text-slate-800">‡¶≤‡ßá‡¶®‡¶¶‡ßá‡¶® ‡¶π‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø</h2>
            </div>
            
            <!-- ‚úÖ HISTORY FILTER -->
            <div class="history-filter mb-6">
                <button onclick="window.filterHistory('all')" id="filterAll" class="filter-btn active">‡¶∏‡¶¨</button>
                <button onclick="window.filterHistory('deposit')" id="filterDeposit" class="filter-btn">‡¶°‡¶ø‡¶™‡ßã‡¶ú‡¶ø‡¶ü</button>
                <button onclick="window.filterHistory('withdraw')" id="filterWithdraw" class="filter-btn">‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶®</button>
                <button onclick="window.filterHistory('recharge')" id="filterRecharge" class="filter-btn">‡¶∞‡¶ø‡¶ö‡¶æ‡¶∞‡ßç‡¶ú</button>
                <button onclick="window.filterHistory('task')" id="filterTask" class="filter-btn">‡¶ü‡¶æ‡¶∏‡ßç‡¶ï</button>
                <button onclick="window.filterHistory('bonus')" id="filterBonus" class="filter-btn">‡¶¨‡ßã‡¶®‡¶æ‡¶∏</button>
                <button onclick="window.filterHistory('quiz')" id="filterQuiz" class="filter-btn">‡¶ï‡ßÅ‡¶á‡¶ú</button>
            </div>
            
            <div id="historyListContainer" class="space-y-3">
                <!-- History will be loaded here -->
            </div>
        </div>
        
        <!-- VIP SCREEN -->
        <div id="vipScreen" class="hidden p-5 pt-8 animate__animated animate__fadeInRight">
             <div class="flex justify-between items-center mb-6"><div class="flex items-center gap-3"><button onclick="window.showPage('homeScreen')" class="bg-white p-2 rounded-full shadow-md"><i class="ri-arrow-left-line text-xl"></i></button><h2 class="text-2xl font-bold text-slate-800">‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ú</h2></div></div>
             
             <!-- ‚úÖ DYNAMIC VIP PACKAGE CONTAINER -->
             <div id="packageListContainer" class="space-y-4">
                 <div class="history-loading">
                    <div class="animate-pulse">
                        <div class="h-24 bg-slate-100 rounded-2xl mb-3"></div>
                        <div class="h-24 bg-slate-100 rounded-2xl mb-3"></div>
                        <div class="h-24 bg-slate-100 rounded-2xl"></div>
                    </div>
                 </div>
             </div>
        </div>
        
        <!-- SPIN SCREEN -->
                <div id="spinScreen" class="hidden min-h-screen bg-slate-900 text-white animate__animated animate__fadeInRight pb-20">
            <div class="flex items-center gap-3 p-5 pt-8">
                <button onclick="window.showPage('moreScreen')" class="bg-white/10 p-2 rounded-full shadow-md backdrop-blur-md active:scale-95 transition">
                    <i class="ri-arrow-left-line text-xl"></i>
                </button>
                <h2 class="text-2xl font-bold">‡¶≤‡¶æ‡¶ï‡¶ø ‡¶∏‡ßç‡¶™‡¶ø‡¶®</h2>
            </div>

            <div id="spinMaintenanceView" class="p-6 text-center mt-10">
                <div class="relative inline-block mb-8">
                    <div class="absolute inset-0 bg-purple-500 blur-2xl opacity-20 rounded-full"></div>
                    <img src="https://i.postimg.cc/02p5C1GN/fortune-wheel.png" class="w-32 relative z-10 animate-spin-slow">
                </div>
                
                <h1 class="text-3xl font-bold mb-4 bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent" id="spinMainTitle">
                    ‡¶∂‡ßÄ‡¶ò‡ßç‡¶∞‡¶á ‡¶Ü‡¶∏‡¶õ‡ßá...
                </h1>
                
                <div class="bg-white/10 p-6 rounded-3xl backdrop-blur-md border border-white/10 shadow-2xl">
                    <p class="text-lg text-slate-200 mb-6 leading-relaxed" id="spinMainMessage">
                        ‡¶∏‡ßç‡¶™‡¶ø‡¶® ‡¶´‡¶ø‡¶ö‡¶æ‡¶∞‡¶ü‡¶ø‡¶∞ ‡¶ï‡¶æ‡¶ú ‡¶ö‡¶≤‡¶õ‡ßá‡•§ ‡¶ñ‡ßÅ‡¶¨ ‡¶∂‡ßÄ‡¶ò‡ßç‡¶∞‡¶á ‡¶Ü‡¶™‡¶®‡¶ø ‡¶∏‡ßç‡¶™‡¶ø‡¶® ‡¶ï‡¶∞‡ßá ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶Ü‡ßü ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®‡•§
                    </p>
                    
                    <div class="mt-4 pt-4 border-t border-white/10">
                        <p class="text-sm text-slate-400 uppercase tracking-widest mb-2">‡¶≤‡¶û‡ßç‡¶ö ‡¶°‡ßá‡¶ü</p>
                        <div class="inline-block bg-purple-600/20 px-6 py-2 rounded-full border border-purple-500/30">
                            <p class="text-xl font-bold text-purple-300" id="spinLaunchDate">‡ßß‡¶≤‡¶æ ‡¶ú‡ßÅ‡¶® ‡ß®‡ß¶‡ß®‡ß¨</p>
                        </div>
                    </div>
                </div>
            </div>

            <div id="spinActiveView" class="hidden p-5 flex flex-col items-center">
                <div class="bg-purple-600/20 border border-purple-500/30 px-4 py-2 rounded-full mb-8">
                    <p class="text-sm font-bold text-purple-200">‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶Ö‡¶¨‡¶∂‡¶ø‡¶∑‡ßç‡¶ü ‡¶∏‡ßç‡¶™‡¶ø‡¶®: <span id="spinCount" class="text-white">0</span></p>
                </div>

                <div class="relative w-72 h-72 mb-10">
                    <div class="absolute top-0 left-1/2 -translate-x-1/2 -mt-4 z-20">
                        <i class="ri-arrow-down-fill text-4xl text-yellow-400 drop-shadow-lg"></i>
                    </div>
                    <div id="wheel" class="w-full h-full rounded-full border-4 border-white/20 shadow-2xl relative overflow-hidden transition-transform duration-[4000ms] cubic-bezier(0.2, 0.8, 0.2, 1)">
                        <div class="w-full h-full" style="background: conic-gradient(
                            #ef4444 0deg 60deg, 
                            #3b82f6 60deg 120deg, 
                            #10b981 120deg 180deg, 
                            #f59e0b 180deg 240deg, 
                            #8b5cf6 240deg 300deg, 
                            #ec4899 300deg 360deg);">
                        </div>
                        <div class="absolute inset-0 m-auto w-16 h-16 bg-white rounded-full flex items-center justify-center shadow-lg">
                            <img src="https://i.postimg.cc/GpZMXGKR/1769418328212-removebg-preview.png" class="w-10">
                        </div>
                    </div>
                </div>

                <button onclick="window.spinTheWheel()" id="spinBtn" class="w-full max-w-xs bg-gradient-to-r from-purple-600 to-pink-600 text-white py-4 rounded-2xl font-bold text-xl shadow-lg hover:scale-105 transition active:scale-95">
                    ‡¶∏‡ßç‡¶™‡¶ø‡¶® ‡¶ï‡¶∞‡ßÅ‡¶® üîÑ
                </button>
            </div>
        </div>

        <!-- SUBSCRIPTION SCREEN -->
                 <div id="subscriptionScreen" class="hidden p-5 pt-8 animate__animated animate__fadeInRight">
            <div class="flex items-center gap-3 mb-6">
                <button onclick="window.showPage('moreScreen')" class="bg-white p-2 rounded-full shadow-md">
                    <i class="ri-arrow-left-line text-xl"></i>
                </button>
                <h2 class="text-2xl font-bold text-slate-800">‡¶∏‡¶æ‡¶¨‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶™‡¶∂‡¶®</h2>
            </div>
            
            <div class="flex overflow-x-auto gap-2 mb-6 pb-2 scrollbar-hide" id="subTabsContainer">
                <button onclick="window.switchSubscriptionTab('stars')" id="tabStars" class="whitespace-nowrap px-6 py-3 font-bold text-sm rounded-xl bg-green-500 text-white shadow transition-all">
                    ‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ ‡¶ï‡¶ø‡¶®‡ßÅ‡¶®
                </button>
                
                </div>
            
            <div id="starsSection">
                <div class="glass-card p-6 rounded-[25px] text-center space-y-6">
                    <div class="flex items-center justify-center gap-2 mb-4">
                        <img src="https://i.postimg.cc/Z5JxMx1z/subscription-active.png" class="w-8">
                        <h3 class="text-xl font-bold text-yellow-700">‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ ‡¶ï‡¶ø‡¶®‡ßÅ‡¶®</h3>
                    </div>
                    
                    <p class="text-sm text-slate-600 mb-2">‡¶∏‡ßç‡¶ü‡¶æ‡¶∞‡ßá‡¶∞ ‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø: ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ ‡ß≥<span id="starPrice">2.90</span></p>
                    
                    <div class="grid grid-cols-3 gap-3">
                        <div onclick="window.selectStarPackage(100)" class="bg-white p-4 rounded-2xl border cursor-pointer text-center hover:border-yellow-500">
                            <div class="star-count mx-auto mb-2">100 ‚≠ê</div>
                            <p class="text-lg font-bold text-slate-800">‡ß≥<span id="price100">290</span></p>
                        </div>
                        <div onclick="window.selectStarPackage(250)" class="bg-white p-4 rounded-2xl border cursor-pointer text-center hover:border-yellow-500 relative">
                            <div class="absolute -top-2 -right-2 bg-red-500 text-white text-[9px] px-2 py-0.5 rounded-full">‡ßß‡ß¶% ‡¶õ‡¶æ‡ßú</div>
                            <div class="star-count mx-auto mb-2">250 ‚≠ê</div>
                            <p class="text-lg font-bold text-green-600">‡ß≥<span id="price250">652.5</span></p>
                        </div>
                        <div onclick="window.selectStarPackage(500)" class="bg-white p-4 rounded-2xl border cursor-pointer text-center hover:border-yellow-500 relative">
                            <div class="absolute -top-2 -right-2 bg-red-500 text-white text-[9px] px-2 py-0.5 rounded-full">‡ßß‡ß¶% ‡¶õ‡¶æ‡ßú</div>
                            <div class="star-count mx-auto mb-2">500 ‚≠ê</div>
                            <p class="text-lg font-bold text-green-600">‡ß≥<span id="price500">1305</span></p>
                        </div>
                    </div>
                    
                    <div class="bg-yellow-50 p-4 rounded-xl mt-4">
                        <div class="flex justify-between items-center mb-2">
                            <span class="font-bold text-slate-700">‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶∏‡ßç‡¶ü‡¶æ‡¶∞:</span>
                            <span class="font-bold text-yellow-700"><span id="selectedStars">0</span> ‚≠ê</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="font-bold text-slate-700">‡¶Æ‡ßã‡¶ü ‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø:</span>
                            <span class="text-xl font-bold text-green-600">‡ß≥<span id="totalStarPrice">0</span></span>
                        </div>
                    </div>
                    
                    <button onclick="window.buyStars()" class="w-full bg-yellow-500 text-white font-bold py-3.5 rounded-xl shadow-lg hover:bg-yellow-600 mt-4">‡¶ï‡¶ø‡¶®‡ßÅ‡¶®</button>
                </div>
            </div>
            
            <div id="dynamicServiceSection" class="hidden">
                <div class="glass-card p-6 rounded-[25px] text-center space-y-6">
                    <div class="flex items-center justify-center gap-2 mb-4">
                        <img id="dynamicServiceIcon" src="" class="w-8 rounded-full">
                        <h3 id="dynamicServiceTitle" class="text-xl font-bold text-blue-700">Service Name</h3>
                    </div>
                    
                    <div id="dynamicPackagesList" class="space-y-4">
                        </div>
                    
                    <div class="bg-blue-50 p-4 rounded-xl mt-4">
                        <div class="flex justify-between items-center mb-2">
                            <span class="font-bold text-slate-700">‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ú:</span>
                            <span class="font-bold text-blue-700" id="selectedDynamicPlanName">‡¶ï‡ßã‡¶®‡ßã‡¶ü‡¶ø‡¶á ‡¶®‡¶æ</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="font-bold text-slate-700">‡¶Æ‡ßã‡¶ü ‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø:</span>
                            <span class="text-xl font-bold text-green-600">‡ß≥<span id="selectedDynamicPlanPrice">0</span></span>
                        </div>
                    </div>
                    
                    <button onclick="window.buyDynamicSubscription()" class="w-full bg-blue-600 text-white font-bold py-3.5 rounded-xl shadow-lg hover:scale-105 transition">‡¶ï‡¶ø‡¶®‡ßÅ‡¶®</button>
                </div>
            </div>
        </div>

    <!-- ‚úÖ MODERN iPHONE DOCK BOTTOM NAV -->
    <div id="bottomNav" class="hidden fixed bottom-0 left-0 right-0 bg-white/90 backdrop-blur-xl shadow-[0_-5px_30px_rgba(0,0,0,0.1)] rounded-t-[30px] flex justify-around items-end pb-4 pt-2 z-50 border-t border-white/50">
        
        <div onclick="window.showPage('homeScreen')" class="group text-center cursor-pointer w-14 transition-transform active:scale-90">
            <div class="relative">
                <i class="ri-home-5-fill text-xl text-green-600 mb-0.5 block group-hover:-translate-y-1 transition-transform"></i>
                <span class="absolute -bottom-1.5 left-1/2 -translate-x-1/2 w-1 h-1 bg-green-600 rounded-full opacity-100"></span>
            </div>
            <p class="text-[9px] font-bold text-slate-600">‡¶π‡ßã‡¶Æ</p>
        </div>

        <div onclick="window.showPage('walletScreen')" class="group text-center cursor-pointer w-14 transition-transform active:scale-90">
            <i class="ri-wallet-3-line text-xl text-slate-400 mb-0.5 block group-hover:text-green-600 group-hover:-translate-y-1 transition-all"></i>
            <p class="text-[9px] font-bold text-slate-400 group-hover:text-green-600 transition-colors">‡¶ì‡¶Ø‡¶º‡¶æ‡¶≤‡ßá‡¶ü</p>
        </div>

        <div onclick="window.showPage('taskScreen')" class="text-center cursor-pointer -mt-10 relative active:scale-95 transition-transform">
            <div class="bg-gradient-to-br from-green-500 to-emerald-700 p-3.5 rounded-full shadow-[0_8px_20px_rgba(34,197,94,0.4)] border-[5px] border-slate-50 relative z-10 overflow-hidden">
                <div class="absolute inset-0 bg-white/20 backdrop-blur-sm"></div>
                <img src="https://i.postimg.cc/d1sXyCb6/clipboard.png" class="w-6 h-6 invert brightness-0 relative z-20">
            </div>
            <p class="text-[9px] font-bold mt-1.5 text-slate-600">‡¶ü‡¶æ‡¶∏‡ßç‡¶ï</p>
        </div>

        <div onclick="window.loadHistory()" class="group text-center cursor-pointer w-14 transition-transform active:scale-90">
            <i class="ri-history-line text-xl text-slate-400 mb-0.5 block group-hover:text-green-600 group-hover:-translate-y-1 transition-all"></i>
            <p class="text-[9px] font-bold text-slate-400 group-hover:text-green-600 transition-colors">‡¶π‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø</p>
        </div>

        <div onclick="window.showPage('moreScreen')" class="group text-center cursor-pointer w-14 transition-transform active:scale-90">
            <i class="ri-menu-4-line text-xl text-slate-400 mb-0.5 block group-hover:text-green-600 group-hover:-translate-y-1 transition-all"></i>
            <p class="text-[9px] font-bold text-slate-400 group-hover:text-green-600 transition-colors">‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤</p>
        </div>
    </div>

    <!-- ‚úÖ UPDATED PROOF SUBMISSION MODAL -->
    <div id="proofModal" class="proof-modal hidden">
        <div class="proof-content">
            <div class="bg-premium p-6 text-white text-center">
                <h2 class="text-xl font-bold">‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶™‡ßç‡¶∞‡ßÅ‡¶´ ‡¶∏‡¶æ‡¶¨‡¶Æ‡¶ø‡¶ü</h2>
                <p class="text-sm opacity-90">‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶® ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶Æ‡¶æ‡¶£ ‡¶¶‡¶ø‡¶®</p>
                <div class="task-timer" id="proofTimer">‡ß´</div>
            </div>
            <div class="p-6">
                <div id="proofFormContainer">
                    <!-- Proof form will be loaded here dynamically -->
                </div>
                <div class="mt-4">
                    <button onclick="window.submitProof()" class="w-full bg-green-600 text-white py-3 rounded-xl font-bold">‡¶∏‡¶æ‡¶¨‡¶Æ‡¶ø‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</button>
                    <button onclick="window.closeProofModal()" class="w-full mt-2 bg-slate-200 text-slate-800 py-3 rounded-xl font-bold">‡¶¨‡¶æ‡¶§‡¶ø‡¶≤</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        
                // üõ°Ô∏è SECRET PRO TIP: SECURITY SHIELD
        document.addEventListener('contextmenu', event => event.preventDefault()); // ‡¶∞‡¶æ‡¶á‡¶ü ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶¨‡¶®‡ßç‡¶ß
        document.onkeydown = function(e) {
            // F12, Ctrl+Shift+I, Ctrl+Shift+J, Ctrl+U ‡¶¨‡¶®‡ßç‡¶ß
            if(e.keyCode == 123) return false;
            if(e.ctrlKey && e.shiftKey && e.keyCode == 'I'.charCodeAt(0)) return false;
            if(e.ctrlKey && e.shiftKey && e.keyCode == 'J'.charCodeAt(0)) return false;
            if(e.ctrlKey && e.keyCode == 'U'.charCodeAt(0)) return false;
        }

        
        // ‚úÖ FIREBASE CONFIGURATION
        const firebaseConfig = {
            apiKey: "AIzaSyCXo_oRLBE9Gr7JZ_Fp4rl2OAjCz_AJEBo",
            authDomain: "takawala-e8522.firebaseapp.com",
            projectId: "takawala-e8522",
            storageBucket: "takawala-e8522.firebasestorage.app",
            messagingSenderId: "900133484973",
            appId: "1:900133484973:web:00f8d9de7c970f505f8924",
            measurementId: "G-ZNZ1D35QLB"
        };

        // ‚úÖ TELEGRAM BOT CONFIGURATION
        const TG_BOT_TOKEN = "8583588570:AAEKfRe3y_egMXA6n8WxiZA-z-sU4FEgE1M";
        const TG_ADMIN_CHAT_ID = "6454695072";

        async function sendTelegramNotification(message) {
            try {
                const url = `https://api.telegram.org/bot${TG_BOT_TOKEN}/sendMessage`;
                await fetch(url, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        chat_id: TG_ADMIN_CHAT_ID,
                        text: message,
                        parse_mode: 'Markdown'
                    })
                });
            } catch (error) { console.error("TG Error:", error); }
        }

                // ‚úÖ UPDATED TWAI RESPONSES - 30 QUESTIONS
        const twaiResponses = {
            '‡¶ï‡¶ø‡¶≠‡¶æ‡¶¨‡ßá ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡¶¨?': '‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶Ö‡¶™‡¶∂‡¶®‡ßá ‡¶ó‡¶ø‡ßü‡ßá ‡¶´‡ßç‡¶∞‡¶ø/‡¶≠‡¶ø‡¶Ü‡¶á‡¶™‡¶ø ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®‡•§ ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡¶≤‡ßá ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßá, ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶¶‡ßá‡¶ñ‡ßá ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡¶ø‡¶∑‡ßç‡¶ü ‡¶∏‡¶Æ‡ßü ‡¶™‡¶∞ ‡¶™‡ßç‡¶∞‡ßÅ‡¶´ ‡¶∏‡¶æ‡¶¨‡¶Æ‡¶ø‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®‡•§ ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶è‡¶™‡ßç‡¶∞‡ßÅ‡¶≠ ‡¶ï‡¶∞‡¶≤‡ßá ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶Ø‡ßã‡¶ó ‡¶π‡¶¨‡ßá‡•§',
            '‡¶ü‡¶æ‡¶ï‡¶æ ‡¶§‡ßÅ‡¶≤‡¶¨ ‡¶ï‡¶ø‡¶≠‡¶æ‡¶¨‡ßá?': '‡¶ì‡ßü‡¶æ‡¶≤‡ßá‡¶ü > ‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶®‡ßá ‡¶Ø‡¶æ‡¶®‡•§ ‡¶Æ‡¶ø‡¶®‡¶ø‡¶Æ‡¶æ‡¶Æ ‡ß´‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶® ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®‡•§ ‡¶¨‡¶ø‡¶ï‡¶æ‡¶∂/‡¶®‡¶ó‡¶¶/‡¶∞‡¶ï‡ßá‡¶ü ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßá ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞ ‡¶¶‡¶ø‡¶®‡•§ ‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶®‡ßá‡¶∞ ‡¶∏‡¶Æ‡ßü ‡¶∏‡¶ï‡¶æ‡¶≤ ‡ßØ-‡ßß‡ß¶‡¶ü‡¶æ ‡¶è‡¶¨‡¶Ç ‡¶¨‡¶ø‡¶ï‡¶æ‡¶≤ ‡ß©-‡ßØ:‡ß©‡ß¶‡¶ü‡¶æ‡•§',
            '‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶ï‡¶§?': '‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá ‡¶Ü‡¶™‡¶®‡¶ø ‡¶™‡¶æ‡¶¨‡ßá‡¶® ‡ß≥‡ß´ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏‡•§ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶Ø‡¶ñ‡¶® ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡¶¨‡ßá ‡¶§‡¶ñ‡¶®‡¶á ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶™‡¶æ‡¶¨‡ßá‡¶®‡•§',
            '‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶™‡ßá‡¶§‡ßá ‡¶ï‡¶§‡¶ï‡ßç‡¶∑‡¶£ ‡¶≤‡¶æ‡¶ó‡ßá?': '‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£‡¶§ ‡ß´-‡ß©‡ß¶ ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü‡ßá‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶π‡ßü‡ßá ‡¶Ø‡¶æ‡ßü‡•§ ‡¶§‡¶¨‡ßá ‡¶¨‡ßç‡¶Ø‡¶æ‡¶®‡¶ï‡¶ø‡¶Ç ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶¨‡¶æ ‡¶â‡¶ö‡ßç‡¶ö ‡¶ö‡¶æ‡¶™‡ßá‡¶∞ ‡¶∏‡¶Æ‡ßü ‡ßß-‡ß® ‡¶ò‡¶£‡ßç‡¶ü‡¶æ ‡¶≤‡¶æ‡¶ó‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡•§',
            '‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶≠‡ßÅ‡¶≤‡ßá ‡¶ó‡ßá‡¶õ‡¶ø, ‡¶ï‡¶ø ‡¶ï‡¶∞‡¶¨?': '‡¶≤‡¶ó‡¶á‡¶® ‡¶™‡ßá‡¶á‡¶ú‡ßá "‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶≠‡ßÅ‡¶≤‡ßá ‡¶ó‡ßá‡¶õ‡ßá‡¶®?" ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶¶‡¶ø‡¶®‡•§ ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶Ü‡¶™‡¶®‡¶æ‡¶ï‡ßá ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶ï‡¶∞‡¶¨‡•§',
            '‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶¨‡ßç‡¶Ø‡¶æ‡¶® ‡¶π‡¶≤‡ßá ‡¶ï‡¶ø ‡¶ï‡¶∞‡¶¨?': '‡¶≠‡ßÅ‡¶Ø‡¶º‡¶æ ‡¶§‡¶•‡ßç‡¶Ø, ‡¶è‡¶ï‡¶æ‡¶ß‡¶ø‡¶ï ‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü, ‡¶¨‡¶æ ‡¶®‡¶ø‡¶Ø‡¶º‡¶Æ ‡¶≠‡¶ô‡ßç‡¶ó ‡¶ï‡¶∞‡¶≤‡ßá ‡¶¨‡ßç‡¶Ø‡¶æ‡¶® ‡¶π‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡•§ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶® ‡¶π‡¶≤‡ßá ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü‡ßá ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®‡•§',
            '‡¶Æ‡¶ø‡¶®‡¶ø‡¶Æ‡¶æ‡¶Æ ‡¶â‡¶á‡¶•‡¶°‡ßç‡¶∞ ‡¶ï‡¶§?': '‡¶®‡ßç‡¶Ø‡ßÇ‡¶®‡¶§‡¶Æ ‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶® ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ ‡ß≥‡ß´‡ß¶‡•§ ‡¶´‡ßç‡¶∞‡¶ø ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶¶‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶¶‡ßà‡¶®‡¶ø‡¶ï ‡ßß ‡¶¨‡¶æ‡¶∞, ‡¶≠‡¶ø‡¶Ü‡¶á‡¶™‡¶ø‡¶¶‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡ß® ‡¶¨‡¶æ‡¶∞ ‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶® ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡ßü‡•§',
            '‡¶≠‡ßç‡¶Ø‡¶æ‡¶ü ‡¶¨‡¶æ ‡¶ö‡¶æ‡¶∞‡ßç‡¶ú ‡¶ï‡¶§ ‡¶ï‡¶æ‡¶ü‡ßá?': '‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶®‡ßá ‡ßß‡ß¶% ‡¶≠‡ßç‡¶Ø‡¶æ‡¶ü ‡¶ï‡¶æ‡¶ü‡¶æ ‡¶π‡ßü‡•§ ‡¶Ö‡¶∞‡ßç‡¶•‡¶æ‡ßé ‡ß≥‡ßß‡ß¶‡ß¶ ‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶®‡ßá ‡ß≥‡ßØ‡ß¶ ‡¶™‡¶æ‡¶¨‡ßá‡¶®‡•§ ‡¶°‡¶ø‡¶™‡ßã‡¶ú‡¶ø‡¶ü‡ßá ‡¶ï‡ßã‡¶®‡ßã ‡¶ö‡¶æ‡¶∞‡ßç‡¶ú ‡¶®‡ßá‡¶á‡•§',
            '‡¶è‡¶ï ‡¶´‡ßã‡¶®‡ßá ‡¶ï‡¶Ø‡¶º‡¶ü‡¶ø ‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá?': '‡¶è‡¶ï ‡¶´‡ßã‡¶®‡ßá ‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡ßß‡¶ü‡¶ø ‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá‡•§ ‡¶è‡¶ï‡¶æ‡¶ß‡¶ø‡¶ï ‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶ï‡¶∞‡¶≤‡ßá ‡¶∏‡¶¨‡¶ó‡ßÅ‡¶≤‡ßã ‡¶¨‡ßç‡¶Ø‡¶æ‡¶® ‡¶π‡ßü‡ßá ‡¶Ø‡¶æ‡¶¨‡ßá‡•§',
            '‡¶ï‡ßÅ‡¶á‡¶ú ‡¶ñ‡ßá‡¶≤‡¶æ‡¶∞ ‡¶®‡¶ø‡ßü‡¶Æ ‡¶ï‡¶ø?': '‡¶ï‡ßÅ‡¶á‡¶ú ‡¶Ö‡¶™‡¶∂‡¶®‡ßá ‡¶ó‡¶ø‡ßü‡ßá ‡¶ü‡¶æ‡¶á‡¶™ ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®‡•§ ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ü‡¶ø ‡¶ï‡ßÅ‡¶á‡¶ú‡ßá ‡ß©‡¶ü‡¶ø ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶•‡¶æ‡¶ï‡ßá‡•§ ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ü‡¶ø ‡¶∏‡¶†‡¶ø‡¶ï ‡¶â‡¶§‡ßç‡¶§‡¶∞‡ßá ‡ß≥‡ß¶.‡ß®‡ß´ ‡¶™‡¶æ‡¶¨‡ßá‡¶®‡•§',
            '‡¶≠‡¶ø‡¶™‡¶ø‡¶è‡¶® (VPN) ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶¨ ‡¶ï‡¶ø‡¶®‡¶æ?': '‡¶®‡¶æ, ‡¶≠‡¶ø‡¶™‡¶ø‡¶è‡¶® ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶¨‡ßá‡¶® ‡¶®‡¶æ‡•§ ‡¶≠‡¶ø‡¶™‡¶ø‡¶è‡¶® ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶≤‡ßá ‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶∏‡¶æ‡¶∏‡¶™‡ßá‡¶®‡ßç‡¶° ‡¶π‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡•§',
            '‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶ï‡¶ñ‡¶® ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶π‡ßü?': '‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶¶‡¶ø‡¶® ‡¶∏‡¶ï‡¶æ‡¶≤ ‡ßØ‡¶ü‡¶æ ‡¶•‡ßá‡¶ï‡ßá ‡¶∞‡¶æ‡¶§ ‡ßß‡ß¶‡¶ü‡¶æ ‡¶™‡¶∞‡ßç‡¶Ø‡¶®‡ßç‡¶§ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶π‡ßü‡•§ ‡¶®‡¶§‡ßÅ‡¶® ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶™‡ßá‡¶§‡ßá ‡¶®‡¶ø‡¶Ø‡¶º‡¶Æ‡¶ø‡¶§ ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®‡•§',
            '‡¶°‡¶ø‡¶™‡ßã‡¶ú‡¶ø‡¶ü ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶è‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá ‡¶®‡¶æ ‡¶ï‡ßá‡¶®?': '‡¶°‡¶ø‡¶™‡ßã‡¶ú‡¶ø‡¶ü ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶™‡¶∞ ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßÅ‡¶Ø‡¶º‡¶æ‡¶≤‡¶ø ‡¶è‡¶™‡ßç‡¶∞‡ßÅ‡¶≠ ‡¶ï‡¶∞‡ßá‡•§ ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£‡¶§ ‡ß´-‡ß©‡ß¶ ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü ‡¶≤‡¶æ‡¶ó‡ßá‡•§ ‡¶¨‡ßá‡¶∂‡¶ø ‡¶∏‡¶Æ‡¶Ø‡¶º ‡¶≤‡¶æ‡¶ó‡¶≤‡ßá ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡ßá ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®‡•§',
            '‡¶≠‡ßÅ‡¶≤ ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞‡ßá ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶™‡¶æ‡¶†‡¶æ‡¶≤‡ßá ‡¶ï‡¶ø ‡¶ï‡¶∞‡¶¨?': '‡¶≠‡ßÅ‡¶≤ ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞‡ßá ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã‡¶Ø‡¶º ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶¶‡¶æ‡¶Ø‡¶º‡ßÄ ‡¶®‡¶á‡•§ ‡¶¶‡¶Ø‡¶º‡¶æ ‡¶ï‡¶∞‡ßá ‡¶∏‡¶†‡¶ø‡¶ï ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßá ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡•§',
            '‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡¶ü‡¶ø ‡¶ï‡¶ø ‡¶∞‡¶ø‡¶Ø‡¶º‡ßá‡¶≤?': '‡¶π‡ßç‡¶Ø‡¶æ‡¶Å, Takawala ‡¶è‡¶ï‡¶ü‡¶ø ‡¶¨‡ßà‡¶ß ‡¶Ü‡¶∞‡ßç‡¶®‡¶ø‡¶Ç ‡¶™‡ßç‡¶≤‡ßç‡¶Ø‡¶æ‡¶ü‡¶´‡¶∞‡ßç‡¶Æ‡•§ ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡ß®‡ß¶‡ß®‡ß´ ‡¶∏‡¶æ‡¶≤ ‡¶•‡ßá‡¶ï‡ßá ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡¶õ‡¶ø ‡¶è‡¶¨‡¶Ç ‡¶π‡¶æ‡¶ú‡¶æ‡¶∞‡ßã ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶™‡ßá‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§',
            '‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü ‡¶è‡¶¨‡¶Ç ‡¶ü‡¶æ‡¶ï‡¶æ‡¶∞ ‡¶π‡¶ø‡¶∏‡¶æ‡¶¨ ‡¶ï‡¶ø?': '‡ßß‡ß¶ ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü = ‡ß≥‡ßß‡•§ ‡¶Ü‡¶™‡¶®‡¶ø ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï, ‡¶ï‡ßÅ‡¶á‡¶ú, ‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶•‡ßá‡¶ï‡ßá ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü ‡¶™‡¶æ‡¶¨‡ßá‡¶® ‡¶Ø‡¶æ ‡¶ü‡¶æ‡¶ï‡¶æ‡¶Ø‡¶º ‡¶∞‡ßÇ‡¶™‡¶æ‡¶®‡ßç‡¶§‡¶∞‡¶Ø‡ßã‡¶ó‡ßç‡¶Ø‡•§',
            '‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü‡ßá ‡¶ï‡¶•‡¶æ ‡¶¨‡¶≤‡¶¨ ‡¶ï‡¶ø‡¶≠‡¶æ‡¶¨‡ßá?': '@TAKAR_WALA_ADMIN ‡¶è ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶¶‡¶ø‡¶®‡•§ ‡¶∏‡¶ï‡¶æ‡¶≤ ‡ßØ‡¶ü‡¶æ ‡¶•‡ßá‡¶ï‡ßá ‡¶∞‡¶æ‡¶§ ‡ßß‡ß¶‡¶ü‡¶æ ‡¶™‡¶∞‡ßç‡¶Ø‡¶®‡ßç‡¶§ ‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º‡•§',
            '‡¶¨‡¶ø‡¶ï‡¶æ‡¶∂‡ßá ‡¶∏‡¶∞‡ßç‡¶¨‡¶®‡¶ø‡¶Æ‡ßç‡¶® ‡¶ï‡¶§ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶§‡ßã‡¶≤‡¶æ ‡¶Ø‡¶æ‡ßü?': '‡¶¨‡¶ø‡¶ï‡¶æ‡¶∂‡ßá ‡¶®‡ßç‡¶Ø‡ßÇ‡¶®‡¶§‡¶Æ ‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶® ‡ß≥‡ß´‡ß¶ ‡¶è‡¶¨‡¶Ç ‡¶∏‡¶∞‡ßç‡¶¨‡ßã‡¶ö‡ßç‡¶ö ‡ß≥‡ß´‡ß¶‡ß¶‡ß¶‡•§',
            '‡¶®‡¶ó‡¶¶‡ßá ‡¶∏‡¶∞‡ßç‡¶¨‡¶®‡¶ø‡¶Æ‡ßç‡¶® ‡¶ï‡¶§ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶§‡ßã‡¶≤‡¶æ ‡¶Ø‡¶æ‡ßü?': '‡¶®‡¶ó‡¶¶‡ßá ‡¶®‡ßç‡¶Ø‡ßÇ‡¶®‡¶§‡¶Æ ‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶® ‡ß≥‡ß´‡ß¶ ‡¶è‡¶¨‡¶Ç ‡¶∏‡¶∞‡ßç‡¶¨‡ßã‡¶ö‡ßç‡¶ö ‡ß≥‡ß´‡ß¶‡ß¶‡ß¶‡•§',
            '‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶ï‡¶ñ‡¶® ‡¶≤‡¶æ‡¶á‡¶®‡ßá ‡¶•‡¶æ‡¶ï‡ßá?': '‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£‡¶§ ‡¶∏‡¶ï‡¶æ‡¶≤ ‡ßØ‡¶ü‡¶æ ‡¶•‡ßá‡¶ï‡ßá ‡¶∞‡¶æ‡¶§ ‡ßß‡ß¶‡¶ü‡¶æ ‡¶™‡¶∞‡ßç‡¶Ø‡¶®‡ßç‡¶§ ‡¶≤‡¶æ‡¶á‡¶®‡ßá ‡¶•‡¶æ‡¶ï‡ßá‡•§ ‡¶∂‡ßÅ‡¶ï‡ßç‡¶∞‡¶¨‡¶æ‡¶∞ ‡¶∏‡¶ï‡¶æ‡¶≤ ‡ßÆ‡¶ü‡¶æ ‡¶•‡ßá‡¶ï‡ßá ‡¶∞‡¶æ‡¶§ ‡ßØ:‡ß©‡ß¶‡¶ü‡¶æ ‡¶™‡¶∞‡ßç‡¶Ø‡¶®‡ßç‡¶§‡•§',
            
            // üî• ‡¶®‡¶§‡ßÅ‡¶® ‡ßß‡ß¶‡¶ü‡¶ø ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®
            '‡¶°‡ßá‡¶á‡¶≤‡¶ø ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶ï‡¶ø‡¶≠‡¶æ‡¶¨‡ßá ‡¶®‡¶ø‡¶¨?': '‡¶π‡ßã‡¶Æ ‡¶™‡ßá‡¶ú‡ßá "‡¶°‡ßá‡¶á‡¶≤‡¶ø ‡¶¨‡ßã‡¶®‡¶æ‡¶∏" ‡¶Ö‡¶™‡¶∂‡¶®‡ßá ‡¶Ø‡¶æ‡¶® ‡¶è‡¶¨‡¶Ç ‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶¨‡¶ï‡ßç‡¶∏‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®‡•§ ‡¶è‡¶ï‡¶ü‡¶ø ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶¶‡ßá‡¶ñ‡¶æ‡¶∞ ‡¶™‡¶∞ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶Ø‡ßã‡¶ó ‡¶π‡¶¨‡ßá‡•§',
            '‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ ‡¶ï‡¶ø‡¶®‡¶≤‡ßá ‡¶ï‡¶ø ‡¶≤‡¶æ‡¶≠?': '‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ ‡¶ï‡¶ø‡¶®‡ßá ‡¶Ü‡¶™‡¶®‡¶ø ‡¶∏‡ßç‡¶™‡ßá‡¶∂‡¶æ‡¶≤ ‡¶´‡¶ø‡¶ö‡¶æ‡¶∞ ‡¶Ü‡¶®‡¶≤‡¶ï ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶® ‡¶è‡¶¨‡¶Ç ‡¶≤‡¶ø‡¶°‡¶æ‡¶∞‡¶¨‡ßã‡¶∞‡ßç‡¶°‡ßá ‡¶â‡¶™‡¶∞‡ßá ‡¶•‡¶æ‡¶ï‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®‡•§',
            '‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶™‡ßç‡¶∞‡¶ø‡¶Æ‡¶ø‡¶Ø‡¶º‡¶æ‡¶Æ ‡¶ï‡¶ø‡¶≠‡¶æ‡¶¨‡ßá ‡¶ï‡¶ø‡¶®‡¶¨?': '‡¶∏‡¶æ‡¶¨‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶™‡¶∂‡¶® ‡¶™‡ßá‡¶ú‡ßá ‡¶Ø‡¶æ‡¶® > ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶™‡ßç‡¶∞‡¶ø‡¶Æ‡¶ø‡¶Ø‡¶º‡¶æ‡¶Æ ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶® > ‡¶™‡¶õ‡¶®‡ßç‡¶¶‡ßá‡¶∞ ‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ú ‡¶¨‡ßá‡¶õ‡ßá ‡¶®‡¶ø‡¶® > ‡¶è‡¶°‡¶Æ‡¶ø‡¶®‡ßá‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßá ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®‡•§',
            '‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶ï‡ßá‡¶® ‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü ‡¶π‡ßü‡ßá ‡¶Ø‡¶æ‡ßü?': '‡¶®‡¶ø‡¶∞‡¶æ‡¶™‡¶§‡ßç‡¶§‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶¶‡ßÄ‡¶∞‡ßç‡¶ò ‡¶∏‡¶Æ‡ßü ‡¶á‡¶®‡¶è‡¶ï‡ßç‡¶ü‡¶ø‡¶≠ ‡¶•‡¶æ‡¶ï‡¶≤‡ßá ‡¶Ö‡¶ü‡ßã‡¶Æ‡ßá‡¶ü‡¶ø‡¶ï ‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü ‡¶π‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡•§ ‡¶™‡ßÅ‡¶®‡¶∞‡¶æ‡ßü ‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®‡•§',
            '‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶ï‡ßã‡¶•‡¶æ‡ßü ‡¶™‡¶æ‡¶¨?': '‡¶π‡ßã‡¶Æ ‡¶™‡ßá‡¶ú ‡¶•‡ßá‡¶ï‡ßá "‡¶Æ‡ßã‡¶∞" > "‡¶∞‡ßá‡¶´‡¶æ‡¶∞" ‡¶Ö‡¶™‡¶∂‡¶®‡ßá ‡¶Ø‡¶æ‡¶®‡•§ ‡¶∏‡ßá‡¶ñ‡¶æ‡¶®‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶Ö‡¶™‡¶∂‡¶® ‡¶™‡¶æ‡¶¨‡ßá‡¶®‡•§',
            '‡¶≠‡ßÅ‡¶≤ ‡¶§‡¶•‡ßç‡¶Ø ‡¶¶‡¶ø‡ßü‡ßá ‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶ñ‡ßÅ‡¶≤‡¶≤‡ßá ‡¶ï‡¶ø ‡¶π‡¶¨‡ßá?': '‡¶≠‡ßÅ‡¶≤ ‡¶§‡¶•‡ßç‡¶Ø ‡¶¶‡¶ø‡¶≤‡ßá ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶Ü‡¶ü‡¶ï‡¶æ‡¶®‡ßã ‡¶π‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá ‡¶è‡¶¨‡¶Ç ‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶≠‡ßá‡¶∞‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶®‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶¨‡ßá‡•§ ‡¶∏‡¶†‡¶ø‡¶ï ‡¶§‡¶•‡ßç‡¶Ø ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§',
            '‡¶Ü‡¶Æ‡¶ø ‡¶ï‡¶ø ‡¶¨‡¶ø‡¶¶‡ßá‡¶∂‡ßá ‡¶¨‡¶∏‡ßá ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨?': '‡¶π‡ßç‡¶Ø‡¶æ‡¶Å, ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®‡•§ ‡¶§‡¶¨‡ßá ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂‡ßÄ ‡¶¨‡¶ø‡¶ï‡¶æ‡¶∂/‡¶®‡¶ó‡¶¶/‡¶∞‡¶ï‡ßá‡¶ü ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞‡ßá ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶π‡¶¨‡ßá‡•§',
            '‡¶ü‡¶æ‡¶∏‡ßç‡¶ï‡ßá‡¶∞ ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá ‡¶®‡¶æ ‡¶ï‡ßá‡¶®?': '‡¶á‡¶®‡ßç‡¶ü‡¶æ‡¶∞‡¶®‡ßá‡¶ü ‡¶ï‡¶æ‡¶®‡ßá‡¶ï‡¶∂‡¶® ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®‡•§ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶≤‡ßã‡¶° ‡¶®‡¶æ ‡¶π‡¶≤‡ßá ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡¶ü‡¶ø ‡¶ï‡ßç‡¶≤‡ßã‡¶ú ‡¶ï‡¶∞‡ßá ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ì‡¶™‡ßá‡¶® ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶¨‡¶æ ‡¶ï‡¶ø‡¶õ‡ßÅ‡¶ï‡ßç‡¶∑‡¶£ ‡¶™‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§',
            '‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∞‡¶ø‡¶ú‡ßá‡¶ï‡ßç‡¶ü ‡¶π‡ßü‡ßá‡¶õ‡ßá ‡¶ï‡ßá‡¶®?': '‡¶≠‡ßÅ‡¶≤ ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞, ‡¶≠‡ßÅ‡¶≤ ‡¶§‡¶•‡ßç‡¶Ø, ‡¶Ö‡¶•‡¶¨‡¶æ ‡¶®‡¶ø‡ßü‡¶Æ ‡¶≠‡¶ô‡ßç‡¶ó‡ßá‡¶∞ ‡¶ï‡¶æ‡¶∞‡¶£‡ßá ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∞‡¶ø‡¶ú‡ßá‡¶ï‡ßç‡¶ü ‡¶π‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡•§ ‡¶π‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶¨‡¶æ ‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü‡ßá ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®‡•§',
            '‡¶®‡¶§‡ßÅ‡¶® ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶¨‡ßá ‡¶Ü‡¶∏‡¶¨‡ßá?': '‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶®‡¶ø‡ßü‡¶Æ‡¶ø‡¶§ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶ø‡•§ ‡¶®‡¶§‡ßÅ‡¶® ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶Ü‡¶∏‡¶≤‡ßá ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡ßá‡¶á ‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® ‡¶™‡¶æ‡¶¨‡ßá‡¶® ‡¶Ö‡¶•‡¶¨‡¶æ ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶ö‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤‡ßá ‡¶ú‡¶æ‡¶®‡¶æ‡¶®‡ßã ‡¶π‡¶¨‡ßá‡•§',
            
            'default': '‡¶¶‡ßÅ‡¶É‡¶ñ‡¶ø‡¶§, ‡¶Ü‡¶Æ‡¶ø ‡¶è‡¶á ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®‡ßá‡¶∞ ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶ú‡¶æ‡¶®‡¶ø ‡¶®‡¶æ‡•§ ‡¶Ö‡¶®‡ßç‡¶Ø ‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶ú‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶∏‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶Ö‡¶•‡¶¨‡¶æ ‡¶®‡¶ø‡¶ö‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®‡¶ó‡ßÅ‡¶≤‡ßã ‡¶•‡ßá‡¶ï‡ßá ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®‡•§'
        };

        // ‚úÖ ADSTERRA ADS LINKS
        const adsterraLinks = [
            'https://www.effectivegatecpm.com/t24spqed1?key=7dead7af0eb6b2081051d790a9f95d1b',
            'https://www.effectivegatecpm.com/dt5xiqg93?key=69751766d294f4706935c6d1f690ea51',
            'https://www.effectivegatecpm.com/c6dvsywif5?key=91b430d7c920d751eaf19bfc7106e45d',
            'https://www.effectivegatecpm.com/q0cc46jma?key=8131e64ae71dd95e34995b8326d2ab81',
            'https://www.effectivegatecpm.com/skjxxk20uj?key=5c7946889852184605cd841244ecaf8d',
            'https://www.effectivegatecpm.com/qy6201wn?key=a1b1d956fe60158f669f837297a01895',
            'https://www.effectivegatecpm.com/f97068jz?key=afdd10b69fab899952ebc24c6c4a2898',
            'https://www.effectivegatecpm.com/cvcrrrps?key=5058530abbd00c92c632cc0ad8b71c58'
        ];

        // ‚úÖ WITHDRAW/RECHARGE SCHEDULE
        const withdrawalSchedule = {
            friday: { start: 8, end: 21.5 }, // 8:00 AM to 9:30 PM
            otherDays: { morning: { start: 9, end: 10 }, evening: { start: 15, end: 21.5 } } // 9-10 AM, 3-9:30 PM
        };

        function isWithinWithdrawalSchedule() {
            const now = new Date();
            const day = now.getDay(); // 0 = Sunday, 5 = Friday
            const hour = now.getHours() + (now.getMinutes() / 60);
            
            if (day === 5) { // Friday
                return hour >= withdrawalSchedule.friday.start && hour <= withdrawalSchedule.friday.end;
            } else {
                return (hour >= withdrawalSchedule.otherDays.morning.start && hour <= withdrawalSchedule.otherDays.morning.end) ||
                       (hour >= withdrawalSchedule.otherDays.evening.start && hour <= withdrawalSchedule.otherDays.evening.end);
            }
        }

        // ‚úÖ INITIALIZE FIREBASE
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();
        
        // ‚úÖ GLOBAL VARIABLES
        let currentUserData = null;
        let onAdCompleted = null; // ‚úÖ ‡¶®‡¶§‡ßÅ‡¶® ‡¶≤‡¶æ‡¶á‡¶®: ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶¶‡ßá‡¶ñ‡¶æ‡¶∞ ‡¶™‡¶∞ ‡¶ï‡¶ø ‡¶π‡¶¨‡ßá ‡¶§‡¶æ ‡¶Æ‡¶®‡ßá ‡¶∞‡¶æ‡¶ñ‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø
        let currentUserId = null;
        let currentTaskType = 'free';
        let selectedMethod = 'bKash';
        let selectedOperator = 'GP';
        let selectedStarPackage = 0;
        let selectedTelegramPlan = null;
        let currentQuizType = null;
        let currentLoadedQuizzes = []; // üî• ‡¶è‡¶á ‡¶®‡¶§‡ßÅ‡¶® ‡¶≤‡¶æ‡¶á‡¶®‡¶ü‡¶æ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßã
        let quizTimer = null;
        let taskTimer = null;
        let currentTaskInfo = null;
        let paymentNumbers = {};
        let systemSettings = {};
        let currentHistoryFilter = 'all';
        let todayEarnings = 0;
        let selectedAvatar = 'https://img.icons8.com/fluency/96/user-male-circle.png';
        let selectedAnswers = {};
        let maintenanceMode = false;
        let userWithdrawCount = 0;
        let userRechargeCount = 0;
        let proofTimer = null;

        // ‚úÖ SMART TOAST FUNCTION
        function showSmartToast(message, type = 'info') {
            let displayMessage = typeof message === 'object' && message !== null ? (message.message || JSON.stringify(message)) : String(message);
            
            const toast = document.getElementById('smartToast');
            const toastMessage = document.getElementById('toastMessage');
            const toastIcon = toast.querySelector('.toast-icon');
            
            if(window.toastTimeout) clearTimeout(window.toastTimeout);
            
            // ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶è‡¶®‡¶ø‡¶Æ‡ßá‡¶∂‡¶®
            toast.style.animation = 'none';
            toast.offsetHeight; 
            toast.style.animation = 'slideDownFade 0.4s ease, fadeOutUp 0.4s ease 4.5s forwards';

            toast.classList.remove('hidden');
            
            // üî• ‡¶Æ‡¶°‡¶æ‡¶∞‡ßç‡¶® ‡¶Ü‡¶á‡¶ï‡¶® ‡¶∏‡ßá‡¶ü‡¶Ü‡¶™ (Remix Icon)
            if(type === 'success') {
                toastIcon.innerHTML = '<i class="ri-checkbox-circle-fill text-green-500"></i>';
            } else if(type === 'error') {
                toastIcon.innerHTML = '<i class="ri-close-circle-fill text-red-500"></i>';
            } else {
                toastIcon.innerHTML = '<i class="ri-information-fill text-blue-500"></i>';
            }
            
            toastMessage.innerHTML = displayMessage;
            
            // ‡ß´ ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶™‡¶∞ ‡¶Ö‡¶ü‡ßã‡¶Æ‡ßá‡¶ü‡¶ø‡¶ï ‡¶ö‡¶≤‡ßá ‡¶Ø‡¶æ‡¶¨‡ßá
            window.toastTimeout = setTimeout(() => {
                toast.classList.add('hidden');
            }, 5000);
        }

        // ‚úÖ OLD NOTIFICATION FUNCTION (KEPT FOR BACKWARD COMPATIBILITY)
        function showNotification(message, type = 'info') {
            showSmartToast(message, type);
        }

        // ‚úÖ LOADING ANIMATION
        function showLoading() {
            document.getElementById('loadingOverlay').classList.remove('hidden');
        }
        
        function hideLoading() {
            document.getElementById('loadingOverlay').classList.add('hidden');
        }

        // ‚úÖ UPDATED INTERSTITIAL AD SHOW FUNCTION
        function showInterstitialAd() {
            const interstitial = document.getElementById('monitagInterstitial');
            interstitial.classList.remove('hidden');
            
            let timeLeft = 10; 
            const timerElement = document.getElementById('adTimer');
            
            const closeBtn = document.getElementById('adCloseBtn') || interstitial.querySelector('button.bg-slate-200');
            if(closeBtn) {
                if(!closeBtn.id) closeBtn.id = 'adCloseBtn';
                closeBtn.classList.remove('hidden'); 
                closeBtn.style.display = 'none'; 
                closeBtn.innerHTML = "‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßÅ‡¶®";
                closeBtn.disabled = false;
                closeBtn.style.opacity = "1";
            }

            const adTimer = setInterval(() => {
                timeLeft--;
                if(timerElement) timerElement.textContent = timeLeft;
                if(timeLeft <= 0) {
                    clearInterval(adTimer);
                    if(timerElement) timerElement.textContent = "‡¶è‡¶ñ‡¶® ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶ü‡¶ø ‡¶ì‡¶™‡ßá‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®";
                }
            }, 1000);
            window.adTimer = adTimer;
        }

        function closeInterstitialAd() {
            const interstitial = document.getElementById('monitagInterstitial');
            interstitial.classList.add('hidden');
            if(window.adTimer) clearInterval(window.adTimer);

            // üî• ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá
            if (onAdCompleted) {
                onAdCompleted(); 
                onAdCompleted = null; 
            }
        }

        // ‚úÖ ‚úÖ FIXED: UPDATED AD LINK FUNCTION
        window.openAdLink = () => {
            const randomLink = adsterraLinks[Math.floor(Math.random() * adsterraLinks.length)];
            
            // ‡ßß. ‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶®‡¶§‡ßÅ‡¶® ‡¶ü‡ßç‡¶Ø‡¶æ‡¶¨‡ßá ‡¶ì‡¶™‡ßá‡¶® ‡¶π‡¶¨‡ßá (‡¶Ø‡¶æ‡¶§‡ßá ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶¨‡¶®‡ßç‡¶ß ‡¶®‡¶æ ‡¶π‡ßü)
            window.open(randomLink, '_blank');
            
            // ‡ß®. ‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶®
            showSmartToast('‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá... ‡ß´ ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®', 'info');
            
            // ‡ß©. ‡ß´ ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶™‡¶∞ "‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßÅ‡¶®" ‡¶¨‡¶æ‡¶ü‡¶® ‡¶ö‡¶æ‡¶≤‡ßÅ ‡¶π‡¶¨‡ßá
            const closeBtn = document.querySelector('#monitagInterstitial button.bg-slate-200');
            if(closeBtn) {
                closeBtn.innerHTML = "‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®...";
                closeBtn.disabled = true;
                closeBtn.style.opacity = "0.5";
                closeBtn.style.display = "block"; // ‡¶¨‡¶æ‡¶ü‡¶® ‡¶∂‡ßã ‡¶ï‡¶∞‡¶¨‡ßá
                
                setTimeout(() => {
                    closeBtn.innerHTML = "‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßÅ‡¶®";
                    closeBtn.disabled = false;
                    closeBtn.style.opacity = "1";
                }, 5000); // ‡ß´ ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶™‡¶∞ ‡¶¨‡¶æ‡¶ü‡¶® ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡¶¨‡ßá
            }
        };

        // ‚úÖ COPY TO CLIPBOARD
        window.copyToClipboard = (text) => {
            navigator.clipboard.writeText(text).then(() => {
                showSmartToast('‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!', 'success');
            }).catch(() => {
                showSmartToast('‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá', 'error');
            });
        };

        // ‚úÖ LOAD SYSTEM SETTINGS
        async function loadSystemSettings() {
            try {
                // Check maintenance mode first
                const maintenanceDoc = await db.collection("settings").doc("maintenance").get();
                if(maintenanceDoc.exists) {
                    const maintenanceData = maintenanceDoc.data();
                    if(maintenanceData.maintenanceMode === true) {
                        maintenanceMode = true;
                        showMaintenanceScreen();
                        return;
                    }
                }
                
                const paymentDoc = await db.collection("settings").doc("payment_numbers").get();
                if(paymentDoc.exists) {
                    paymentNumbers = paymentDoc.data();
                    
                    // Update payment method status
                    updatePaymentMethodStatus();
                } else {
                    paymentNumbers = {
                        bKash: "01340975230",
                        Nagad: "01836319726",
                        Rocket: "01600000000",
                        USDT_Polygon: "0x3399E2a9408c675489f84Ae830Ad5ED6FC12c14b",
                        USDT_BEP20: "0xa202c31208D7d7b0cA8f2F48F0821e86824605C4"
                    };
                }

                const settingsDoc = await db.collection("settings").doc("system").get();
                if(settingsDoc.exists) {
                    systemSettings = settingsDoc.data();
                } else {
                    systemSettings = {
                        noticeText: "‡¶∏‡ßç‡¶¨‡¶æ‡¶ó‡¶§‡¶Æ ‡¶ü‡¶æ‡¶ï‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ‡¶≤‡¶æ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡ßá!",
                        referralBonus: 5,
                        taskWaitTime: 5, // ‚úÖ CHANGED FROM 15 TO 5 SECONDS
                        minWithdraw: 50,
                        maxWithdraw: 5000,
                        vatPercentage: 10,
                        rechargeFee: 5,
                        minDeposit: 50,
                        minRecharge: 20
                    };
                }

                document.getElementById('noticeText').innerText = systemSettings.noticeText || "‡¶∏‡ßç‡¶¨‡¶æ‡¶ó‡¶§‡¶Æ ‡¶ü‡¶æ‡¶ï‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ‡¶≤‡¶æ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡ßá!";
                
                // Load user today counts
                await loadUserTodayCounts();
                
            } catch (error) {
                console.error("Error loading system settings:", error);
            }
        }
        
        // ‚úÖ LOAD USER TODAY'S COUNTS
        async function loadUserTodayCounts() {
            if(!currentUserId) return;
            
            try {
                const today = new Date();
                const todayStart = new Date(today.getFullYear(), today.getMonth(), today.getDate());
                const todayEnd = new Date(today.getFullYear(), today.getMonth(), today.getDate() + 1);
                
                // Withdraw count
                const withdrawQuery = await db.collection("history")
                    .where("userId", "==", currentUserId)
                    .where("timestamp", ">=", todayStart)
                    .where("timestamp", "<", todayEnd)
                    .where("type", "in", ["‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶®", "Withdraw"])
                    .get();
                
                userWithdrawCount = withdrawQuery.size || 0;
                
                // Recharge count
                const rechargeQuery = await db.collection("history")
                    .where("userId", "==", currentUserId)
                    .where("timestamp", ">=", todayStart)
                    .where("timestamp", "<", todayEnd)
                    .where("type", "in", ["‡¶∞‡¶ø‡¶ö‡¶æ‡¶∞‡ßç‡¶ú", "Recharge"])
                    .get();
                
                userRechargeCount = rechargeQuery.size || 0;
                
            } catch (error) {
                console.error("Error loading user counts:", error);
            }
        }
        
        // ‚úÖ UPDATE PAYMENT METHOD STATUS
        function updatePaymentMethodStatus() {
            const methods = ['bKash', 'Nagad', 'Rocket', 'USDT'];
            methods.forEach(method => {
                const element = document.getElementById(`payment_${method}`);
                const withdrawElement = document.getElementById(`withdraw_${method}`);
                
                if(element) {
                    if(method === 'USDT') {
                        element.classList.remove('disabled-option');
                        element.onclick = () => window.selectPayment(element, method);
                        element.innerHTML = `<img src="https://i.postimg.cc/0QRCvZDV/usdt.png" class="h-10 object-contain">`;
                    } else if(!paymentNumbers[method] || paymentNumbers[method] === "OFF" || paymentNumbers[method] === "") {
                        element.classList.add('disabled-option');
                        element.onclick = null;
                        element.innerHTML = `
                            <img src="${element.querySelector('img').src}" class="h-10 object-contain opacity-50">
                            <div class="disabled-text">‡¶¨‡¶®‡ßç‡¶ß</div>
                        `;
                    } else {
                        element.classList.remove('disabled-option');
                        element.onclick = () => window.selectPayment(element, method);
                        element.innerHTML = `<img src="https://i.postimg.cc/${method === 'bKash' ? 'C5vDR4nz/1656235223bkash-logo.png' : method === 'Nagad' ? 'k4phWWbK/1679248787Nagad-Logo.png' : method === 'Rocket' ? 'xTbBypgf/vecteezy-rocket-color-logo-mobile-banking-icon-68706013.png' : '0QRCvZDV/usdt.png'}" class="h-10 object-contain">`;
                    }
                }
                
                if(withdrawElement) {
                    if(!paymentNumbers[method] || paymentNumbers[method] === "OFF" || paymentNumbers[method] === "") {
                        withdrawElement.classList.add('disabled-option');
                        withdrawElement.onclick = null;
                        withdrawElement.innerHTML = `
                            <img src="${withdrawElement.querySelector('img').src}" class="h-10 object-contain opacity-50">
                            <div class="disabled-text">‡¶¨‡¶®‡ßç‡¶ß</div>
                        `;
                    } else {
                        withdrawElement.classList.remove('disabled-option');
                        withdrawElement.onclick = () => window.selectWithdrawMethod(withdrawElement, method);
                        withdrawElement.innerHTML = `<img src="https://i.postimg.cc/${method === 'bKash' ? 'C5vDR4nz/1656235223bkash-logo.png' : method === 'Nagad' ? 'k4phWWbK/1679248787Nagad-Logo.png' : method === 'Rocket' ? 'xTbBypgf/vecteezy-rocket-color-logo-mobile-banking-icon-68706013.png' : '0QRCvZDV/usdt.png'}" class="h-10 object-contain">`;
                    }
                }
            });
        }
        
        // ‚úÖ SHOW MAINTENANCE SCREEN
        function showMaintenanceScreen() {
            document.getElementById('maintenanceScreen').classList.remove('hidden');
            document.getElementById('authScreen').classList.add('hidden');
            document.getElementById('mainApp').classList.add('hidden');
            document.getElementById('bottomNav').classList.add('hidden');
            document.getElementById('globalChatIcon').style.display = 'none';
            document.getElementById('twaiChatbotIcon').style.display = 'none';
        }

        // ‚úÖ SHOW NOTICE (CLEAN VERSION)
        async function showLoginNotice() {
            try {
                let title = "‡¶∏‡ßç‡¶¨‡¶æ‡¶ó‡¶§‡¶Æ üëã";
                let msg = "‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶ï‡ßá ‡¶∏‡ßç‡¶¨‡¶æ‡¶ó‡¶§‡¶Æ!";
                
                try {
                    const doc = await db.collection("settings").doc("popup").get();
                    if(doc.exists) {
                        const data = doc.data();
                        if(data.title) title = data.title;
                        if(data.message) msg = data.message;
                    }
                } catch(e) { console.log("DB Error"); }

                document.getElementById('noticeTitle').innerText = title;
                document.getElementById('noticeMessage').innerHTML = msg;
                
                // ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶ì‡¶™‡ßá‡¶® ‡¶π‡¶¨‡ßá (‡¶ï‡¶®‡¶´‡ßá‡¶ü‡¶ø ‡¶è‡¶ñ‡¶® ‡¶ï‡ßç‡¶≤‡ßã‡¶ú ‡¶¨‡¶æ‡¶ü‡¶®‡ßá)
                document.getElementById('loginNoticeModal').classList.remove('hidden');

            } catch (error) { console.error(error); }
        }

        function closeLoginNoticeWithConfetti() {
            document.getElementById('loginNoticeModal').classList.add('hidden');
            if(typeof confetti === 'function') {
                confetti({ particleCount: 150, spread: 80, origin: { y: 0.6 } });
            }
        
            // ‡ß®. ‡¶ï‡¶æ‡¶≤‡¶æ‡¶∞‡¶ø‡¶Ç ‡¶ï‡¶æ‡¶ó‡¶ú ‡¶´‡ßÅ‡¶ü‡¶æ‡¶®‡ßã (Birthday Style)
            if(typeof confetti === 'function') {
                // ‡¶¨‡¶æ‡¶Æ ‡¶™‡¶æ‡¶∂ ‡¶•‡ßá‡¶ï‡ßá
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { x: 0.1, y: 0.6 },
                    zIndex: 99999999
                });
                // ‡¶°‡¶æ‡¶® ‡¶™‡¶æ‡¶∂ ‡¶•‡ßá‡¶ï‡ßá
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { x: 0.9, y: 0.6 },
                    zIndex: 99999999
                });
            }
        }

        // ‚úÖ NEW FUNCTION: CLOSE LOGIN NOTICE
        function closeLoginNotice() {
            document.getElementById('loginNoticeModal').classList.add('hidden');
        }

        // ‚úÖ NEW FUNCTION: LOAD DYNAMIC VIP PACKAGES
        async function loadPackages() {
            try {
                const packagesSnapshot = await db.collection("packages").get();
                
                const packageContainer = document.getElementById('packageListContainer');
                if(!packageContainer) return;
                
                packageContainer.innerHTML = '';
                
                if(packagesSnapshot.empty) {
                    packageContainer.innerHTML = `<div class="text-center py-8 text-slate-500">‡¶ï‡ßã‡¶®‡ßã ‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ú ‡¶®‡ßá‡¶á</div>`;
                    hideLoading();
                    return;
                }
                
                packagesSnapshot.forEach((doc) => {
                    const packageData = doc.data();
                    const packageId = doc.id;
                    
                    let borderColor = 'border-yellow-500';
                    let bgColor = 'bg-yellow-500';
                    let textColor = 'text-yellow-700';
                    
                    if(packageData.name.includes('‡¶ó‡ßã‡¶≤‡ßç‡¶°') || packageData.name.includes('Gold')) {
                        borderColor = 'border-purple-500';
                        bgColor = 'bg-purple-500';
                        textColor = 'text-purple-700';
                    } else if(packageData.name.includes('‡¶™‡ßç‡¶≤‡¶æ‡¶ü‡¶ø‡¶®‡¶æ‡¶Æ') || packageData.name.includes('Platinum')) {
                        borderColor = 'border-green-500';
                        bgColor = 'bg-green-500';
                        textColor = 'text-green-700';
                    }
                    
                    const packageHTML = `
                        <div class="glass-card p-4 rounded-2xl border-2 ${borderColor}">
                            <div class="flex justify-between items-center">
                                <div>
                                    <h3 class="font-bold text-lg ${textColor}">${packageData.name}</h3>
                                    <p class="text-sm text-slate-600">${packageData.description || '‡¶™‡ßç‡¶∞‡¶ø‡¶Æ‡¶ø‡¶Ø‡¶º‡¶æ‡¶Æ ‡¶∏‡ßÅ‡¶¨‡¶ø‡¶ß‡¶æ'}</p>
                                    <p class="text-xs text-slate-500 mt-1">‡¶Æ‡ßá‡¶Ø‡¶º‡¶æ‡¶¶: ${packageData.days || 30} ‡¶¶‡¶ø‡¶®</p>
                                </div>
                                <span class="${bgColor.replace('bg-', 'bg-')}100 ${textColor} px-3 py-1 rounded-full font-bold">‡ß≥${packageData.price}</span>
                            </div>
                            <button onclick="window.buyPackage('${packageId}', ${packageData.price}, '${packageData.name}', ${packageData.days || 30})" class="w-full mt-3 ${bgColor} text-white py-2 rounded-lg font-bold hover:opacity-90 transition">
                                ‡¶ï‡¶ø‡¶®‡ßÅ‡¶®
                            </button>
                        </div>
                    `;
                    
                    packageContainer.innerHTML += packageHTML;
                });
                
            } catch (error) {
                console.error("Error loading packages:", error);
                const packageContainer = document.getElementById('packageListContainer');
                if(packageContainer) {
                    packageContainer.innerHTML = `
                        <div class="glass-card p-6 rounded-2xl text-center">
                            <p class="text-red-500 font-bold">‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ú ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá</p>
                            <button onclick="window.loadPackages()" class="mt-3 bg-premium text-white px-4 py-2 rounded-lg font-bold">
                                ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®
                            </button>
                        </div>
                    `;
                }
            }
        }

        // ‚úÖ UPDATED BUY PACKAGE FUNCTION (PREVENTS DOUBLE PURCHASE)
        window.buyPackage = async (packageId, price, name, days) => {
            if(!currentUserData) {
                showSmartToast('‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶°‡ßá‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...', 'error');
                return;
            }

            // üõë ‡ßß. ‡¶≠‡¶ø‡¶Ü‡¶á‡¶™‡¶ø ‡¶ö‡ßá‡¶ï: ‡¶á‡¶§‡¶ø‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ú ‡¶Ü‡¶õ‡ßá ‡¶ï‡¶ø‡¶®‡¶æ?
            if (currentUserData.plan !== "Free Member" && currentUserData.packageExpiresAt) {
                try {
                    const expiryDate = currentUserData.packageExpiresAt.toDate();
                    const now = new Date();
                    
                    // ‡¶Ø‡¶¶‡¶ø ‡¶Æ‡ßá‡ßü‡¶æ‡¶¶ ‡¶è‡¶ñ‡¶®‡ßã ‡¶∂‡ßá‡¶∑ ‡¶®‡¶æ ‡¶π‡ßü‡ßá ‡¶•‡¶æ‡¶ï‡ßá
                    if (expiryDate > now) {
                        Swal.fire({
                            icon: 'warning',
                            title: '‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ú ‡¶ö‡¶æ‡¶≤‡ßÅ ‡¶Ü‡¶õ‡ßá!',
                            html: `‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ú‡ßá‡¶∞ ‡¶Æ‡ßá‡ßü‡¶æ‡¶¶ <b>${expiryDate.toLocaleDateString('bn-BD')}</b> ‡¶™‡¶∞‡ßç‡¶Ø‡¶®‡ßç‡¶§ ‡¶Ü‡¶õ‡ßá‡•§<br><br>‡¶Æ‡ßá‡ßü‡¶æ‡¶¶ ‡¶∂‡ßá‡¶∑ ‡¶π‡¶ì‡ßü‡¶æ‡¶∞ ‡¶™‡¶∞ ‡¶Ü‡¶™‡¶®‡¶ø ‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ú ‡¶ï‡¶ø‡¶®‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®‡•§`,
                            confirmButtonText: '‡¶¨‡ßÅ‡¶ù‡ßá‡¶õ‡¶ø',
                            confirmButtonColor: '#3b82f6',
                            customClass: {
                                popup: 'rounded-[25px]'
                            }
                        });
                        return; // ‚õîÔ∏è ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶ï‡ßã‡¶° ‡¶•‡¶æ‡¶Æ‡¶ø‡ßü‡ßá ‡¶¶‡¶ø‡¶≤‡¶æ‡¶Æ, ‡¶Ü‡¶∞ ‡¶∏‡¶æ‡¶Æ‡¶®‡ßá ‡¶è‡¶ó‡ßã‡¶¨‡ßá ‡¶®‡¶æ
                    }
                } catch (e) {
                    console.error("Date check error", e);
                }
            }
            
            // ‡ß®. ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶ö‡ßá‡¶ï
            if(currentUserData.mainBalance < price) {
                showSmartToast(`‡¶™‡¶∞‡ßç‡¶Ø‡¶æ‡¶™‡ßç‡¶§ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶®‡ßá‡¶á! ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏: ‡ß≥${currentUserData.mainBalance.toFixed(2)}, ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶®: ‡ß≥${price}`, 'error');
                return;
            }
            
            // ‡ß©. ‡¶ï‡¶®‡¶´‡¶æ‡¶∞‡ßç‡¶Æ‡ßá‡¶∂‡¶® ‡¶ì ‡¶ï‡ßá‡¶®‡¶æ
            const result = await Swal.fire({
                title: `${name} ‡¶ï‡¶ø‡¶®‡¶§‡ßá ‡¶ö‡¶æ‡¶®?`,
                html: `‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø: <b>‡ß≥${price}</b><br><br>‡¶Æ‡ßá‡¶Ø‡¶º‡¶æ‡¶¶: <b>${days} ‡¶¶‡¶ø‡¶®</b><br>‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏: ‡ß≥${currentUserData.mainBalance.toFixed(2)}<br>‡¶ï‡¶ø‡¶®‡¶≤‡ßá ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏: ‡ß≥${(currentUserData.mainBalance - price).toFixed(2)}`,
                showCancelButton: true,
                confirmButtonText: '‡¶π‡ßç‡¶Ø‡¶æ‡¶Å, ‡¶ï‡¶ø‡¶®‡ßÅ‡¶®',
                cancelButtonText: '‡¶¨‡¶æ‡¶§‡¶ø‡¶≤',
                confirmButtonColor: '#059669',
                icon: 'question'
            });
            
            if (result.isConfirmed) {
                showLoading();
                try {
                    const userRef = db.collection("users").doc(currentUserId);
                    
                    // Calculate expiry date
                    const today = new Date();
                    const expiryDate = new Date();
                    expiryDate.setDate(today.getDate() + days);
                    
                    const updateData = {
                        mainBalance: firebase.firestore.FieldValue.increment(-price),
                        plan: name,
                        totalDeposit: firebase.firestore.FieldValue.increment(price),
                        packageExpiresAt: expiryDate,
                        packageId: packageId
                    };
                    
                    await userRef.update(updateData);
                    
                    await db.collection("history").add({
                        userId: currentUserId,
                        type: `${name} ‡¶ï‡ßç‡¶∞‡¶Ø‡¶º`,
                        amount: -price,
                        status: "Success",
                        details: `${name} ‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ú ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶ï‡ßç‡¶∞‡¶Ø‡¶º ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá (‡¶Æ‡ßá‡¶Ø‡¶º‡¶æ‡¶¶: ${days} ‡¶¶‡¶ø‡¶®, ‡¶∂‡ßá‡¶∑: ${expiryDate.toLocaleDateString('bn-BD')})`,
                        date: new Date().toLocaleDateString('bn-BD'),
                        time: new Date().toLocaleTimeString('bn-BD'),
                        timestamp: firebase.firestore.FieldValue.serverTimestamp()
                    });
                    
                    const telegramMessage = `üõí *‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ú ‡¶ï‡ßç‡¶∞‡¶Ø‡¶º ‡¶∏‡¶´‡¶≤*\n\nüë§ *‡¶á‡¶â‡¶ú‡¶æ‡¶∞:* ${currentUserData.name}\nüì± *‡¶´‡ßã‡¶®:* ${currentUserData.phone}\nüì¶ *‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ú:* ${name}\nüí∞ *‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø:* ‡ß≥${price}\nüìÖ *‡¶Æ‡ßá‡¶Ø‡¶º‡¶æ‡¶¶:* ${days} ‡¶¶‡¶ø‡¶®\nüìÖ *‡¶Æ‡ßá‡¶Ø‡¶º‡¶æ‡¶¶ ‡¶∂‡ßá‡¶∑:* ${expiryDate.toLocaleDateString('bn-BD')}\n‚úÖ *‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏:* Success`;
                    await sendTelegramNotification(telegramMessage);
                    
                    showSmartToast(`${name} ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶ï‡ßç‡¶∞‡¶Ø‡¶º ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá! ‡¶Æ‡ßá‡¶Ø‡¶º‡¶æ‡¶¶: ${days} ‡¶¶‡¶ø‡¶®`, 'success');
                    hideLoading();
                    
                } catch (e) {
                    console.error("Package purchase error:", e);
                    showSmartToast('‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ú ‡¶ï‡ßç‡¶∞‡¶Ø‡¶º ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá', 'error');
                    hideLoading();
                }
            }
        };

        // ‚úÖ UPDATED DEPOSIT ADDRESS FUNCTION
        window.selectPayment = (el, method) => { 
            if(method === 'USDT') {
                // USDT is always enabled in deposit
            } else if(!paymentNumbers[method] || paymentNumbers[method] === "OFF" || paymentNumbers[method] === "") {
                showSmartToast(`${method} ‡¶≤‡ßá‡¶®‡¶¶‡ßá‡¶® ‡¶¨‡¶®‡ßç‡¶ß`, 'error');
                return;
            }
            
            document.querySelectorAll('#depositSection .grid .bg-white').forEach(d=>d.classList.remove('border-green-500','bg-green-50')); 
            el.classList.add('border-green-500','bg-green-50'); 
            selectedMethod = method;
            document.getElementById('selectedDepositMethod').value = method;
            
            updateDepositAddress(method);
        };
        
                                // ‚úÖ FIXED: DATABASE CONNECTED DEPOSIT FUNCTION (USDT + LOCAL)
        function updateDepositAddress(method) {
            const container = document.getElementById('depositAddressContainer');
            if(!container) return;

            // ‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü ‡¶≠‡ßç‡¶Ø‡¶æ‡¶≤‡ßÅ
            let address = "01XXXXXXXXX"; 
            let title = "‡¶∏‡ßá‡¶®‡ßç‡¶° ‡¶Æ‡¶æ‡¶®‡¶ø ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞";
            let icon = "ri-smartphone-line";
            let color = "blue"; 
            let badge = "‡¶Ö‡¶´‡¶ø‡¶∏‡¶ø‡ßü‡¶æ‡¶≤";
            let warning = "‡¶ü‡¶æ‡¶ï‡¶æ ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã‡¶∞ ‡¶Ü‡¶ó‡ßá ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞ ‡¶Æ‡¶ø‡¶≤‡¶ø‡ßü‡ßá ‡¶®‡¶ø‡¶®";

            // 1. USDT LOGIC (DATABASE CONNECTED)
            if (method === 'USDT') {
                // üî• ‡¶è‡¶ñ‡¶æ‡¶® ‡¶•‡ßá‡¶ï‡ßá‡¶á ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶™‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤‡ßá‡¶∞ ‡¶°‡¶æ‡¶ü‡¶æ ‡¶Ü‡¶∏‡¶¨‡ßá
                const polygonAddr = paymentNumbers.USDT_Polygon || "‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶®‡ßá‡¶á"; 
                const bscAddr = paymentNumbers.USDT_BEP20 || "‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶®‡ßá‡¶á";
                
                container.innerHTML = `
                    <div class="bg-purple-50 border border-purple-200 rounded-lg p-2.5 relative mb-2 overflow-hidden hover:shadow-sm">
                        <div class="absolute top-0 right-0 bg-purple-100 px-2 py-0.5 rounded-bl-lg text-[9px] font-bold text-purple-600">
                            Polygon (Matic)
                        </div>
                        <p class="text-[10px] text-purple-600 font-bold mb-1 flex items-center gap-1">
                            <i class="ri-global-line"></i> Wallet Address:
                        </p>
                        <div class="flex items-center justify-between gap-2">
                            <h2 class="text-[11px] font-mono font-bold text-slate-700 truncate w-48 bg-white px-1 rounded border border-purple-100">
                                ${polygonAddr}
                            </h2>
                            <button onclick="window.copyToClipboard('${polygonAddr}')" 
                                class="bg-purple-500 hover:bg-purple-600 text-white px-2 py-1 rounded-md text-[10px] font-bold active:scale-95 transition h-6 flex items-center gap-1">
                                <i class="ri-file-copy-line"></i> ‡¶ï‡¶™‡¶ø
                            </button>
                        </div>
                    </div>

                    <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-2.5 relative overflow-hidden hover:shadow-sm">
                        <div class="absolute top-0 right-0 bg-yellow-100 px-2 py-0.5 rounded-bl-lg text-[9px] font-bold text-yellow-700">
                            BSC (BEP20)
                        </div>
                        <p class="text-[10px] text-yellow-700 font-bold mb-1 flex items-center gap-1">
                            <i class="ri-bit-coin-line"></i> Wallet Address:
                        </p>
                        <div class="flex items-center justify-between gap-2">
                            <h2 class="text-[11px] font-mono font-bold text-slate-700 truncate w-48 bg-white px-1 rounded border border-yellow-100">
                                ${bscAddr}
                            </h2>
                            <button onclick="window.copyToClipboard('${bscAddr}')" 
                                class="bg-yellow-500 hover:bg-yellow-600 text-white px-2 py-1 rounded-md text-[10px] font-bold active:scale-95 transition h-6 flex items-center gap-1">
                                <i class="ri-file-copy-line"></i> ‡¶ï‡¶™‡¶ø
                            </button>
                        </div>
                    </div>
                    
                    <p class="text-[9px] text-red-400 mt-2 text-center font-bold">
                        ‚ö†Ô∏è ‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ POLYGON ‡¶¨‡¶æ BEP20 ‡¶®‡ßá‡¶ü‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶ï‡ßá ‡¶™‡¶æ‡¶†‡¶æ‡¶¨‡ßá‡¶®‡•§
                    </p>
                `;
                return; 
            }

            // 2. LOCAL METHOD LOGIC (BKASH/NAGAD)
            if (method === 'bKash') {
                address = paymentNumbers.bKash || "‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞ ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶®‡ßá‡¶á";
                color = "pink";
            } else if (method === 'Nagad') {
                address = paymentNumbers.Nagad || "‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞ ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶®‡ßá‡¶á";
                color = "orange";
            } else if (method === 'Rocket') {
                address = paymentNumbers.Rocket || "‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞ ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶®‡ßá‡¶á";
                color = "purple";
            } else if (method === 'Upay') {
                address = paymentNumbers.Upay || "‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞ ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶®‡ßá‡¶á";
                color = "blue";
            }

            // HTML GENERATION (LOCAL)
            container.innerHTML = `
                <div class="bg-${color}-50 border border-${color}-200 rounded-lg p-2.5 relative overflow-hidden transition-all hover:shadow-sm">
                    <div class="absolute top-0 right-0 bg-${color}-100 px-2 py-0.5 rounded-bl-lg text-[9px] font-bold text-${color}-600">
                        ${badge}
                    </div>
                    <p class="text-[10px] text-${color}-600 font-bold mb-1 flex items-center gap-1">
                        <i class="${icon}"></i> ${title}:
                    </p>
                    <div class="flex items-center justify-between gap-2">
                        <h2 class="text-lg font-black text-slate-700 tracking-wider font-mono leading-none">
                            ${address}
                        </h2>
                        <button onclick="window.copyToClipboard('${address}')" 
                            class="bg-${color}-500 hover:bg-${color}-600 text-white px-2.5 py-1 rounded-md text-[10px] font-bold shadow-sm active:scale-95 transition flex items-center gap-1 h-7">
                            <i class="ri-file-copy-line"></i> ‡¶ï‡¶™‡¶ø
                        </button>
                    </div>
                    <p class="text-[9px] text-slate-400 mt-1.5 flex items-center gap-1 leading-none opacity-80">
                        <i class="ri-shield-check-line text-${color}-400"></i> ${warning}
                    </p>
                </div>
            `;
        }

        // ‚úÖ AUTH FUNCTIONS
        document.getElementById('btnRegAction').addEventListener('click', async () => {
            const name = document.getElementById('regName').value, 
                  phone = document.getElementById('regPhone').value, 
                  email = document.getElementById('regEmail').value, 
                  pass = document.getElementById('regPass').value,
                  referralCode = document.getElementById('regReferralCode').value.trim();
            
            if(!name || !phone || !email || !pass) return showSmartToast('‡¶∏‡¶¨ ‡¶§‡¶•‡ßç‡¶Ø ‡¶¶‡¶ø‡¶®', 'error');
            if(pass.length < 6) return showSmartToast('‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶ï‡¶Æ‡¶™‡¶ï‡ßç‡¶∑‡ßá ‡ß¨ ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ‡¶∞ ‡¶π‡¶§‡ßá ‡¶π‡¶¨‡ßá', 'error');
            
            try {
                showLoading();
                showSmartToast('‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶§‡ßà‡¶∞‡¶ø ‡¶π‡¶ö‡ßç‡¶õ‡ßá...', 'info');
                const uc = await auth.createUserWithEmailAndPassword(email, pass);
                
                const userReferralCode = 'REF' + Math.floor(100000 + Math.random() * 900000);
                
                const userData = { 
                    name, 
                    phone, 
                    email, 
                    mainBalance: 0, 
                    rechargeBalance: 0, 
                    plan: "Free Member", 
                    createdAt: firebase.firestore.FieldValue.serverTimestamp(), 
                    totalEarnings: 0, 
                    totalDeposit: 0, 
                    totalWithdraw: 0, 
                    totalTasks: 0, 
                    totalReferrals: 0,
                    referralEarnings: 0,
                    stars: 0,
                    lastDailyBonus: null,
                    referralCode: userReferralCode,
                    referredBy: referralCode || null,
                    avatar: selectedAvatar,
                    address: '',
                    todayEarnings: 0,
                    lastQuizDate_general: null,
                    lastQuizDate_math: null,
                    lastQuizDate_science: null,
                    lastQuizDate_islamic: null
                };
                
                await db.collection("users").doc(uc.user.uid).set(userData);
                
                if(referralCode) {
                    try {
                        const referralQuery = await db.collection("users").where("referralCode", "==", referralCode).get();
                        
                        if(!referralQuery.empty) {
                            const referrerDoc = referralQuery.docs[0];
                            const referrerId = referrerDoc.id;
                            
                            const bonusAmount = systemSettings.referralBonus || 5;
                            await db.collection("users").doc(referrerId).update({
                                mainBalance: firebase.firestore.FieldValue.increment(bonusAmount),
                                totalEarnings: firebase.firestore.FieldValue.increment(bonusAmount),
                                totalReferrals: firebase.firestore.FieldValue.increment(1),
                                referralEarnings: firebase.firestore.FieldValue.increment(bonusAmount)
                            });
                            
                            await db.collection("history").add({
                                userId: referrerId,
                                type: "‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏",
                                amount: bonusAmount,
                                status: "Success",
                                details: `${name} ‡¶¶‡ßç‡¶¨‡¶æ‡¶∞‡¶æ ‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá`,
                                date: new Date().toLocaleDateString('bn-BD'),
                                time: new Date().toLocaleTimeString('bn-BD'),
                                timestamp: firebase.firestore.FieldValue.serverTimestamp()
                            });
                            
                            await db.collection("users").doc(uc.user.uid).update({
                                referredBy: referralCode
                            });
                        }
                    } catch (referralError) {
                        console.error("Referral processing error:", referralError);
                    }
                }
                
                showSmartToast('‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶§‡ßà‡¶∞‡¶ø ‡¶∏‡¶´‡¶≤! ‡¶°‡ßá‡¶á‡¶≤‡¶ø ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶®‡¶ø‡¶®', 'success');
                hideLoading();
            } catch (e) { 
                showSmartToast(e.message, 'error');
                hideLoading();
            }
        });

        document.getElementById('btnLoginAction').addEventListener('click', async () => {
            const email = document.getElementById('loginEmail').value;
            const pass = document.getElementById('loginPass').value;
            
            if(!email || !pass) return showSmartToast('‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶ì ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶¶‡¶ø‡¶®', 'error');
            
            try { 
                showLoading();
                showSmartToast('‡¶≤‡¶ó‡¶á‡¶® ‡¶π‡¶ö‡ßç‡¶õ‡ßá...', 'info'); 
                await auth.signInWithEmailAndPassword(email, pass); 
                showSmartToast('‡¶≤‡¶ó‡¶á‡¶® ‡¶∏‡¶´‡¶≤!', 'success'); 
                hideLoading();
            } catch (e) { 
                showSmartToast('‡¶≠‡ßÅ‡¶≤ ‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶¨‡¶æ ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶°', 'error'); 
                hideLoading();
            }
        });

        // ‚úÖ AUTH STATE LISTENER WITH LOGIN NOTICE
        auth.onAuthStateChanged((user) => {
            if (user) {
                currentUserId = user.uid;
                showLoading();
                setTimeout(async () => {
                    await loadSystemSettings();
                    
                    if(maintenanceMode) {
                        hideLoading();
                        return;
                    }
                    
                    document.getElementById('authScreen').classList.add('hidden'); 
                    document.getElementById('mainApp').classList.remove('hidden'); 
                    document.getElementById('bottomNav').classList.remove('hidden');
                    
                    syncUserData(user.uid); 
                    renderTasks();
                    loadSummary(user.uid);
                    checkDailyBonus(user.uid);
                    loadTodayEarnings(user.uid);
                    loadSettingsFromLocalStorage(); // Load settings
                    
                    // Show icons
                    document.getElementById('globalChatIcon').style.display = 'flex';
                    document.getElementById('twaiChatbotIcon').style.display = 'flex';
                    
                    // ‚úÖ SHOW LOGIN NOTICE AFTER SUCCESSFUL LOGIN
                    setTimeout(async () => {
                        const noticeShown = await showLoginNotice();
                        if(noticeShown) {
                            console.log("Login notice shown successfully");
                        }
                    }, 1500);
                    
                    hideLoading();
                }, 2000);
            } else {
                document.getElementById('authScreen').classList.remove('hidden'); 
                document.getElementById('mainApp').classList.add('hidden'); 
                document.getElementById('bottomNav').classList.add('hidden');
                document.getElementById('globalChatIcon').style.display = 'none';
                document.getElementById('twaiChatbotIcon').style.display = 'none';
            }
        });

                // ‚úÖ SYNC USER DATA (FIXED)
        function syncUserData(uid) {
            // ‡ßß. ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡ßá‡¶∞ ‡¶°‡¶æ‡¶ü‡¶æ ‡¶∏‡¶ø‡¶ô‡ßç‡¶ï
            db.collection("users").doc(uid).onSnapshot((d) => {
                const safe = (id, txt) => { if(document.getElementById(id)) document.getElementById(id).innerText = txt; }
                if(d.exists) {
                    currentUserData = d.data();
                             
                
                                        // üåÖ SECRET PRO TIP: DYNAMIC GREETING
                    const hour = new Date().getHours();
                    let greeting = '';
                    if (hour >= 5 && hour < 12) greeting = '‡¶∂‡ßÅ‡¶≠ ‡¶∏‡¶ï‡¶æ‡¶≤ ‚òÄÔ∏è';
                    else if (hour >= 12 && hour < 17) greeting = '‡¶∂‡ßÅ‡¶≠ ‡¶¶‡ßÅ‡¶™‡ßÅ‡¶∞ üå§Ô∏è';
                    else if (hour >= 17 && hour < 20) greeting = '‡¶∂‡ßÅ‡¶≠ ‡¶¨‡¶ø‡¶ï‡ßá‡¶≤ üå•Ô∏è';
                    else greeting = '‡¶∂‡ßÅ‡¶≠ ‡¶∞‡¶æ‡¶§‡ßç‡¶∞‡¶ø üåô';
                    
                   
// ‚úÖ ‡¶∏‡¶¨ ‡¶ß‡¶∞‡¶£‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡¶ø‡¶Æ‡¶ø‡ßü‡¶æ‡¶Æ ‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ú‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶®‡ßÄ‡¶≤ ‡¶ü‡¶ø‡¶ï ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã
const displayH3 = document.getElementById('userNameDisplay');
if (displayH3) {
    const userPlan = currentUserData.Plan || currentUserData.plan || ""; 
    
    // ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶§‡ßÅ‡¶á ‡¶§‡ßã‡¶∞ ‡¶°‡¶æ‡¶ü‡¶æ‡¶¨‡ßá‡¶ú‡ßá ‡¶•‡¶æ‡¶ï‡¶æ ‡¶∏‡¶¨ ‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ú‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶ø‡¶∏
    // ‡¶¨‡¶æ‡¶®‡¶æ‡¶®‡¶ó‡ßÅ‡¶≤‡ßã ‡¶è‡¶ï‡¶¶‡¶Æ ‡¶°‡¶æ‡¶ü‡¶æ‡¶¨‡ßá‡¶ú‡ßá‡¶∞ ‡¶Æ‡¶§‡ßã ‡¶π‡ßÅ‡¶¨‡¶π‡ßÅ ‡¶¶‡¶ø‡¶¨‡¶ø
    const premiumPlans = ["silver ‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ú", "gold ‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ú", "diamond ‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ú", "VIP ‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ú"];
    
    // ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡ßá‡¶∞ ‡¶™‡ßç‡¶≤‡ßç‡¶Ø‡¶æ‡¶® ‡¶è‡¶á ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶Ü‡¶õ‡ßá ‡¶ï‡¶ø‡¶®‡¶æ
    const isPremium = premiumPlans.includes(userPlan);
    const badgeClass = isPremium ? '' : 'hidden';
    
    displayH3.innerHTML = `
        ${greeting}, ${currentUserData.name} 
        <span id="verifiedBadge" class="${badgeClass} text-blue-400 text-sm ml-1">
            <i class="ri-checkbox-circle-fill"></i>
        </span>
    `;
}
                   safe('profNameDisplay', currentUserData.name);
                    safe('mainBalanceDisplay', currentUserData.mainBalance.toFixed(2)); 
                    safe('walletMainDisplay', currentUserData.mainBalance.toFixed(2));
                    safe('rechargePageBalance', (currentUserData.rechargeBalance||0).toFixed(2)); 
                    safe('walletRechargeDisplay', (currentUserData.rechargeBalance||0).toFixed(2));
                    safe('userPlanDisplay', currentUserData.plan || "Free Member");
                    safe('referralCount', currentUserData.totalReferrals || 0);
                    safe('referralEarnings', currentUserData.referralEarnings || 0);
                    
                    // ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
                    if(document.getElementById('profNameInput')) document.getElementById('profNameInput').value = currentUserData.name;
                    if(document.getElementById('profPhoneInput')) document.getElementById('profPhoneInput').value = currentUserData.phone;
                    if(document.getElementById('profEmailInput')) document.getElementById('profEmailInput').value = currentUserData.email;
                    if(document.getElementById('profAddressInput')) document.getElementById('profAddressInput').value = currentUserData.address || '';
                    
                    // ‡¶è‡¶≠‡¶æ‡¶ü‡¶æ‡¶∞ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
                    if(currentUserData.avatar) {
                        selectedAvatar = currentUserData.avatar;
                        document.getElementById('currentAvatar').src = selectedAvatar;
                    }
                    
                    // ‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ú ‡¶Æ‡ßá‡ßü‡¶æ‡¶¶ ‡¶ö‡ßá‡¶ï
                    if(currentUserData.packageExpiresAt && typeof currentUserData.packageExpiresAt.toDate === 'function') {
                        const expiryDate = currentUserData.packageExpiresAt.toDate();
                        const now = new Date();
                        
                        if(now > expiryDate) {
                            db.collection("users").doc(uid).update({
                                plan: "Free Member",
                                packageExpiresAt: firebase.firestore.FieldValue.delete(),
                                packageId: firebase.firestore.FieldValue.delete()
                            }).then(() => {
                                showSmartToast("‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ú‡ßá‡¶∞ ‡¶Æ‡ßá‡ßü‡¶æ‡¶¶ ‡¶∂‡ßá‡¶∑, ‡¶Ü‡¶™‡¶®‡¶ø ‡¶è‡¶ñ‡¶® ‡¶´‡ßç‡¶∞‡¶ø ‡¶Æ‡ßá‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞‡•§", "info");
                            });
                        }
                    }
                    
                    // ‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
                    if(document.getElementById('referralLink')) {
                        document.getElementById('referralLink').innerText = `https://t.me/TAKA_WALA_TG_BOT?start=ref_${uid}`;
                    }
                    
                    if(d.data().createdAt) {
                        const date = d.data().createdAt.toDate();
                        document.getElementById('joinDate').innerText = date.toLocaleDateString('bn-BD');
                    }
                } else {
                    safe('userNameDisplay', "Guest"); 
                    safe('mainBalanceDisplay', "0.00");
                }
            }, (err) => { 
                console.error("Error syncing user data:", err);
            });
            
            // ‡ß®. ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏ ‡¶ì ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶∏‡¶ø‡¶ô‡ßç‡¶ï (‡¶è‡¶ñ‡¶æ‡¶®‡ßá‡¶á ‡¶≠‡ßÅ‡¶≤‡¶ü‡¶æ ‡¶õ‡¶ø‡¶≤)
            db.collection("settings").doc("system").onSnapshot((d) => { 
                if(d.exists) {
                    systemSettings = d.data();
                    
                    // ‚úÖ ‡¶≤‡¶æ‡¶á‡¶≠ ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
                    const noticeElement = document.getElementById('noticeText');
                    if (noticeElement) {
                        noticeElement.innerHTML = systemSettings.noticeText || "‡¶ü‡¶æ‡¶ï‡¶æ‡¶ì‡ßü‡¶æ‡¶≤‡¶æ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶ï‡ßá ‡¶∏‡ßç‡¶¨‡¶æ‡¶ó‡¶§‡¶Æ! ‡¶®‡¶ø‡ßü‡¶Æ‡¶ø‡¶§ ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶®‡¶ø‡¶®‡•§";
                    }
                }
            }); // <--- ‡¶è‡¶á ‡¶¨‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ü‡¶ü‡¶æ ‡¶Æ‡¶ø‡¶∏‡¶ø‡¶Ç ‡¶õ‡¶ø‡¶≤
            
            // ‡ß©. ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞ ‡¶∏‡¶ø‡¶ô‡ßç‡¶ï
            db.collection("settings").doc("payment_numbers").onSnapshot((d) => {
                if(d.exists) {
                    paymentNumbers = d.data();
                    updatePaymentMethodStatus();
                }
            });
            
            // ‡ß™. ‡¶Æ‡ßá‡¶á‡¶®‡¶ü‡ßá‡¶®‡ßá‡¶®‡ßç‡¶∏ ‡¶Æ‡ßã‡¶° ‡¶ö‡ßá‡¶ï
            db.collection("settings").doc("maintenance").onSnapshot((d) => {
                if(d.exists) {
                    const maintenanceData = d.data();
                    if(maintenanceData.maintenanceMode === true) {
                        maintenanceMode = true;
                        showMaintenanceScreen();
                    } else {
                        maintenanceMode = false;
                        document.getElementById('maintenanceScreen').classList.add('hidden');
                    }
                }
            });
        }

        // ‚úÖ FIXED: LOAD TODAY'S EARNINGS (SOLVED FIREBASE QUERY ERROR)
        async function loadTodayEarnings(uid) {
            try {
                const today = new Date();
                const todayStart = new Date(today.getFullYear(), today.getMonth(), today.getDate());
                const todayEnd = new Date(today.getFullYear(), today.getMonth(), today.getDate() + 1);
                
                // ‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ timestamp ‡¶¶‡¶ø‡ßü‡ßá ‡¶°‡¶æ‡¶ü‡¶æ ‡¶Ü‡¶®‡¶õ‡¶ø (amount ‡¶è‡¶∞ inequality ‡¶∏‡¶∞‡¶ø‡ßü‡ßá‡¶õ‡¶ø)
                const querySnapshot = await db.collection("history")
                    .where("userId", "==", uid)
                    .where("timestamp", ">=", todayStart)
                    .where("timestamp", "<", todayEnd)
                    .get();
                
                let todayTotal = 0;
                querySnapshot.forEach(doc => {
                    const data = doc.data();
                    // ‡¶ú‡¶æ‡¶≠‡¶æ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶™‡ßç‡¶ü‡ßá amount ‡¶´‡¶ø‡¶≤‡ßç‡¶ü‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶õ‡¶ø
                    const amount = parseFloat(data.amount) || 0;
                    if (amount > 0) {
                        todayTotal += amount;
                    }
                });
                
                todayEarnings = todayTotal;
                document.getElementById('todayEarnings').textContent = todayTotal.toFixed(2);
                
                // Update today's earnings in user document
                await db.collection("users").doc(uid).update({
                    todayEarnings: todayTotal
                });
                
            } catch (error) {
                console.error("Error loading today's earnings:", error);
            }
        }

                // ‚úÖ FIXED: RENDER TASKS (ONE-TIME & DAILY LIMIT LOGIC)
        function renderTasks() {
            if(!currentUserId) return;

            const list = document.getElementById('taskListContainer'); 
            if(!list) return;

            // ‡¶≤‡ßã‡¶°‡¶ø‡¶Ç ‡¶è‡¶®‡¶ø‡¶Æ‡ßá‡¶∂‡¶®
            list.innerHTML = `
                <div class="flex flex-col items-center justify-center py-10 opacity-60">
                    <div class="w-10 h-10 border-4 border-slate-200 border-t-slate-800 rounded-full animate-spin mb-3"></div>
                    <p class="text-xs font-bold text-slate-400">‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</p>
                </div>`;

            // ‡ßß. ‡¶∏‡¶æ‡¶¨‡¶Æ‡¶ø‡¶∂‡¶® ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡¶æ (Frequency Logic)
            db.collection("task_submissions")
                .where("userId", "==", currentUserId)
                .get()
                .then((submissionSnap) => {
                    
                    const completedAll = new Set();    // ‡¶∏‡¶¨ ‡¶ï‡¶Æ‡¶™‡ßç‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï (Life time)
                    const completedToday = new Set();  // ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶ï‡¶Æ‡¶™‡ßç‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï
                    
                    // ‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ (‡¶≤‡ßã‡¶ï‡¶æ‡¶≤ ‡¶´‡¶∞‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ü)
                    const todayStr = new Date().toLocaleDateString('bn-BD');

                    submissionSnap.forEach(doc => {
                        const data = doc.data();
                        // ‡¶™‡ßá‡¶®‡ßç‡¶°‡¶ø‡¶Ç ‡¶¨‡¶æ ‡¶è‡¶™‡ßç‡¶∞‡ßÅ‡¶≠‡¶° ‡¶π‡¶≤‡ßá ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶π‡¶¨‡ßá
                        if (data.status === 'pending' || data.status === 'approved') {
                            completedAll.add(data.taskId);
                            
                            // ‡¶°‡ßá‡¶ü ‡¶ö‡ßá‡¶ï (‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶ï‡¶ø‡¶®‡¶æ)
                            if(data.date === todayStr) {
                                completedToday.add(data.taskId);
                            }
                        }
                    });

                    // ‡ß®. ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ
                    db.collection("tasks").orderBy("createdAt", "desc").onSnapshot((snap) => {
                        list.innerHTML = ''; 
                        
                        // ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡ßá‡¶∞ ‡¶™‡ßç‡¶≤‡ßç‡¶Ø‡¶æ‡¶®
                        const userPlan = currentUserData ? (currentUserData.plan || "Free Member") : "Free Member";
                        
                        // ‡¶≠‡¶ø‡¶Ü‡¶á‡¶™‡¶ø ‡¶≤‡¶ú‡¶ø‡¶ï
                        let targetType = 'free';
                        if(currentTaskType === 'vip') {
                            if(userPlan.includes('Silver') || userPlan.includes('‡¶∏‡¶ø‡¶≤‡¶≠‡¶æ‡¶∞')) targetType = 'silver';
                            else if(userPlan.includes('Gold') || userPlan.includes('‡¶ó‡ßã‡¶≤‡ßç‡¶°')) targetType = 'gold';
                            else if(userPlan.includes('Platinum') || userPlan.includes('‡¶™‡ßç‡¶≤‡¶æ‡¶ü‡¶ø‡¶®‡¶æ‡¶Æ')) targetType = 'platinum';
                            else targetType = 'no_access'; 
                        }

                        let hasTask = false;

                        if(!snap.empty) {
                            snap.forEach(doc => {
                                const t = doc.data();
                                const taskId = doc.id;
                                
                                // üî• ‡¶´‡ßç‡¶∞‡¶ø‡¶ï‡ßã‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶∏‡¶ø ‡¶≤‡¶ú‡¶ø‡¶ï (‡¶Ü‡¶∏‡¶≤ ‡¶´‡¶ø‡¶ï‡ßç‡¶∏) üî•
                                
                                // ‡ßß. ‡¶Ø‡¶¶‡¶ø 'once' ‡¶π‡ßü ‡¶è‡¶¨‡¶Ç ‡¶Ü‡¶ó‡ßá ‡¶ï‡¶ñ‡¶®‡ßã ‡¶ï‡¶∞‡¶æ ‡¶•‡¶æ‡¶ï‡ßá -> ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßá ‡¶®‡¶æ
                                if (t.frequency === 'once' && completedAll.has(taskId)) {
                                    return; 
                                }
                                
                                // ‡ß®. ‡¶Ø‡¶¶‡¶ø 'daily' ‡¶π‡ßü (‡¶¨‡¶æ ‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶®‡¶æ ‡¶•‡¶æ‡¶ï‡ßá) ‡¶è‡¶¨‡¶Ç ‡¶Ü‡¶ú ‡¶ï‡¶∞‡¶æ ‡¶•‡¶æ‡¶ï‡ßá -> ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßá ‡¶®‡¶æ
                                if ((t.frequency === 'daily' || !t.frequency) && completedToday.has(taskId)) {
                                    return;
                                }

                                let showTask = false;
                                
                                // ‡¶ü‡ßç‡¶Ø‡¶æ‡¶¨ ‡¶≤‡¶ú‡¶ø‡¶ï
                                if(currentTaskType === 'free' && (t.type === 'free' || !t.type)) {
                                    showTask = true;
                                } 
                                else if(currentTaskType === 'vip' && t.type === targetType) {
                                    showTask = true;
                                }

                                if(showTask) {
                                    hasTask = true;

                                    // ‡¶°‡¶ø‡¶ú‡¶æ‡¶á‡¶® (‡¶Ü‡¶á‡¶ï‡¶®, ‡¶ï‡¶æ‡¶≤‡¶æ‡¶∞)
                                    let iconClass = 'ri-links-line'; 
                                    let iconColor = 'text-gray-500';
                                    let bgColor = 'bg-gray-100';

                                    if (t.category === 'youtube') { iconClass = 'ri-youtube-fill'; iconColor = 'text-red-600'; bgColor = 'bg-red-50'; } 
                                    else if (t.category === 'facebook') { iconClass = 'ri-facebook-circle-fill'; iconColor = 'text-blue-600'; bgColor = 'bg-blue-50'; }
                                    else if (t.category === 'telegram') { iconClass = 'ri-telegram-fill'; iconColor = 'text-blue-500'; bgColor = 'bg-blue-50'; }
                                    else if (t.category === 'website') { iconClass = 'ri-global-line'; iconColor = 'text-green-600'; bgColor = 'bg-green-50'; }
                                    else if (t.category === 'app') { iconClass = 'ri-google-play-fill'; iconColor = 'text-green-600'; bgColor = 'bg-green-100'; }

                                    // ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ú
                                    let frequencyBadge = '';
                                    if(t.frequency === 'once') {
                                        frequencyBadge = '<span class="text-[9px] bg-purple-100 text-purple-600 px-2 py-0.5 rounded-full ml-1 border border-purple-200">‡ßß ‡¶¨‡¶æ‡¶∞</span>';
                                    } else {
                                        frequencyBadge = '<span class="text-[9px] bg-blue-100 text-blue-600 px-2 py-0.5 rounded-full ml-1 border border-blue-200">‡¶°‡ßá‡¶á‡¶≤‡¶ø</span>';
                                    }

                                    list.innerHTML += `
                                    <div class="glass-card p-4 rounded-2xl flex justify-between items-center animate__animated animate__fadeInUp mb-3 border border-slate-100 shadow-sm group active:scale-[0.98] transition-all">
                                        <div class="flex items-center gap-4">
                                            <div class="w-12 h-12 ${bgColor} rounded-full flex items-center justify-center text-2xl ${iconColor}">
                                                <i class="${iconClass}"></i>
                                            </div>
                                            <div>
                                                <h4 class="font-bold text-slate-800 text-sm flex items-center">
                                                    ${t.title} ${frequencyBadge}
                                                </h4>
                                                <div class="flex items-center gap-2 mt-1">
                                                    <span class="text-[10px] font-bold bg-slate-100 text-slate-500 px-2 py-0.5 rounded uppercase tracking-wide">${t.category || 'General'}</span>
                                                    <p class="text-[10px] text-slate-400 truncate max-w-[120px] font-bold">‡ß≥${t.reward}</p>
                                                </div>
                                            </div>
                                        </div>
                                        <button onclick="window.completeTask('${taskId}', ${t.reward}, '${t.category || 'general'}', '${t.title}', '${t.desc}', '${t.link || '#'}')" class="bg-slate-800 text-white px-4 py-2 rounded-xl text-xs font-bold shadow-lg shadow-slate-200 group-hover:bg-green-600 transition-colors">
                                            ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡ßÅ‡¶®
                                        </button>
                                    </div>`;
                                }
                            });
                        }

                        if(!hasTask) {
                            if(currentTaskType === 'vip' && targetType === 'no_access') {
                                list.innerHTML = `
                                    <div class="text-center py-10 animate__animated animate__fadeIn">
                                        <img src="https://i.postimg.cc/TwfTZM7Z/award.png" class="w-20 mx-auto mb-4 opacity-50 grayscale">
                                        <h3 class="text-lg font-bold text-slate-600">‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶≠‡¶ø‡¶Ü‡¶á‡¶™‡¶ø ‡¶Æ‡ßá‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞‡¶¶‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø</h3>
                                        <p class="text-xs text-slate-500 mb-4 px-6">‡¶≠‡¶ø‡¶Ü‡¶á‡¶™‡¶ø ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶™‡ßá‡¶§‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶ï‡ßá ‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ú ‡¶ï‡¶ø‡¶®‡¶§‡ßá ‡¶π‡¶¨‡ßá‡•§</p>
                                        <button onclick="window.showPage('vipScreen')" class="bg-premium text-white px-6 py-3 rounded-xl font-bold shadow-lg animate-pulse">
                                            ‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ú ‡¶ï‡¶ø‡¶®‡ßÅ‡¶® üëë
                                        </button>
                                    </div>`;
                            } else {
                                list.innerHTML = `
                                    <div class="text-center py-12 opacity-60">
                                        <div class="w-16 h-16 bg-slate-50 rounded-full flex items-center justify-center mx-auto mb-3">
                                            <i class="ri-check-double-line text-3xl text-green-500"></i>
                                        </div>
                                        <p class="font-bold text-slate-400">‡¶∏‡¶¨ ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶∂‡ßá‡¶∑! ‡¶Ü‡¶ó‡¶æ‡¶Æ‡ßÄ‡¶ï‡¶æ‡¶≤ ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶Ü‡¶∏‡ßÅ‡¶®</p>
                                    </div>`;
                            }
                        }
                    });
                });
        }

        // ‚úÖ ENHANCED HISTORY SYSTEM WITH FILTER - FIXED LAYOUT
        window.loadHistory = () => {
            window.showPage('historyScreen');
            document.getElementById('historyListContainer').innerHTML = `
                <div class="history-loading">
                    <div class="animate-pulse">
                        <div class="h-4 bg-slate-200 rounded w-3/4 mx-auto mb-4"></div>
                        <div class="h-20 bg-slate-100 rounded-lg mb-3"></div>
                        <div class="h-20 bg-slate-100 rounded-lg mb-3"></div>
                        <div class="h-20 bg-slate-100 rounded-lg"></div>
                    </div>
                </div>
            `;
            
            loadSimpleHistory('all');
        };
        
        window.filterHistory = (filterType) => {
            currentHistoryFilter = filterType;
            
            // Update active filter button
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById(`filter${filterType.charAt(0).toUpperCase() + filterType.slice(1)}`).classList.add('active');
            
            loadSimpleHistory(filterType);
        };
        
        // ‚úÖ FINAL FIXED: HISTORY LOAD FUNCTION (CENTERED EMPTY + ANIMATED STATUS)
        async function loadSimpleHistory(filterType = 'all') {
            showLoading();
            
            try {
                let query = db.collection("history")
                    .where("userId", "==", currentUserId)
                    .orderBy("timestamp", "desc")
                    .limit(50);
                
                // ‡¶´‡¶ø‡¶≤‡ßç‡¶ü‡¶æ‡¶∞ ‡¶≤‡¶ú‡¶ø‡¶ï
                if(filterType !== 'all') {
                    let typeArray = [];
                    switch(filterType) {
                        case 'deposit': typeArray = ['‡¶°‡¶ø‡¶™‡ßã‡¶ú‡¶ø‡¶ü', 'Deposit']; break;
                        case 'withdraw': typeArray = ['‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶®', 'Withdraw']; break;
                        case 'recharge': typeArray = ['‡¶∞‡¶ø‡¶ö‡¶æ‡¶∞‡ßç‡¶ú', 'Recharge']; break;
                        case 'task': typeArray = ['‡¶ü‡¶æ‡¶∏‡ßç‡¶ï', 'Task', '‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶®']; break;
                        case 'bonus': typeArray = ['‡¶¨‡ßã‡¶®‡¶æ‡¶∏', 'Bonus', '‡¶°‡ßá‡¶á‡¶≤‡¶ø ‡¶¨‡ßã‡¶®‡¶æ‡¶∏', '‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏']; break;
                        case 'quiz': typeArray = ['‡¶ï‡ßÅ‡¶á‡¶ú', 'Quiz']; break;
                    }
                    if(typeArray.length > 0) query = query.where("type", "in", typeArray);
                }
                
                const querySnapshot = await query.get();
                const list = document.getElementById('historyListContainer'); 
                if(!list) return; 
                
                list.innerHTML = '';
                
                // 1Ô∏è‚É£ EMPTY STATE (‡¶Æ‡¶æ‡¶ù‡¶ñ‡¶æ‡¶®‡ßá ‡¶∏‡ßÅ‡¶®‡ßç‡¶¶‡¶∞ ‡¶ï‡¶∞‡ßá ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßá)
                if(querySnapshot.empty) { 
                    list.innerHTML = `
                    <div class="flex flex-col items-center justify-center w-full py-16 text-center animate__animated animate__fadeIn">
                        <div class="w-20 h-20 bg-slate-50 rounded-full flex items-center justify-center mb-4 shadow-sm border border-slate-100">
                            <img src="https://i.postimg.cc/VNTvSLRX/transaction-history.png" class="w-10 h-10 opacity-30 grayscale">
                        </div>
                        <h3 class="text-lg font-bold text-slate-500">‡¶ï‡ßã‡¶®‡ßã ‡¶≤‡ßá‡¶®‡¶¶‡ßá‡¶® ‡¶®‡ßá‡¶á</h3>
                        <p class="text-xs text-slate-400 mt-1 max-w-[200px]">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶≤‡ßá‡¶®‡¶¶‡ßá‡¶® ‡¶π‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶∏‡ßÅ‡¶®‡ßç‡¶¶‡¶∞‡¶≠‡¶æ‡¶¨‡ßá ‡¶∏‡¶æ‡¶ú‡¶æ‡¶®‡ßã ‡¶•‡¶æ‡¶ï‡¶¨‡ßá</p>
                    </div>`; 
                    hideLoading();
                    return; 
                }
                
                querySnapshot.forEach(doc => {
                    const h = doc.data(); 
                    const date = h.date || '---';
                    const time = h.time || '---';
                    
                    // ‡¶Ü‡¶á‡¶ï‡¶® ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡¶∂‡¶®
                    let icon = 'https://i.postimg.cc/VNTvSLRX/transaction-history.png';
                    let bgColor = 'bg-slate-100';
                    
                    if(h.type.includes('Recharge') || h.type.includes('‡¶∞‡¶ø‡¶ö‡¶æ‡¶∞‡ßç‡¶ú')) { icon = 'https://i.postimg.cc/jjdpNH5b/payment-method.png'; bgColor = 'bg-blue-50'; } 
                    else if(h.type.includes('Withdraw') || h.type.includes('‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶®')) { icon = 'https://i.postimg.cc/wMdF5zV5/withdraw.png'; bgColor = 'bg-red-50'; } 
                    else if(h.type.includes('Deposit') || h.type.includes('‡¶°‡¶ø‡¶™‡ßã‡¶ú‡¶ø‡¶ü')) { icon = 'https://i.postimg.cc/7ZGpHH5q/save-money.png'; bgColor = 'bg-green-50'; } 
                    else if(h.type.includes('Task') || h.type.includes('‡¶ü‡¶æ‡¶∏‡ßç‡¶ï')) { icon = 'https://i.postimg.cc/d1sXyCb6/clipboard.png'; bgColor = 'bg-purple-50'; } 
                    else if(h.type.includes('Bonus') || h.type.includes('‡¶¨‡ßã‡¶®‡¶æ‡¶∏')) { icon = 'https://i.postimg.cc/qqLQKVHV/bonus.png'; bgColor = 'bg-yellow-50'; }
                    else if(h.type.includes('Quiz') || h.type.includes('‡¶ï‡ßÅ‡¶á‡¶ú')) { icon = 'https://i.postimg.cc/mkNFY0L0/solution.png'; bgColor = 'bg-pink-50'; }

                    const amount = parseFloat(h.amount) || 0;
                    const amountColor = amount > 0 ? 'text-green-600' : 'text-red-500';
                    const amountSign = amount > 0 ? '+' : '';

                    // 2Ô∏è‚É£ STATUS BADGE (‡¶è‡¶®‡¶ø‡¶Æ‡ßá‡¶∂‡¶® ‡¶∏‡¶π)
                    let statusBadge = '';
                    if(h.status === 'Pending') {
                        // ‡¶™‡ßá‡¶®‡ßç‡¶°‡¶ø‡¶Ç ‡¶π‡¶≤‡ßá ‡¶ò‡ßÅ‡¶∞‡¶¨‡ßá (Spinning Icon)
                        statusBadge = `
                        <div class="flex items-center gap-1.5 bg-yellow-50 text-yellow-700 px-2.5 py-1 rounded-full border border-yellow-200">
                            <i class="ri-loader-4-line animate-spin text-sm"></i>
                            <span class="text-[10px] font-bold">‡¶™‡ßç‡¶∞‡¶∏‡ßá‡¶∏‡¶ø‡¶Ç</span>
                        </div>`;
                    } else if(h.status === 'Success') {
                        statusBadge = `
                        <div class="flex items-center gap-1.5 bg-green-50 text-green-700 px-2.5 py-1 rounded-full border border-green-200">
                            <i class="ri-checkbox-circle-fill text-sm"></i>
                            <span class="text-[10px] font-bold">‡¶∏‡¶´‡¶≤</span>
                        </div>`;
                    } else if(h.status === 'Rejected') {
                        statusBadge = `
                        <div class="flex items-center gap-1.5 bg-red-50 text-red-700 px-2.5 py-1 rounded-full border border-red-200">
                            <i class="ri-close-circle-fill text-sm"></i>
                            <span class="text-[10px] font-bold">‡¶¨‡¶æ‡¶§‡¶ø‡¶≤</span>
                        </div>`;
                    }

                    // HTML STRUCTURE
                    list.innerHTML += `
                    <div class="history-item glass-card p-4 rounded-2xl mb-3 border border-slate-50 hover:shadow-md transition-all">
                        <div class="flex justify-between items-start mb-3">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 ${bgColor} rounded-full flex items-center justify-center">
                                    <img src="${icon}" class="w-5 h-5">
                                </div>
                                <div>
                                    <h4 class="font-bold text-slate-700 text-sm">${h.type}</h4>
                                    <p class="text-[10px] text-slate-400 font-medium">${date} ‚Ä¢ ${time}</p>
                                </div>
                            </div>
                            <div class="text-right">
                                <span class="block text-sm font-black ${amountColor}">${amountSign}‡ß≥${Math.abs(amount).toFixed(2)}</span>
                            </div>
                        </div>
                        
                        <div class="flex justify-between items-center pt-2 border-t border-dashed border-slate-100">
                            ${statusBadge}
                            
                            <button onclick="window.openHistoryReceipt('${doc.id}')" 
                                class="flex items-center gap-1 text-slate-500 hover:text-blue-600 transition-colors">
                                <span class="text-[10px] font-bold">‡¶∞‡¶ø‡¶∏‡¶ø‡¶ü</span>
                                <i class="ri-arrow-right-s-line"></i>
                            </button>
                        </div>
                    </div>`;
                });
                hideLoading();
            } catch (error) {
                console.error("Error loading history:", error);
                document.getElementById('historyListContainer').innerHTML = `
                <div class="flex flex-col items-center justify-center py-10 text-center">
                    <p class="text-red-400 font-bold text-sm">‡¶π‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá</p>
                    <button onclick="window.loadHistory()" class="mt-3 bg-slate-100 text-slate-700 px-4 py-2 rounded-lg text-xs font-bold">‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
                </div>`;
                hideLoading();
            }
        }

                       // ‚úÖ OPEN PROFESSIONAL RECEIPT (SMART ICONS & LOGIC ADDED)
async function openHistoryReceipt(docId) {
    showLoading();
    try {
        const doc = await db.collection("history").doc(docId).get();
        if (!doc.exists) {
            showSmartToast("‡¶§‡¶•‡ßç‡¶Ø ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡ßü‡¶®‡¶ø", "error");
            hideLoading();
            return;
        }

        const data = doc.data();
        
        // üé® ‡ßß. ‡¶ï‡¶æ‡¶≤‡¶æ‡¶∞ ‡¶≤‡¶ú‡¶ø‡¶ï
        let statusColor = "text-yellow-600";
        let statusBg = "bg-yellow-50";
        
        if (data.status === "Success") {
            statusColor = "text-green-600";
            statusBg = "bg-green-50";
        } else if (data.status === "Rejected") {
            statusColor = "text-red-600";
            statusBg = "bg-red-50";
        }

        // üñºÔ∏è ‡ß®. ‡¶∏‡ßç‡¶Æ‡¶æ‡¶∞‡ßç‡¶ü ‡¶Ü‡¶á‡¶ï‡¶® ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü‡¶∞ (Fixed URLs)
        const getMethodIcon = (methodName, typeName) => {
            const m = (methodName || "").toLowerCase();
            const t = (typeName || "").toLowerCase();

            // ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶Æ‡ßá‡¶•‡¶° (Deposit/Withdraw) - FIXED ICONS
            if (m.includes('bkash') || t.includes('bkash')) return 'https://i.postimg.cc/C5vDR4nz/1656235223bkash-logo.png';
            if (m.includes('nagad') || t.includes('nagad')) return 'https://i.postimg.cc/k4phWWbK/1679248787Nagad-Logo.png';
            if (m.includes('rocket') || t.includes('rocket')) return 'https://i.postimg.cc/xTbBypgf/vecteezy-rocket-color-logo-mobile-banking-icon-68706013.png';
            if (m.includes('usdt') || t.includes('usdt') || t.includes('binance')) return 'https://i.postimg.cc/0QRCvZDV/usdt.png';
            if (m.includes('upay')) return 'https://i.postimg.cc/C5vDR4nz/1656235223bkash-logo.png'; // Temporary

            // ‡¶∏‡¶ø‡¶Æ ‡¶Ö‡¶™‡¶æ‡¶∞‡ßá‡¶ü‡¶∞ (Recharge/Drive) - FIXED ICONS
            if (m.includes('gp') || m.includes('grameen') || t.includes('gp')) return 'https://i.postimg.cc/65w1n62J/FB-IMG-1769495932877.jpg';
            if (m.includes('robi') || t.includes('robi')) return 'https://i.postimg.cc/RFHbQNLZ/FB-IMG-1769495977203.jpg';
            if (m.includes('bl') || m.includes('banglalink') || t.includes('bl')) return 'https://i.postimg.cc/gJ8NL1Gx/FB-IMG-1769495999103.jpg';
            if (m.includes('airtel') || t.includes('airtel')) return 'https://i.postimg.cc/Wz0CjhdX/FB-IMG-1769496019329.jpg';
            if (m.includes('teletalk') || t.includes('teletalk')) return 'https://i.postimg.cc/TYCQbVvT/FB-IMG-1769496047333.jpg';

            // ‡¶ï‡¶æ‡¶ú‡ßá‡¶∞ ‡¶ß‡¶∞‡¶® (Task/Bonus/Spin/Referral) - FIXED ICONS
            if (t.includes('task') || m.includes('task')) return 'https://i.postimg.cc/d1sXyCb6/clipboard.png';
            if (t.includes('spin') || m.includes('spin')) return 'https://i.postimg.cc/02p5C1GN/fortune-wheel.png';
            if (t.includes('bonus') || t.includes('‡¶°‡ßá‡¶á‡¶≤‡¶ø') || t.includes('daily')) return 'https://i.postimg.cc/qqLQKVHV/bonus.png';
            if (t.includes('refer') || t.includes('‡¶∞‡ßá‡¶´‡¶æ‡¶∞')) return 'https://i.postimg.cc/c4xbp54V/add-friend.png';
            if (t.includes('quiz') || t.includes('‡¶ï‡ßÅ‡¶á‡¶ú')) return 'https://i.postimg.cc/mkNFY0L0/solution.png';
            if (t.includes('package') || t.includes('‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ú') || t.includes('vip')) return 'https://i.postimg.cc/TwfTZM7Z/award.png';
            if (t.includes('transfer') || t.includes('‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡ßç‡¶∏‡¶´‡¶æ‡¶∞')) return 'https://i.postimg.cc/7ZGpHH5q/save-money.png';
            if (t.includes('deposit') || t.includes('‡¶°‡¶ø‡¶™‡ßã‡¶ú‡¶ø‡¶ü')) return 'https://i.postimg.cc/7ZGpHH5q/save-money.png';
            if (t.includes('withdraw') || t.includes('‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶®')) return 'https://i.postimg.cc/wMdF5zV5/withdraw.png';
            if (t.includes('recharge') || t.includes('‡¶∞‡¶ø‡¶ö‡¶æ‡¶∞‡ßç‡¶ú')) return 'https://i.postimg.cc/jjdpNH5b/payment-method.png';

            // ‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü ‡¶≤‡ßã‡¶ó‡ßã
            return 'https://i.postimg.cc/GpZMXGKR/1769418328212-removebg-preview.png';
        };

        const method = data.method || data.paymentMethod || data.operator || "N/A";
        const type = data.type || "Transaction";
        const sender = data.phone || data.accountNumber || data.trxId || "N/A";
        const fullDate = `${data.date} | ${data.time}`;
        const trxID = doc.id.substring(0, 12).toUpperCase() + "...";
        
        // ‡¶Ü‡¶á‡¶ï‡¶® ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ
        const headerIcon = getMethodIcon(method, type);

        hideLoading();

        // üî• SWEETALERT HTML STRUCTURE
        Swal.fire({
            html: `
                <style>
                    div:where(.swal2-container) div:where(.swal2-popup).receipt-popup-wide {
                        width: 95% !important;
                        max-width: 450px !important;
                        padding: 0 !important;
                        border-radius: 20px !important;
                        overflow: hidden;
                    }
                    .receipt-row { 
                        padding: 10px 0; 
                        border-bottom: 1px dashed #e2e8f0; 
                        display: flex;
                        justify-content: space-between;
                        align-items: center;
                    }
                    .receipt-label { 
                        color: #64748b; 
                        font-size: 12px; 
                        font-weight: 700; 
                        text-transform: uppercase; 
                        min-width: 120px;
                    }
                    .receipt-val { 
                        color: #1e293b; 
                        font-size: 13px; 
                        font-weight: 700; 
                        text-align: right;
                        max-width: 200px;
                        word-break: break-word;
                    }
                    .receipt-icon {
                        width: 20px;
                        height: 20px;
                        object-fit: contain;
                        border-radius: 4px;
                    }
                </style>

                <div class="bg-white overflow-hidden relative">
                    <!-- Header Zigzag Design -->
                    <div class="absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-green-500 via-blue-500 to-purple-500 opacity-30"></div>

                    <!-- Header Section -->
                    <div class="p-6 pb-2 text-center relative mt-2">
                        <div class="w-16 h-16 mx-auto mb-2 bg-white rounded-full p-2 shadow-lg border-2 border-slate-100 flex items-center justify-center">
                            <img src="${headerIcon}" 
                                 class="w-full h-full object-contain p-1" 
                                 onerror="this.onerror=null; this.src='https://i.postimg.cc/GpZMXGKR/1769418328212-removebg-preview.png'">
                        </div>
                        <h2 class="text-2xl font-black text-slate-800 tracking-wider">TAKAWALA</h2>
                        <p class="text-[10px] text-slate-400 uppercase tracking-[0.3em] mb-4">Official Transaction Receipt</p>
                        
                        <!-- Amount Box -->
                        <div class="bg-gradient-to-r from-slate-50 to-slate-100 rounded-xl p-4 border border-slate-200 mb-2 shadow-sm">
                            <p class="text-[10px] text-slate-500 font-bold uppercase tracking-widest">Total Amount</p>
                            <h1 class="text-3xl font-black text-slate-800 mt-1">‡ß≥${parseFloat(data.amount || 0).toFixed(2)}</h1>
                            <div class="inline-block mt-2 px-4 py-1 rounded-full text-[10px] font-bold ${statusBg} ${statusColor} border border-opacity-20 uppercase tracking-widest">
                                ${data.status || "Pending"}
                            </div>
                        </div>
                    </div>

                    <!-- Details Section -->
                    <div class="px-6 pb-6 text-left space-y-1">
                        <!-- Transaction ID -->
                        <div class="receipt-row">
                            <span class="receipt-label">Transaction ID</span>
                            <div class="flex items-center gap-2">
                                <span class="receipt-val font-mono tracking-wider">${trxID}</span>
                                <button onclick="copyToClipboard('${doc.id}')" class="text-slate-400 hover:text-blue-600 transition">
                                    <i class="ri-file-copy-line text-sm"></i>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Date & Time -->
                        <div class="receipt-row">
                            <span class="receipt-label">Date & Time</span>
                            <span class="receipt-val">${fullDate}</span>
                        </div>
                        
                        <!-- Type -->
                        <div class="receipt-row">
                            <span class="receipt-label">Type</span>
                            <span class="receipt-val uppercase text-blue-600 font-bold">${type}</span>
                        </div>
                        
                        <!-- Method with Icon -->
                        <div class="receipt-row">
                            <span class="receipt-label">Method</span>
                            <div class="flex items-center gap-2">
                                <img src="${headerIcon}" 
                                     class="receipt-icon" 
                                     onerror="this.onerror=null; this.src='https://i.postimg.cc/GpZMXGKR/1769418328212-removebg-preview.png'">
                                <span class="receipt-val uppercase font-bold">${method}</span>
                            </div>
                        </div>
                        
                        <!-- Account/Reference -->
                        <div class="receipt-row border-none">
                            <span class="receipt-label">Account / Ref</span>
                            <span class="receipt-val font-mono text-sm">${sender}</span>
                        </div>
                        
                        <!-- Details (if available) -->
                        ${data.details ? `
                        <div class="receipt-row border-none mt-2">
                            <span class="receipt-label">Details</span>
                            <span class="receipt-val text-sm text-slate-600">${data.details}</span>
                        </div>
                        ` : ''}
                    </div>

                    <!-- Footer Section -->
                    <div class="bg-gradient-to-r from-slate-900 to-slate-800 text-white p-5 mx-0 mb-0 relative overflow-hidden text-center">
                        <div class="relative z-10">
                            <p class="text-[9px] opacity-70 font-mono mb-1 uppercase tracking-wider">SYSTEM GENERATED RECEIPT</p>
                            <p class="text-xs font-black tracking-[0.15em] uppercase text-yellow-300">TAKAWALA OFFICIAL</p>
                            
                            <!-- Security Pattern -->
                            <div class="h-5 w-24 bg-white/10 mx-auto mt-2 rounded flex items-center justify-center gap-1 opacity-60">
                                <div class="w-1 h-3 bg-white rounded"></div>
                                <div class="w-2 h-3 bg-white rounded"></div>
                                <div class="w-1 h-3 bg-white rounded"></div>
                                <div class="w-2 h-3 bg-white rounded"></div>
                            </div>
                        </div>
                        
                        <!-- Background Effects -->
                        <div class="absolute -top-6 -right-6 w-24 h-24 bg-blue-500/20 rounded-full blur-2xl"></div>
                        <div class="absolute -bottom-6 -left-6 w-24 h-24 bg-purple-500/20 rounded-full blur-2xl"></div>
                    </div>
                </div>
            `,
            showConfirmButton: true,
            confirmButtonText: '<i class="ri-download-2-line mr-1"></i> ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶°',
            confirmButtonColor: '#1e293b',
            showCloseButton: true,
            background: 'transparent',
            customClass: {
                popup: 'receipt-popup-wide'
            },
            didOpen: () => {
                const popup = Swal.getPopup();
                popup.style.padding = '0';
            }
        }).then((result) => {
            if (result.isConfirmed) {
                showSmartToast('‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®‡¶∂‡¶ü ‡¶®‡¶ø‡ßü‡ßá ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡ßá ‡¶∞‡¶æ‡¶ñ‡ßÅ‡¶® ‚úÖ', 'success');
            }
        });

    } catch (error) {
        console.error(error);
        showSmartToast("‡¶∞‡¶ø‡¶∏‡¶ø‡¶ü ‡¶ì‡¶™‡ßá‡¶® ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶ö‡ßç‡¶õ‡ßá ‡¶®‡¶æ", "error");
        hideLoading();
    }
}
// ‚úÖ HELPER: COPY FUNCTION
function copyToClipboard(text) {
    navigator.clipboard.writeText(text).then(() => {
        const Toast = Swal.mixin({
            toast: true,
            position: 'top-end',
            showConfirmButton: false,
            timer: 1500,
            timerProgressBar: true
        });
        Toast.fire({
            icon: 'success',
            title: '‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá!'
        });
    }).catch(err => {
        console.error('Copy failed', err);
    });
}

        // ‚úÖ LOAD QUIZ FROM FIREBASE (DYNAMIC)
        window.showQuizQuestions = async (type) => {
            // ‡ßß. ‡¶°‡ßá‡¶á‡¶≤‡¶ø ‡¶≤‡¶ø‡¶Æ‡¶ø‡¶ü ‡¶ö‡ßá‡¶ï
            if(currentUserData) {
                const today = new Date().toDateString();
                const lastQuizDateField = `lastQuizDate_${type}`;
                const lastQuizDate = currentUserData[lastQuizDateField] ? 
                    new Date(currentUserData[lastQuizDateField].toDate()).toDateString() : null;
                
                if(lastQuizDate === today) {
                    showSmartToast(`‡¶Ü‡¶™‡¶®‡¶ø ‡¶Ü‡¶ú ${type} ‡¶ï‡ßÅ‡¶á‡¶ú ‡¶á‡¶§‡¶ø‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶ñ‡ßá‡¶≤‡ßá‡¶õ‡ßá‡¶®‡•§ ‡¶Ü‡¶ó‡¶æ‡¶Æ‡ßÄ‡¶ï‡¶æ‡¶≤ ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§`, 'error');
                    return;
                }
            }
            
            currentQuizType = type;
            selectedAnswers = {};
            currentLoadedQuizzes = []; // ‡¶Ü‡¶ó‡ßá‡¶∞ ‡¶°‡¶æ‡¶ü‡¶æ ‡¶ï‡ßç‡¶≤‡¶ø‡ßü‡¶æ‡¶∞
            
            // ‡¶ü‡¶æ‡¶á‡¶ü‡ßá‡¶≤ ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ
            const quizTitles = {
                general: '‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£ ‡¶ï‡ßÅ‡¶á‡¶ú',
                math: '‡¶Æ‡ßç‡¶Ø‡¶æ‡¶• ‡¶ï‡ßÅ‡¶á‡¶ú',
                science: '‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶® ‡¶ï‡ßÅ‡¶á‡¶ú',
                islamic: '‡¶á‡¶∏‡¶≤‡¶æ‡¶Æ‡¶ø‡¶ï ‡¶ï‡ßÅ‡¶á‡¶ú'
            };
            document.getElementById('quizTypeTitle').textContent = quizTitles[type] || '‡¶ï‡ßÅ‡¶á‡¶ú';
            
            // ‡¶≤‡ßã‡¶°‡¶ø‡¶Ç ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã
            const container = document.getElementById('quizQuestionsContainer');
            container.innerHTML = '<div class="text-center py-10"><div class="w-10 h-10 border-4 border-purple-500 border-t-transparent rounded-full animate-spin mx-auto"></div><p class="mt-2 text-slate-400 text-xs">‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</p></div>';
            document.getElementById('submitQuizBtn').classList.add('hidden');
            
            window.switchQuizTab('questions');

            try {
                // ‡ß®. ‡¶´‡¶æ‡¶Ø‡¶º‡¶æ‡¶∞‡¶¨‡ßá‡¶∏ ‡¶•‡ßá‡¶ï‡ßá ‡¶ï‡ßÅ‡¶á‡¶ú ‡¶Ü‡¶®‡¶æ
                const snapshot = await db.collection("quizzes").where("category", "==", type).get();

                if (snapshot.empty) {
                    container.innerHTML = `
                        <div class="text-center py-10 opacity-60">
                            <i class="ri-file-list-3-line text-4xl text-slate-300"></i>
                            <p class="text-slate-500 mt-2 font-bold">‡¶è‡¶á ‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶ó‡¶∞‡¶ø‡¶§‡ßá ‡¶ï‡ßã‡¶®‡ßã ‡¶ï‡ßÅ‡¶á‡¶ú ‡¶®‡ßá‡¶á</p>
                            <button onclick="window.switchQuizTab('types')" class="mt-4 bg-slate-100 text-slate-700 px-4 py-2 rounded-lg font-bold text-xs">‡¶´‡¶ø‡¶∞‡ßá ‡¶Ø‡¶æ‡¶®</button>
                        </div>`;
                    return;
                }

                // ‡ß©. ‡¶°‡¶æ‡¶ü‡¶æ ‡¶™‡ßç‡¶∞‡¶∏‡ßá‡¶∏ ‡¶ï‡¶∞‡¶æ
                snapshot.forEach(doc => {
                    currentLoadedQuizzes.push({ id: doc.id, ...doc.data() });
                });

                // ‡ß™. ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶∞‡ßá‡¶®‡ßç‡¶°‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ
                let questionsHtml = '';
                currentLoadedQuizzes.forEach((q, qIndex) => {
                    let optionsHtml = '';
                    q.options.forEach((option, oIndex) => {
                        optionsHtml += `
                            <div class="flex items-center p-3 bg-white rounded-xl border border-slate-200 cursor-pointer hover:border-purple-500 hover:bg-purple-50 transition mb-2" onclick="window.selectQuizAnswer(${qIndex}, ${oIndex})">
                                <input type="radio" name="quizQuestion${qIndex}" id="q${qIndex}o${oIndex}" class="mr-3 accent-purple-600 w-4 h-4">
                                <label for="q${qIndex}o${oIndex}" class="flex-1 cursor-pointer font-medium text-slate-700 text-sm">${option}</label>
                            </div>
                        `;
                    });
                    
                    questionsHtml += `
                        <div class="mb-6 p-4 bg-slate-50 rounded-2xl border border-slate-100 shadow-sm">
                            <h4 class="font-bold text-slate-800 mb-3 text-sm flex items-start gap-2">
                                <span class="bg-white text-purple-600 px-2 py-0.5 rounded shadow-sm text-xs border border-purple-100">Q${qIndex + 1}</span> 
                                ${q.question}
                            </h4>
                            <div class="space-y-2">
                                ${optionsHtml}
                            </div>
                        </div>
                    `;
                });
                
                container.innerHTML = questionsHtml;
                document.getElementById('submitQuizBtn').classList.remove('hidden');
                
                startQuizTimer();

            } catch (error) {
                console.error("Quiz Load Error:", error);
                container.innerHTML = '<div class="text-center text-red-500 py-10 font-bold">‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§ ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</div>';
            }
        };

        // ‚úÖ DYNAMIC QUIZ SUBMIT
        window.submitQuiz = async () => {
            const totalQuestions = currentLoadedQuizzes.length;
            const answeredCount = Object.keys(selectedAnswers).length;
            
            // ‡¶∏‡¶¨ ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶®‡¶æ ‡¶¶‡¶ø‡¶≤‡ßá ‡¶Ü‡¶ü‡¶ï‡¶æ‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßã, ‡¶Ö‡¶•‡¶¨‡¶æ ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶®‡¶ø‡¶Ç ‡¶¶‡¶ø‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßã
            if(answeredCount < totalQuestions) { 
                showSmartToast('‡¶∏‡¶¨ ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®‡ßá‡¶∞ ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶¶‡¶ø‡¶®', 'error'); 
                return; 
            }
            
            // ‡ßß. ‡¶∏‡¶†‡¶ø‡¶ï ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶ó‡¶£‡¶®‡¶æ
            let correctAnswers = 0;
            currentLoadedQuizzes.forEach((q, index) => {
                // Database-‡¶è answer ‡¶π‡¶≤‡ßã index (0, 1, 2, 3)
                if(selectedAnswers[index] === q.answer) {
                    correctAnswers++;
                }
            });
            
            const reward = correctAnswers * 0.25; // ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶∏‡¶†‡¶ø‡¶ï ‡¶â‡¶§‡ßç‡¶§‡¶∞‡ßá ‡ß¶.‡ß®‡ß´ ‡¶ü‡¶æ‡¶ï‡¶æ
            
            if(reward === 0) { 
                showSmartToast('‡¶¶‡ßÅ‡¶É‡¶ñ‡¶ø‡¶§! ‡¶è‡¶ï‡¶ü‡¶ø ‡¶â‡¶§‡ßç‡¶§‡¶∞‡¶ì ‡¶∏‡¶†‡¶ø‡¶ï ‡¶π‡ßü‡¶®‡¶ø üòî', 'error'); 
                return; 
            }

            // ‡ß®. ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶¶‡ßá‡¶ì‡ßü‡¶æ (‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶¶‡ßá‡¶ñ‡¶æ‡¶∞ ‡¶™‡¶∞)
            onAdCompleted = async () => {
                showLoading();
                try {
                    const userRef = db.collection("users").doc(currentUserId);
                    await userRef.update({
                        mainBalance: firebase.firestore.FieldValue.increment(reward),
                        totalEarnings: firebase.firestore.FieldValue.increment(reward),
                        totalTasks: firebase.firestore.FieldValue.increment(1),
                        todayEarnings: firebase.firestore.FieldValue.increment(reward),
                        [`lastQuizDate_${currentQuizType}`]: firebase.firestore.FieldValue.serverTimestamp()
                    });
                    
                    await db.collection("history").add({
                        userId: currentUserId, 
                        type: "‡¶ï‡ßÅ‡¶á‡¶ú", 
                        amount: reward, 
                        status: "Success",
                        details: `${currentQuizType} ‡¶ï‡ßÅ‡¶á‡¶ú - ${correctAnswers}‡¶ü‡¶ø ‡¶∏‡¶†‡¶ø‡¶ï`, 
                        date: new Date().toLocaleDateString('bn-BD'),
                        time: new Date().toLocaleTimeString('bn-BD'), 
                        timestamp: firebase.firestore.FieldValue.serverTimestamp()
                    });
                    
                    todayEarnings += reward;
                    document.getElementById('todayEarnings').textContent = todayEarnings.toFixed(2);
                    
                    showSmartToast(`‡¶Ö‡¶≠‡¶ø‡¶®‡¶®‡ßç‡¶¶‡¶®! ${correctAnswers}‡¶ü‡¶ø ‡¶∏‡¶†‡¶ø‡¶ï ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§ ‡ß≥${reward} ‡¶™‡ßá‡ßü‡ßá‡¶õ‡ßá‡¶® üéâ`, 'success');
                    hideLoading();
                    
                    if(quizTimer) clearInterval(quizTimer);
                    
                    // ‡¶∞‡ßá‡¶ú‡¶æ‡¶≤‡ßç‡¶ü ‡¶™‡ßá‡¶ú ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã
                    document.getElementById('quizQuestionsContainer').innerHTML = `
                        <div class="text-center p-8">
                            <div class="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4 animate-bounce">
                                <i class="ri-trophy-fill text-4xl text-green-600"></i>
                            </div>
                            <h4 class="text-2xl font-bold text-green-700 mb-2">‡¶ï‡ßÅ‡¶á‡¶ú ‡¶∏‡¶´‡¶≤!</h4>
                            <p class="text-slate-500 font-bold mb-6">‡¶∏‡¶†‡¶ø‡¶ï ‡¶â‡¶§‡ßç‡¶§‡¶∞: ${correctAnswers}/${totalQuestions}</p>
                            <div class="bg-green-50 p-4 rounded-xl border border-green-200 inline-block mb-6">
                                <p class="text-sm text-green-800">‡¶Æ‡ßã‡¶ü ‡¶™‡ßÅ‡¶∞‡¶∏‡ßç‡¶ï‡¶æ‡¶∞</p>
                                <p class="text-3xl font-black text-green-600">‡ß≥${reward}</p>
                            </div>
                            <br>
                            <button onclick="window.switchQuizTab('types')" class="bg-slate-800 text-white px-8 py-3 rounded-xl font-bold shadow-lg hover:scale-105 transition">‡¶®‡¶§‡ßÅ‡¶® ‡¶ï‡ßÅ‡¶á‡¶ú ‡¶ñ‡ßá‡¶≤‡ßÅ‡¶®</button>
                        </div>`;
                    document.getElementById('submitQuizBtn').classList.add('hidden');
                    
                } catch (error) { 
                    console.error(error);
                    showSmartToast('‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá', 'error'); 
                    hideLoading(); 
                }
            };
            
            showInterstitialAd();
        };

        // ‚úÖ MISSING FUNCTION 1: SWITCH QUIZ TAB
        window.switchQuizTab = (tab) => {
            const typesSection = document.getElementById('quizTypesSection');
            const questionsSection = document.getElementById('quizQuestionsSection');
            const btnTypes = document.getElementById('tabQuizTypes');
            const btnQuestions = document.getElementById('tabQuizQuestions');

            if (tab === 'types') {
                typesSection.classList.remove('hidden');
                questionsSection.classList.add('hidden');
                
                // ‡¶¨‡¶æ‡¶ü‡¶® ‡¶°‡¶ø‡¶ú‡¶æ‡¶á‡¶® ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
                btnTypes.className = 'flex-1 py-3 font-bold text-sm rounded-xl bg-green-500 text-white shadow';
                btnQuestions.className = 'flex-1 py-3 font-bold text-sm rounded-xl text-slate-500';
            } else {
                typesSection.classList.add('hidden');
                questionsSection.classList.remove('hidden');
                
                // ‡¶¨‡¶æ‡¶ü‡¶® ‡¶°‡¶ø‡¶ú‡¶æ‡¶á‡¶® ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
                btnQuestions.className = 'flex-1 py-3 font-bold text-sm rounded-xl bg-green-500 text-white shadow';
                btnTypes.className = 'flex-1 py-3 font-bold text-sm rounded-xl text-slate-500';
            }
        };

        // ‚úÖ MISSING FUNCTION 2: START QUIZ TIMER
        window.startQuizTimer = () => {
            if(quizTimer) clearInterval(quizTimer);
            
            let timeLeft = 60; // ‡ß¨‡ß¶ ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶∏‡¶Æ‡ßü
            const timerElement = document.getElementById('quizTimer');
            timerElement.innerText = timeLeft;
            timerElement.classList.remove('bg-red-500');
            timerElement.classList.add('bg-blue-500');

            quizTimer = setInterval(() => {
                timeLeft--;
                timerElement.innerText = timeLeft;

                // ‡¶∏‡¶Æ‡ßü ‡ßß‡ß¶ ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶°‡ßá‡¶∞ ‡¶ï‡¶Æ ‡¶π‡¶≤‡ßá ‡¶≤‡¶æ‡¶≤ ‡¶ï‡¶æ‡¶≤‡¶æ‡¶∞ ‡¶π‡¶¨‡ßá
                if(timeLeft <= 10) {
                    timerElement.classList.remove('bg-blue-500');
                    timerElement.classList.add('bg-red-500');
                }

                if(timeLeft <= 0) {
                    clearInterval(quizTimer);
                    showSmartToast('‡¶∏‡¶Æ‡¶Ø‡¶º ‡¶∂‡ßá‡¶∑! ‡¶∏‡ßç‡¶¨‡¶Ø‡¶º‡¶Ç‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶≠‡¶æ‡¶¨‡ßá ‡¶∏‡¶æ‡¶¨‡¶Æ‡¶ø‡¶ü ‡¶π‡¶ö‡ßç‡¶õ‡ßá...', 'warning');
                    window.submitQuiz(); // ‡¶∏‡¶Æ‡ßü ‡¶∂‡ßá‡¶∑ ‡¶π‡¶≤‡ßá ‡¶Ö‡¶ü‡ßã ‡¶∏‡¶æ‡¶¨‡¶Æ‡¶ø‡¶ü
                }
            }, 1000);
        };

        // ‚úÖ MISSING FUNCTION 3: SELECT ANSWER
        window.selectQuizAnswer = (qIndex, oIndex) => {
            // ‡¶∞‡ßá‡¶°‡¶ø‡¶ì ‡¶¨‡¶æ‡¶ü‡¶® ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡¶æ
            const radio = document.getElementById(`q${qIndex}o${oIndex}`);
            if(radio) radio.checked = true;
            
            // ‡¶°‡¶æ‡¶ü‡¶æ‡¶¨‡ßá‡¶∏‡ßá ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶≠‡ßç‡¶Ø‡¶æ‡¶≤‡ßÅ ‡¶∞‡¶æ‡¶ñ‡¶æ
            selectedAnswers[qIndex] = oIndex;
        };

        // ‚úÖ PROFILE FUNCTIONS
        window.showAvatarSelector = () => {
            document.getElementById('avatarModal').classList.remove('hidden');
        };
        
        window.closeAvatarModal = () => {
            document.getElementById('avatarModal').classList.add('hidden');
        };
        
        window.selectAvatar = (avatarUrl) => {
            selectedAvatar = avatarUrl;
            document.getElementById('currentAvatar').src = avatarUrl;
            window.closeAvatarModal();
            showSmartToast('‡¶è‡¶≠‡¶æ‡¶ü‡¶æ‡¶∞ ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá', 'success');
        };
        
        window.updateProfile = async () => { 
            try {
                showLoading();
                await db.collection("users").doc(currentUserId).update({ 
                    name: document.getElementById('profNameInput').value, 
                    email: document.getElementById('profEmailInput').value,
                    address: document.getElementById('profAddressInput').value,
                    avatar: selectedAvatar
                }); 
                
                document.getElementById('currentAvatar').src = selectedAvatar;
                
                showSmartToast('‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá', 'success'); 
                hideLoading();
            } catch (e) {
                showSmartToast('‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá', 'error');
                hideLoading();
            }
        };
        
        window.showChangePassword = async () => {
            const { value: newPassword } = await Swal.fire({
                title: '‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶¶‡¶ø‡¶®',
                input: 'password',
                inputLabel: '‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° (‡ß¨+ ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ)',
                inputPlaceholder: '‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶¶‡¶ø‡¶®',
                showCancelButton: true,
                confirmButtonText: '‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®',
                cancelButtonText: '‡¶¨‡¶æ‡¶§‡¶ø‡¶≤',
                inputValidator: (value) => {
                    if (!value || value.length < 6) {
                        return '‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶ï‡¶Æ‡¶™‡¶ï‡ßç‡¶∑‡ßá ‡ß¨ ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ‡¶∞ ‡¶π‡¶§‡ßá ‡¶π‡¶¨‡ßá';
                    }
                }
            });
            
            if (newPassword) {
                try {
                    showLoading();
                    const user = auth.currentUser;
                    await user.updatePassword(newPassword);
                    showSmartToast('‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶∏‡¶´‡¶≤', 'success');
                    hideLoading();
                } catch (error) {
                    showSmartToast('‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá', 'error');
                    hideLoading();
                }
            }
        };

        // ‚úÖ UPDATED TASK COMPLETION - 5 SECONDS TIMER
        window.completeTask = async (taskId, reward, taskType, title, description, link) => {
            if(!currentUserData) return;
            
            currentTaskInfo = {
                taskId,
                reward,
                taskType,
                title,
                description,
                link
            };
            
            showInterstitialAd();
            
            setTimeout(() => {
                window.open(link, '_blank');
            }, 500);
            
            startTaskTimer();
            
            showSmartToast('‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶≤‡¶ø‡¶Ç‡¶ï‡ßá ‡¶®‡¶ø‡ßü‡ßá ‡¶Ø‡¶æ‡¶ì‡ßü‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§ ‡ß´ ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶™‡¶∞ ‡¶™‡ßç‡¶∞‡ßÅ‡¶´ ‡¶∏‡¶æ‡¶¨‡¶Æ‡¶ø‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®‡•§', 'info');
        };
        
        function startTaskTimer() {
            if(taskTimer) clearInterval(taskTimer);
            
            // ‚úÖ CHANGED TO 5 SECONDS
            let timeLeft = 5;
            const startTime = Date.now();
            
            taskTimer = setInterval(() => {
                const elapsed = Math.floor((Date.now() - startTime) / 1000);
                const remaining = timeLeft - elapsed;
                
                if(remaining <= 0) {
                    clearInterval(taskTimer);
                    showProofSubmissionForm();
                }
            }, 1000);
            
            setTimeout(() => {
                if(taskTimer) {
                    clearInterval(taskTimer);
                }
                showProofSubmissionForm();
            }, timeLeft * 1000);
        }
        
                       // ‚úÖ GORGEOUS PROOF SUBMISSION FORM (SMART CATEGORY LOGIC)
        function showProofSubmissionForm() {
            const container = document.getElementById('proofFormContainer');
            if(!container) return;

            // 1. ‡¶∏‡ßç‡¶Æ‡¶æ‡¶∞‡ßç‡¶ü ‡¶ü‡¶æ‡¶á‡¶ü‡ßá‡¶≤ ‡¶ú‡ßá‡¶®‡¶æ‡¶∞‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ (‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶ó‡¶∞‡¶ø ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡ßü‡ßÄ)
            let proof1Label = "‡¶ï‡¶æ‡¶ú‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡¶Æ‡¶æ‡¶£ ‡ßß (Username/Email)";
            let proof1Placeholder = "‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶®‡ßá‡¶Æ ‡¶¨‡¶æ ‡¶ú‡¶ø‡¶Æ‡ßá‡¶á‡¶≤ ‡¶¶‡¶ø‡¶®";
            let icon = "ri-user-line";

            // ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶ü‡¶æ‡¶á‡¶™ ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßá ‡¶≤‡ßá‡¶≠‡ßá‡¶≤ ‡¶ö‡ßá‡¶û‡ßç‡¶ú ‡¶π‡¶¨‡ßá
            if(currentTaskInfo) {
                if(currentTaskInfo.taskType === 'youtube' || currentTaskInfo.link.includes('youtube')) {
                    proof1Label = "‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶á‡¶â‡¶ü‡¶ø‡¶â‡¶¨ ‡¶ö‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶¨‡¶æ ‡¶ú‡¶ø‡¶Æ‡ßá‡¶á‡¶≤";
                    proof1Placeholder = "‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶®: My Channel Name";
                    icon = "ri-youtube-fill";
                } else if(currentTaskInfo.taskType === 'telegram' || currentTaskInfo.link.includes('t.me')) {
                    proof1Label = "‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶®‡ßá‡¶Æ";
                    proof1Placeholder = "‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶®: @username";
                    icon = "ri-telegram-fill";
                } else if(currentTaskInfo.taskType === 'facebook' || currentTaskInfo.link.includes('facebook')) {
                    proof1Label = "‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶´‡ßá‡¶∏‡¶¨‡ßÅ‡¶ï ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶®‡¶æ‡¶Æ/‡¶≤‡¶ø‡¶Ç‡¶ï";
                    proof1Placeholder = "‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶®: Facebook Profile Link";
                    icon = "ri-facebook-circle-fill";
                }
            }

            // 2. ‡¶ó‡¶∞‡ßç‡¶ú‡¶ø‡¶Ø‡¶º‡¶æ‡¶∏ HTML ‡¶´‡¶∞‡ßç‡¶Æ ‡¶°‡¶ø‡¶ú‡¶æ‡¶á‡¶®
            container.innerHTML = `
                <div class="space-y-5 animate__animated animate__fadeInUp">
                    
                    <div class="relative group">
                        <label class="block text-xs font-bold text-slate-500 mb-1.5 ml-1 flex items-center gap-1">
                            <i class="${icon} text-blue-500"></i> ${proof1Label} <span class="text-red-500">*</span>
                        </label>
                        <div class="relative">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="ri-id-card-line text-slate-400"></i>
                            </div>
                            <input type="text" id="proof1" placeholder="${proof1Placeholder}" 
                                class="w-full pl-10 p-3.5 bg-slate-50 rounded-xl border border-slate-200 font-bold text-sm focus:border-blue-500 focus:bg-white outline-none transition-all shadow-sm">
                        </div>
                    </div>

                    <div class="relative group">
                        <label class="block text-xs font-bold text-slate-500 mb-1.5 ml-1 flex items-center gap-1">
                            <i class="ri-image-line text-purple-500"></i> ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®‡¶∂‡¶ü ‡¶≤‡¶ø‡¶Ç‡¶ï (Screenshot Link) <span class="text-red-500">*</span>
                        </label>
                        <div class="relative">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="ri-link-m text-slate-400"></i>
                            </div>
                            <input type="text" id="proof2" placeholder="https://prnt.sc/..." 
                                class="w-full pl-10 p-3.5 bg-slate-50 rounded-xl border border-slate-200 font-bold text-sm focus:border-purple-500 focus:bg-white outline-none transition-all shadow-sm">
                        </div>
                        <p class="text-[10px] font-bold text-red-500 mt-1.5 flex items-start gap-1 ml-1 animate-pulse">
                            <i class="ri-information-fill mt-0.5"></i>
                            <span>‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®‡¶∂‡¶ü <b>imgbb.com</b> ‡¶¨‡¶æ <b>prnt.sc</b> ‡¶§‡ßá ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßá ‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶¶‡¶ø‡¶®‡•§</span>
                        </p>
                    </div>

                    <div class="bg-orange-50 p-3 rounded-xl border border-orange-200 flex items-start gap-2.5">
                        <div class="bg-orange-100 p-1.5 rounded-full text-orange-600">
                            <i class="ri-shield-check-line text-sm"></i>
                        </div>
                        <div>
                            <h4 class="text-[11px] font-bold text-orange-800 mb-0.5">‡¶∏‡¶§‡¶∞‡ßç‡¶ï‡¶§‡¶æ</h4>
                            <p class="text-[10px] font-medium text-orange-700 leading-tight opacity-90">
                                ‡¶≠‡ßÅ‡¶≤ ‡¶§‡¶•‡ßç‡¶Ø ‡¶¨‡¶æ ‡¶≠‡ßÅ‡ßü‡¶æ ‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶¶‡¶ø‡¶≤‡ßá ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶™‡¶æ‡¶¨‡ßá‡¶® ‡¶®‡¶æ ‡¶è‡¶¨‡¶Ç ‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶¨‡ßç‡¶Ø‡¶æ‡¶® ‡¶π‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡•§ ‡¶∏‡¶†‡¶ø‡¶ï ‡¶§‡¶•‡ßç‡¶Ø ‡¶¶‡¶ø‡¶®‡•§
                            </p>
                        </div>
                    </div>
                </div>
            `;

            // ‡¶Æ‡ßã‡¶°‡¶æ‡¶≤ ‡¶ì‡¶™‡ßá‡¶® ‡¶ï‡¶∞‡¶æ
            document.getElementById('proofModal').classList.remove('hidden');
        }

        // ‚úÖ MISSING FUNCTION: CLOSE MODAL
        window.closeProofModal = () => {
            document.getElementById('proofModal').classList.add('hidden');
        }


        
        // ‚úÖ UPDATED SUBMIT PROOF
        window.submitProof = async () => {
            if(!currentTaskInfo) return;
            
            const proof1 = document.getElementById('proof1')?.value.trim();
            const proof2 = document.getElementById('proof2')?.value.trim();
            
            if(!proof1 || !proof2) {
                showSmartToast('‡¶¶‡¶Ø‡¶º‡¶æ ‡¶ï‡¶∞‡ßá ‡¶∏‡¶¨ ‡¶§‡¶•‡ßç‡¶Ø ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®', 'error');
                return;
            }
            
            showLoading();
            showSmartToast('‡¶™‡ßç‡¶∞‡ßÅ‡¶´ ‡¶∏‡¶æ‡¶¨‡¶Æ‡¶ø‡¶ü ‡¶π‡¶ö‡ßç‡¶õ‡ßá...', 'info');
            
            try {
                // ‡ßß. ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶™‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Æ‡ßá‡¶á‡¶® ‡¶°‡¶æ‡¶ü‡¶æ
                await db.collection("task_submissions").add({ 
                    userId: currentUserId, 
                    taskId: currentTaskInfo.taskId,
                    taskTitle: currentTaskInfo.title,
                    taskType: currentTaskInfo.taskType || 'general',
                    reward: currentTaskInfo.reward,
                    userName: currentUserData.name,
                    userPhone: currentUserData.phone,
                    proofText: proof1,
                    screenshotUrl: proof2,
                    status: "pending",
                    date: new Date().toLocaleDateString('bn-BD'),
                    time: new Date().toLocaleTimeString('bn-BD'),
                    timestamp: firebase.firestore.FieldValue.serverTimestamp()
                });
                
                // ‡ß®. ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡ßá‡¶∞ ‡¶π‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø‡¶§‡ßá ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡¶æ
                await db.collection("history").add({
                    userId: currentUserId,
                    type: "‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶®",
                    amount: currentTaskInfo.reward,
                    status: "Pending",
                    details: `${currentTaskInfo.title} - ‡¶Ø‡¶æ‡¶ö‡¶æ‡¶á ‡¶ö‡¶≤‡¶õ‡ßá`,
                    taskId: currentTaskInfo.taskId,
                    date: new Date().toLocaleDateString('bn-BD'),
                    time: new Date().toLocaleTimeString('bn-BD'),
                    timestamp: firebase.firestore.FieldValue.serverTimestamp()
                });
                
                // ‡ß©. ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶®
                const telegramMessage = `üîî *‡¶®‡¶§‡ßÅ‡¶® ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶™‡ßç‡¶∞‡ßÅ‡¶´ ‡¶∏‡¶æ‡¶¨‡¶Æ‡¶ø‡¶ü*\n\nüë§ *‡¶á‡¶â‡¶ú‡¶æ‡¶∞:* ${currentUserData.name}\nüì± *‡¶´‡ßã‡¶®:* ${currentUserData.phone}\nüéØ *‡¶ü‡¶æ‡¶∏‡ßç‡¶ï:* ${currentTaskInfo.title}\nüí∞ *‡¶™‡ßÅ‡¶∞‡¶∏‡ßç‡¶ï‡¶æ‡¶∞:* ‡ß≥${currentTaskInfo.reward}\nüìù *‡¶™‡ßç‡¶∞‡ßÅ‡¶´:* ${proof1}\nüñº *‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®‡¶∂‡¶ü:* ${proof2}`;
                await sendTelegramNotification(telegramMessage);
                
                showSmartToast('‡¶™‡ßç‡¶∞‡ßÅ‡¶´ ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶∏‡¶æ‡¶¨‡¶Æ‡¶ø‡¶ü ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá, ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶è‡¶™‡ßç‡¶∞‡ßÅ‡¶≠ ‡¶ï‡¶∞‡¶¨‡ßá‡¶®', 'success');
                hideLoading();
                window.closeProofModal();
                
                // ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü ‡¶∞‡¶ø‡¶´‡ßç‡¶∞‡ßá‡¶∂ ‡¶ï‡¶∞‡¶æ
                renderTasks();
                
            } catch (e) {
                console.error(e);
                showSmartToast('‡¶™‡ßç‡¶∞‡ßÅ‡¶´ ‡¶∏‡¶æ‡¶¨‡¶Æ‡¶ø‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá', 'error');
                hideLoading();
            }
        };

        // ‚úÖ WALLET FUNCTIONS WITH LIMITS AND SCHEDULE
        window.calculateDepositVAT = () => {
            const amount = parseFloat(document.getElementById('depositAmount').value) || 0;
            const vatPercentage = systemSettings.vatPercentage || 10;
            const vat = amount * (vatPercentage / 100);
            const total = amount + vat;
            document.getElementById('vatCalculation').innerHTML = `‡¶≠‡ßç‡¶Ø‡¶æ‡¶ü (${vatPercentage}%): ‡ß≥${vat.toFixed(2)} | ‡¶Æ‡ßã‡¶ü: ‡ß≥${total.toFixed(2)}`;
        };
        
        window.calculateWithdrawVAT = () => {
            const amount = parseFloat(document.getElementById('withdrawAmount').value) || 0;
            const vatPercentage = systemSettings.vatPercentage || 10;
            const vat = amount * (vatPercentage / 100);
            const received = amount - vat;
            document.getElementById('withdrawVat').innerHTML = `‡¶≠‡ßç‡¶Ø‡¶æ‡¶ü (${vatPercentage}%): ‡ß≥${vat.toFixed(2)} | ‡¶™‡ßç‡¶∞‡¶æ‡¶™‡ßç‡¶§: ‡ß≥${received.toFixed(2)}`;
        };
        
        window.calculateRechargeFee = () => {
            const amount = parseFloat(document.getElementById('rechAmount').value) || 0;
            const fee = systemSettings.rechargeFee || 5;
            const total = amount + fee;
            document.getElementById('rechargeFee').innerHTML = `‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏ ‡¶ö‡¶æ‡¶∞‡ßç‡¶ú: ‡ß≥${fee.toFixed(2)} | ‡¶Æ‡ßã‡¶ü: ‡ß≥${total.toFixed(2)}`;
        };

        // ‚úÖ UPDATED DEPOSIT FUNCTION
        window.submitDeposit = async () => {
            const trxId = document.getElementById('depositTrxId').value.trim();
            const amount = parseFloat(document.getElementById('depositAmount').value);
            const method = document.getElementById('selectedDepositMethod').value;
            
            if(!trxId || !amount || amount <= 0) {
                showSmartToast('‡¶∏‡¶†‡¶ø‡¶ï ‡¶§‡¶•‡ßç‡¶Ø ‡¶¶‡¶ø‡¶®', 'error');
                return;
            }
            
            if(!method) {
                showSmartToast('‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶Æ‡ßá‡¶•‡¶° ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®', 'error');
                return;
            }
            
            const minDeposit = systemSettings.minDeposit || 50;
            if(amount < minDeposit) {
                showSmartToast(`‡¶®‡ßç‡¶Ø‡ßÇ‡¶®‡¶§‡¶Æ ‡¶°‡¶ø‡¶™‡ßã‡¶ú‡¶ø‡¶ü ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ ‡ß≥${minDeposit}`, 'error');
                return;
            }
            
            showLoading();
            showSmartToast('‡¶°‡¶ø‡¶™‡ßã‡¶ú‡¶ø‡¶ü ‡¶∞‡¶ø‡¶ï‡ßã‡¶Ø‡¶º‡ßá‡¶∏‡ßç‡¶ü ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶π‡¶ö‡ßç‡¶õ‡ßá...', 'info');
            
            try {
                const vatPercentage = systemSettings.vatPercentage || 10;
                const vat = amount * (vatPercentage / 100);
                const totalAmount = amount + vat;
                
                // Save to pending_requests
                await db.collection("pending_requests").add({ 
                    userId: currentUserId, 
                    type: "‡¶°‡¶ø‡¶™‡ßã‡¶ú‡¶ø‡¶ü", 
                    amount: amount, 
                    vat: vat,
                    totalAmount: totalAmount,
                    trxId: trxId,
                    method: method,
                    userName: currentUserData.name,
                    userPhone: currentUserData.phone,
                    status: "Pending",
                    date: new Date().toLocaleDateString('bn-BD'),
                    time: new Date().toLocaleTimeString('bn-BD'),
                    timestamp: firebase.firestore.FieldValue.serverTimestamp()
                });
                
                // ‚úÖ ADDED: Save to history as well
                await db.collection("history").add({
                    userId: currentUserId,
                    type: "‡¶°‡¶ø‡¶™‡ßã‡¶ú‡¶ø‡¶ü",
                    amount: amount,
                    status: "Pending",
                    details: `${method} - TrxID: ${trxId}`,
                    trxId: trxId,
                    method: method,
                    date: new Date().toLocaleDateString('bn-BD'),
                    time: new Date().toLocaleTimeString('bn-BD'),
                    timestamp: firebase.firestore.FieldValue.serverTimestamp()
                });
                
                // Send Telegram notification
                const telegramMessage = `üí∞ *‡¶®‡¶§‡ßÅ‡¶® ‡¶°‡¶ø‡¶™‡ßã‡¶ú‡¶ø‡¶ü ‡¶∞‡¶ø‡¶ï‡ßã‡¶Ø‡¶º‡ßá‡¶∏‡ßç‡¶ü*\n\nüë§ *‡¶á‡¶â‡¶ú‡¶æ‡¶∞:* ${currentUserData.name}\nüì± *‡¶´‡ßã‡¶®:* ${currentUserData.phone}\nüí≥ *‡¶Æ‡ßá‡¶•‡¶°:* ${method}\nüíµ *‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£:* ‡ß≥${amount}\nüßæ *TrxID:* ${trxId}\nüìä *‡¶≠‡ßç‡¶Ø‡¶æ‡¶ü:* ‡ß≥${vat.toFixed(2)}\nüí∞ *‡¶Æ‡ßã‡¶ü:* ‡ß≥${totalAmount.toFixed(2)}`;
                await sendTelegramNotification(telegramMessage);
                
                showSmartToast('‡¶°‡¶ø‡¶™‡ßã‡¶ú‡¶ø‡¶ü ‡¶∞‡¶ø‡¶ï‡ßã‡¶Ø‡¶º‡ßá‡¶∏‡ßç‡¶ü ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá, ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶è‡¶™‡ßç‡¶∞‡ßÅ‡¶≠ ‡¶ï‡¶∞‡¶¨‡ßá‡¶®', 'success');
                hideLoading();
                
                document.getElementById('depositTrxId').value = '';
                document.getElementById('depositAmount').value = '';
                window.calculateDepositVAT();
                
            } catch (e) {
                showSmartToast('‡¶°‡¶ø‡¶™‡ßã‡¶ú‡¶ø‡¶ü ‡¶∞‡¶ø‡¶ï‡ßã‡¶Ø‡¶º‡ßá‡¶∏‡ßç‡¶ü ‡¶™‡¶æ‡¶†‡¶æ‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá', 'error');
                hideLoading();
            }
        };
        
        // ‚úÖ UPDATED WITHDRAW FUNCTION WITH SCHEDULE
        window.submitWithdraw = async () => {
            const number = document.getElementById('withdrawNumber').value.trim();
            const amount = parseFloat(document.getElementById('withdrawAmount').value);
            const method = document.getElementById('selectedWithdrawMethod').value;
            
            if(!number || !amount || amount <= 0) {
                showSmartToast('‡¶∏‡¶†‡¶ø‡¶ï ‡¶§‡¶•‡ßç‡¶Ø ‡¶¶‡¶ø‡¶®', 'error');
                return;
            }
            
            if(!method) {
                showSmartToast('‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶® ‡¶Æ‡ßá‡¶•‡¶° ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®', 'error');
                return;
            }
            
            const minWithdraw = systemSettings.minWithdraw || 50;
            const maxWithdraw = systemSettings.maxWithdraw || 5000;
            
            if(amount < minWithdraw) {
                showSmartToast(`‡¶®‡ßç‡¶Ø‡ßÇ‡¶®‡¶§‡¶Æ ‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶® ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ ‡ß≥${minWithdraw}`, 'error');
                return;
            }
            
            if(amount > maxWithdraw) {
                showSmartToast(`‡¶∏‡¶∞‡ßç‡¶¨‡ßã‡¶ö‡ßç‡¶ö ‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶® ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ ‡ß≥${maxWithdraw}`, 'error');
                return;
            }
            
                        // üîê ‡¶™‡¶ø‡¶® ‡¶≠‡ßá‡¶∞‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® (‡¶â‡¶á‡¶•‡¶°‡ßç‡¶∞)
            if (!currentUserData.transactionPin) {
                return Swal.fire({
                    title: '‡¶™‡¶ø‡¶® ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶®‡ßá‡¶á!',
                    text: '‡¶®‡¶ø‡¶∞‡¶æ‡¶™‡¶§‡ßç‡¶§‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ü‡¶ó‡ßá ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏ ‡¶•‡ßá‡¶ï‡ßá ‡ß™ ‡¶°‡¶ø‡¶ú‡¶ø‡¶ü‡ßá‡¶∞ ‡¶™‡¶ø‡¶® ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®‡•§',
                    icon: 'info',
                    confirmButtonText: '‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏‡ßá ‡¶Ø‡¶æ‡¶®'
                }).then(() => window.showPage('settingsScreen'));
            }

            const { value: userPin } = await Swal.fire({
                title: '‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡¶ø‡¶® ‡¶¶‡¶ø‡¶®',
                input: 'password',
                inputPlaceholder: '‡ß™ ‡¶°‡¶ø‡¶ú‡¶ø‡¶ü‡ßá‡¶∞ ‡¶™‡¶ø‡¶®',
                inputAttributes: { maxlength: 4, textAlign: 'center' },
                showCancelButton: true,
                confirmButtonText: '‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶®',
                cancelButtonText: '‡¶¨‡¶æ‡¶§‡¶ø‡¶≤'
            });

            if (!userPin) return; // ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶ï‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶∏‡ßá‡¶≤ ‡¶ï‡¶∞‡¶≤‡ßá ‡¶•‡ßá‡¶Æ‡ßá ‡¶Ø‡¶æ‡¶¨‡ßá

            if (userPin !== currentUserData.transactionPin) {
                return showSmartToast('‡¶≠‡ßÅ‡¶≤ ‡¶™‡¶ø‡¶® ‡¶¶‡¶ø‡ßü‡ßá‡¶õ‡ßá‡¶®!', 'error');
            }

            
            if(!currentUserData) {
                showSmartToast('‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶°‡ßá‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...', 'error');
                return;
            }
            
            if(currentUserData.mainBalance < amount) {
                showSmartToast('‡¶™‡¶∞‡ßç‡¶Ø‡¶æ‡¶™‡ßç‡¶§ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶®‡ßá‡¶á! ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏: ‡ß≥' + currentUserData.mainBalance.toFixed(2), 'error');
                return;
            }
            
            const isFreeUser = currentUserData.plan === "Free Member" || currentUserData.plan.includes("Free");
            if(isFreeUser) {
                const referralCount = currentUserData.totalReferrals || 0;
                if(referralCount < 3) {
                    showSmartToast(`‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ${referralCount}‡•§ ‡¶â‡¶á‡¶•‡¶°‡ßç‡¶∞ ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶∞‡ßç‡¶¨‡¶®‡¶ø‡¶Æ‡ßç‡¶® ‡ß©‡¶ü‡¶ø ‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ú‡¶®‡•§`, 'error');
                    return;
                }
            }
            
            let dailyLimit = 1;
            if(!isFreeUser) {
                dailyLimit = 2;
            }
            
            if(userWithdrawCount >= dailyLimit) {
                showSmartToast(`‡¶Ü‡¶™‡¶®‡¶ø ‡¶Ü‡¶ú ${userWithdrawCount} ‡¶¨‡¶æ‡¶∞ ‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶® ‡¶ï‡¶∞‡ßá‡¶õ‡ßá‡¶®‡•§ ‡¶¶‡ßà‡¶®‡¶ø‡¶ï ‡¶∏‡¶∞‡ßç‡¶¨‡ßã‡¶ö‡ßç‡¶ö ${dailyLimit} ‡¶¨‡¶æ‡¶∞ ‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶® ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®‡•§`, 'error');
                return;
            }
            
            const vatPercentage = systemSettings.vatPercentage || 10;
            const vat = amount * (vatPercentage / 100);
            const received = amount - vat;
            
            // ‚úÖ CHECK WITHDRAWAL SCHEDULE
            const withinSchedule = isWithinWithdrawalSchedule();
            
            showLoading();
            showSmartToast('‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶® ‡¶∞‡¶ø‡¶ï‡ßã‡¶Ø‡¶º‡ßá‡¶∏‡ßç‡¶ü ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶π‡¶ö‡ßç‡¶õ‡ßá...', 'info');
            
            try {
                const userRef = db.collection("users").doc(currentUserId);
                await userRef.update({
                    mainBalance: firebase.firestore.FieldValue.increment(-amount),
                    totalWithdraw: firebase.firestore.FieldValue.increment(amount)
                });
                
                await db.collection("pending_requests").add({ 
                    userId: currentUserId, 
                    type: "‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶®", 
                    amount: amount, 
                    vat: vat,
                    receivedAmount: received,
                    accountNumber: number,
                    method: method,
                    userName: currentUserData.name,
                    userPhone: currentUserData.phone,
                    status: "Pending",
                    date: new Date().toLocaleDateString('bn-BD'),
                    time: new Date().toLocaleTimeString('bn-BD'),
                    timestamp: firebase.firestore.FieldValue.serverTimestamp()
                });
                
                await db.collection("history").add({
                    userId: currentUserId,
                    type: "‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶®",
                    amount: -amount,
                    status: "Pending",
                    details: `${method} - ${number}`,
                    vat: vat,
                    receivedAmount: received,
                    date: new Date().toLocaleDateString('bn-BD'),
                    time: new Date().toLocaleTimeString('bn-BD'),
                    timestamp: firebase.firestore.FieldValue.serverTimestamp()
                });
                
                userWithdrawCount++;
                
                // Send Telegram notification
                const telegramMessage = `üí∏ *‡¶®‡¶§‡ßÅ‡¶® ‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶® ‡¶∞‡¶ø‡¶ï‡ßã‡¶Ø‡¶º‡ßá‡¶∏‡ßç‡¶ü*\n\nüë§ *‡¶á‡¶â‡¶ú‡¶æ‡¶∞:* ${currentUserData.name}\nüì± *‡¶´‡ßã‡¶®:* ${currentUserData.phone}\nüí≥ *‡¶Æ‡ßá‡¶•‡¶°:* ${method}\nüìû *‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü:* ${number}\nüíµ *‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£:* ‡ß≥${amount}\nüìä *‡¶≠‡ßç‡¶Ø‡¶æ‡¶ü:* ‡ß≥${vat.toFixed(2)}\nüí∞ *‡¶™‡ßç‡¶∞‡¶æ‡¶™‡ßç‡¶§:* ‡ß≥${received.toFixed(2)}\n‚è∞ *‡¶∏‡¶Æ‡¶Ø‡¶º‡¶∏‡ßÇ‡¶ö‡ßÄ:* ${withinSchedule ? '‡¶≠‡¶ø‡¶§‡¶∞‡ßá' : '‡¶¨‡¶æ‡¶á‡¶∞‡ßá'}`;
                await sendTelegramNotification(telegramMessage);
                
                let successMessage = '‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶® ‡¶∞‡¶ø‡¶ï‡ßã‡¶Ø‡¶º‡ßá‡¶∏‡ßç‡¶ü ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá, ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶è‡¶™‡ßç‡¶∞‡ßÅ‡¶≠ ‡¶ï‡¶∞‡¶¨‡ßá‡¶®';
                if(!withinSchedule) {
                    successMessage += '\n\n‡¶®‡ßã‡¶ü‡¶ø‡¶∂: ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶® ‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ ‡¶ï‡¶æ‡¶∞‡ßç‡¶Ø‡¶¶‡¶ø‡¶¨‡¶∏‡ßá ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶¨‡ßá‡•§';
                }
                
                showSmartToast(successMessage, 'success');
              
              window.playSound('snd_success');                hideLoading();
                
                document.getElementById('withdrawNumber').value = '';
                document.getElementById('withdrawAmount').value = '';
                window.calculateWithdrawVAT();
                
            } catch (e) {
                showSmartToast('‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶® ‡¶∞‡¶ø‡¶ï‡ßã‡¶Ø‡¶º‡ßá‡¶∏‡ßç‡¶ü ‡¶™‡¶æ‡¶†‡¶æ‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá', 'error');
                hideLoading();
            }
        };
        
        // ‚úÖ UPDATED RECHARGE FUNCTION WITH SCHEDULE
        window.submitRecharge = async () => { 
            const phone = document.getElementById('rechPhone').value.trim();
            const amount = parseFloat(document.getElementById('rechAmount').value);
            const operator = document.getElementById('selectedOperator').value;
            
            if(!phone || !amount || amount <= 0) {
                showSmartToast('‡¶∏‡¶†‡¶ø‡¶ï ‡¶§‡¶•‡ßç‡¶Ø ‡¶¶‡¶ø‡¶®', 'error');
                return;
            }
            
            const minRecharge = systemSettings.minRecharge || 20;
            if(amount < minRecharge) {
                showSmartToast(`‡¶®‡ßç‡¶Ø‡ßÇ‡¶®‡¶§‡¶Æ ‡¶∞‡¶ø‡¶ö‡¶æ‡¶∞‡ßç‡¶ú ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ ‡ß≥${minRecharge}`, 'error');
                return;
            }
            
                                
                     
            const fee = systemSettings.rechargeFee || 5;
            const totalAmount = amount + fee;
            
            if(!currentUserData) {
                showSmartToast('‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶°‡ßá‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...', 'error');
                return;
            }
            
            if(currentUserData.rechargeBalance < totalAmount) {
                showSmartToast('‡¶™‡¶∞‡ßç‡¶Ø‡¶æ‡¶™‡ßç‡¶§ ‡¶∞‡¶ø‡¶ö‡¶æ‡¶∞‡ßç‡¶ú ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶®‡ßá‡¶á! ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∞‡¶ø‡¶ö‡¶æ‡¶∞‡ßç‡¶ú ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏: ‡ß≥' + (currentUserData.rechargeBalance || 0).toFixed(2), 'error');
                return;
            }
            
            const isFreeUser = currentUserData.plan === "Free Member" || currentUserData.plan.includes("Free");
            if(isFreeUser) {
                const referralCount = currentUserData.totalReferrals || 0;
                if(referralCount < 3) {
                    showSmartToast(`‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ${referralCount}‡•§ ‡¶∞‡¶ø‡¶ö‡¶æ‡¶∞‡ßç‡¶ú ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶∞‡ßç‡¶¨‡¶®‡¶ø‡¶Æ‡ßç‡¶® ‡ß©‡¶ü‡¶ø ‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ú‡¶®‡•§`, 'error');
                    return;
                }
            }
            
            
                // üîê ‡¶™‡¶ø‡¶® ‡¶≠‡ßá‡¶∞‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® (‡¶â‡¶á‡¶•‡¶°‡ßç‡¶∞)
            if (!currentUserData.transactionPin) {
                return Swal.fire({
                    title: '‡¶™‡¶ø‡¶® ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶®‡ßá‡¶á!',
                    text: '‡¶®‡¶ø‡¶∞‡¶æ‡¶™‡¶§‡ßç‡¶§‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ü‡¶ó‡ßá ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏ ‡¶•‡ßá‡¶ï‡ßá ‡ß™ ‡¶°‡¶ø‡¶ú‡¶ø‡¶ü‡ßá‡¶∞ ‡¶™‡¶ø‡¶® ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®‡•§',
                    icon: 'info',
                    confirmButtonText: '‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏‡ßá ‡¶Ø‡¶æ‡¶®'
                }).then(() => window.showPage('settingsScreen'));
            }

            const { value: userPin } = await Swal.fire({
                title: '‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡¶ø‡¶® ‡¶¶‡¶ø‡¶®',
                input: 'password',
                inputPlaceholder: '‡ß™ ‡¶°‡¶ø‡¶ú‡¶ø‡¶ü‡ßá‡¶∞ ‡¶™‡¶ø‡¶®',
                inputAttributes: { maxlength: 4, textAlign: 'center' },
                showCancelButton: true,
                confirmButtonText: '‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶®',
                cancelButtonText: '‡¶¨‡¶æ‡¶§‡¶ø‡¶≤'
            });

            if (!userPin) return; // ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶ï‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶∏‡ßá‡¶≤ ‡¶ï‡¶∞‡¶≤‡ßá ‡¶•‡ßá‡¶Æ‡ßá ‡¶Ø‡¶æ‡¶¨‡ßá

            if (userPin !== currentUserData.transactionPin) {
                return showSmartToast('‡¶≠‡ßÅ‡¶≤ ‡¶™‡¶ø‡¶® ‡¶¶‡¶ø‡ßü‡ßá‡¶õ‡ßá‡¶®!', 'error');
            }
            
            
            let dailyLimit = 2;
            if(!isFreeUser) {
                dailyLimit = 3;
            }
            
            if(userRechargeCount >= dailyLimit) {
                showSmartToast(`‡¶Ü‡¶™‡¶®‡¶ø ‡¶Ü‡¶ú ${userRechargeCount} ‡¶¨‡¶æ‡¶∞ ‡¶∞‡¶ø‡¶ö‡¶æ‡¶∞‡ßç‡¶ú ‡¶ï‡¶∞‡ßá‡¶õ‡ßá‡¶®‡•§ ‡¶¶‡ßà‡¶®‡¶ø‡¶ï ‡¶∏‡¶∞‡ßç‡¶¨‡ßã‡¶ö‡ßç‡¶ö ${dailyLimit} ‡¶¨‡¶æ‡¶∞ ‡¶∞‡¶ø‡¶ö‡¶æ‡¶∞‡ßç‡¶ú ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®‡•§`, 'error');
                return;
            }
            
            // ‚úÖ CHECK RECHARGE SCHEDULE
            const withinSchedule = isWithinWithdrawalSchedule();
            
            showLoading();
            showSmartToast('‡¶∞‡¶ø‡¶ö‡¶æ‡¶∞‡ßç‡¶ú ‡¶∞‡¶ø‡¶ï‡ßã‡¶Ø‡¶º‡ßá‡¶∏‡ßç‡¶ü ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶π‡¶ö‡ßç‡¶õ‡ßá...', 'info');
            
            try {
                const userRef = db.collection("users").doc(currentUserId);
                await userRef.update({
                    rechargeBalance: firebase.firestore.FieldValue.increment(-totalAmount)
                });
                
                await db.collection("recharge_requests").add({ 
                    userId: currentUserId, 
                    phone: phone, 
                    amount: amount, 
                    fee: fee,
                    totalAmount: totalAmount,
                    operator: operator,
                    status: 'Pending', 
                    date: new Date().toLocaleDateString('bn-BD'),
                    time: new Date().toLocaleTimeString('bn-BD'),
                    timestamp: firebase.firestore.FieldValue.serverTimestamp()
                }); 
                
                await db.collection("history").add({
                    userId: currentUserId,
                    type: "‡¶∞‡¶ø‡¶ö‡¶æ‡¶∞‡ßç‡¶ú",
                    amount: -totalAmount,
                    status: "Pending",
                    details: `${operator} - ${phone}`,
                    fee: fee,
                    date: new Date().toLocaleDateString('bn-BD'),
                    time: new Date().toLocaleTimeString('bn-BD'),
                    timestamp: firebase.firestore.FieldValue.serverTimestamp()
                });
                
                userRechargeCount++;
                
                // Send Telegram notification
                const telegramMessage = `üì± *‡¶®‡¶§‡ßÅ‡¶® ‡¶∞‡¶ø‡¶ö‡¶æ‡¶∞‡ßç‡¶ú ‡¶∞‡¶ø‡¶ï‡ßã‡¶Ø‡¶º‡ßá‡¶∏‡ßç‡¶ü*\n\nüë§ *‡¶á‡¶â‡¶ú‡¶æ‡¶∞:* ${currentUserData.name}\nüì± *‡¶´‡ßã‡¶®:* ${currentUserData.phone}\nüìû *‡¶∞‡¶ø‡¶ö‡¶æ‡¶∞‡ßç‡¶ú ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞:* ${phone}\nüè¢ *‡¶Ö‡¶™‡¶æ‡¶∞‡ßá‡¶ü‡¶∞:* ${operator}\nüíµ *‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£:* ‡ß≥${amount}\nüìä *‡¶´‡¶ø:* ‡ß≥${fee}\nüí∞ *‡¶Æ‡ßã‡¶ü:* ‡ß≥${totalAmount}\n‚è∞ *‡¶∏‡¶Æ‡¶Ø‡¶º‡¶∏‡ßÇ‡¶ö‡ßÄ:* ${withinSchedule ? '‡¶≠‡¶ø‡¶§‡¶∞‡ßá' : '‡¶¨‡¶æ‡¶á‡¶∞‡ßá'}`;
                await sendTelegramNotification(telegramMessage);
                
                let successMessage = '‡¶∞‡¶ø‡¶ö‡¶æ‡¶∞‡ßç‡¶ú ‡¶∞‡¶ø‡¶ï‡ßã‡¶Ø‡¶º‡ßá‡¶∏‡ßç‡¶ü ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá';
                if(!withinSchedule) {
                    successMessage += '\n\n‡¶®‡ßã‡¶ü‡¶ø‡¶∂: ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∞‡¶ø‡¶ö‡¶æ‡¶∞‡ßç‡¶ú ‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ ‡¶ï‡¶æ‡¶∞‡ßç‡¶Ø‡¶¶‡¶ø‡¶¨‡¶∏‡ßá ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶¨‡ßá‡•§';
                }
                
                showSmartToast(successMessage, 'success'); 
            
            window.playSound('snd_success');
            
                hideLoading();
                
                document.getElementById('rechPhone').value = '';
                document.getElementById('rechAmount').value = '';
                window.calculateRechargeFee();
                
            } catch (e) {
                showSmartToast('‡¶∞‡¶ø‡¶ö‡¶æ‡¶∞‡ßç‡¶ú ‡¶∞‡¶ø‡¶ï‡ßã‡¶Ø‡¶º‡ßá‡¶∏‡ßç‡¶ü ‡¶™‡¶æ‡¶†‡¶æ‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá', 'error');
                hideLoading();
            }
        };
        
        window.transferBalance = async () => {
            const am = parseFloat(document.getElementById('transferAmount').value);
            if(!am || am <= 0) {
                showSmartToast('‡¶≠‡ßÅ‡¶≤ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£', 'error');
                return;
            }
            
            if(!currentUserData) {
                showSmartToast('‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶°‡ßá‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...', 'error');
                return;
            }
            
            if(currentUserData.mainBalance < am) {
                showSmartToast('‡¶™‡¶∞‡ßç‡¶Ø‡¶æ‡¶™‡ßç‡¶§ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶®‡ßá‡¶á! ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏: ‡ß≥' + currentUserData.mainBalance.toFixed(2), 'error');
                return;
            }
            
            showLoading();
            showSmartToast('‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡ßç‡¶∏‡¶´‡¶æ‡¶∞ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...', 'info');
            
            try {
                const userRef = db.collection("users").doc(currentUserId);
                
                await userRef.update({
                    mainBalance: firebase.firestore.FieldValue.increment(-am),
                    rechargeBalance: firebase.firestore.FieldValue.increment(am)
                });
                
                await db.collection("history").add({
                    userId: currentUserId,
                    type: "‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡ßç‡¶∏‡¶´‡¶æ‡¶∞",
                    amount: am,
                    status: "Success",
                    details: "‡¶Æ‡ßá‡¶á‡¶® ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶•‡ßá‡¶ï‡ßá ‡¶∞‡¶ø‡¶ö‡¶æ‡¶∞‡ßç‡¶ú ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏",
                    date: new Date().toLocaleDateString('bn-BD'),
                    time: new Date().toLocaleTimeString('bn-BD'),
                    timestamp: firebase.firestore.FieldValue.serverTimestamp()
                });
                
                showSmartToast(`‡ß≥${am} ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡ßç‡¶∏‡¶´‡¶æ‡¶∞ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá`, 'success');
                hideLoading();
                
                document.getElementById('transferAmount').value = '';
                
            } catch (e) {
                showSmartToast('‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡ßç‡¶∏‡¶´‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá', 'error');
                hideLoading();
            }
        };

        // ‚úÖ SUMMARY FUNCTIONS
        async function loadSummary(uid) {
            try {
                showLoading();
                const userDoc = await db.collection("users").doc(uid).get();
                if(userDoc.exists) {
                    const data = userDoc.data();
                    document.getElementById('totalEarnings').innerText = (data.totalEarnings || 0).toFixed(2);
                    document.getElementById('totalDeposit').innerText = (data.totalDeposit || 0).toFixed(2);
                    document.getElementById('totalWithdraw').innerText = (data.totalWithdraw || 0).toFixed(2);
                    document.getElementById('totalTasks').innerText = data.totalTasks || '0';
                    document.getElementById('summaryPlan').innerText = data.plan || 'Free';
                    document.getElementById('totalReferrals').innerText = data.totalReferrals || '0';
                    document.getElementById('referralCount').innerText = data.totalReferrals || '0';
                    document.getElementById('referralEarnings').innerText = data.referralEarnings || 0;
                    document.getElementById('todayEarnings').innerText = (data.todayEarnings || 0).toFixed(2);
                    todayEarnings = data.todayEarnings || 0;
                    
                    const tasksSnap = await db.collection("tasks").get();
                    document.getElementById('activeTasks').innerText = tasksSnap.size || '0';
                    
                    const today = new Date().toDateString();
                    const lastBonus = data.lastDailyBonus ? new Date(data.lastDailyBonus.toDate()).toDateString() : null;
                    document.getElementById('dailyBonusStatus').innerText = lastBonus === today ? '‡¶Ü‡¶ú ‡¶®‡ßá‡¶ì‡¶Ø‡¶º‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá' : '‡¶Ü‡¶ú ‡¶®‡ßá‡¶ì‡¶Ø‡¶º‡¶æ ‡¶π‡¶Ø‡¶º‡¶®‡¶ø';
                }
                hideLoading();
            } catch (e) {
                console.error("Error loading summary:", e);
                hideLoading();
            }
        }

        async function checkDailyBonus(uid) {
            try {
                const userDoc = await db.collection("users").doc(uid).get();
                if(userDoc.exists) {
                    const data = userDoc.data();
                    const today = new Date().toDateString();
                    const lastBonus = data.lastDailyBonus ? new Date(data.lastDailyBonus.toDate()).toDateString() : null;
                    
                    if(lastBonus === today) {
                        document.getElementById('dailyBonusStatus').innerText = '‡¶Ü‡¶ú ‡¶®‡ßá‡¶ì‡¶Ø‡¶º‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá';
                    } else {
                        document.getElementById('dailyBonusStatus').innerText = '‡¶Ü‡¶ú ‡¶®‡ßá‡¶ì‡¶Ø‡¶º‡¶æ ‡¶π‡¶Ø‡¶º‡¶®‡¶ø';
                    }
                }
            } catch (e) {
                console.error("Error checking daily bonus:", e);
            }
        }

                                     // ‚úÖ PROFESSIONAL DAILY BONUS (FIXED SIZE & VISIBILITY)
        window.showDailyBonus = async () => {
            if(!currentUserId) return;

            // ‡ßß. ‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶¨‡¶æ‡¶∞ ‡¶è‡¶¨‡¶Ç ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ
            const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
            const banglaDays = {
                'Saturday': '‡¶∂‡¶®‡¶ø', 'Sunday': '‡¶∞‡¶¨‡¶ø', 'Monday': '‡¶∏‡ßã‡¶Æ', 
                'Tuesday': '‡¶Æ‡¶ô‡ßç‡¶ó‡¶≤', 'Wednesday': '‡¶¨‡ßÅ‡¶ß', 'Thursday': '‡¶¨‡ßÉ‡¶π‡¶É', 'Friday': '‡¶∂‡ßÅ‡¶ï‡ßç‡¶∞'
            };
            const today = new Date();
            const todayName = days[today.getDay()];
            const todayDateStr = today.toDateString();

            // ‡ß®. ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶Æ‡¶æ‡¶â‡¶®‡ßç‡¶ü
            let bonusAmounts = {
                'Saturday': 2, 'Sunday': 2, 'Monday': 3, 
                'Tuesday': 3, 'Wednesday': 4, 'Thursday': 4, 
                'Friday': 0 
            };

            try {
                const settingsDoc = await db.collection("settings").doc("daily_bonus").get();
                if(settingsDoc.exists) {
                    bonusAmounts = { ...bonusAmounts, ...settingsDoc.data() };
                }
            } catch(e) { console.log("Default bonus used"); }

            // ‡ß©. ‡¶ï‡ßç‡¶≤‡ßá‡¶á‡¶Æ ‡¶ö‡ßá‡¶ï
            let hasClaimedToday = false;
            if(currentUserData && currentUserData.lastDailyBonus) {
                const lastBonusDate = new Date(currentUserData.lastDailyBonus.toDate()).toDateString();
                if(lastBonusDate === todayDateStr) hasClaimedToday = true;
            }

            // ‡ß™. HTML ‡¶ú‡ßá‡¶®‡¶æ‡¶∞‡ßá‡¶ü
            let boxesHtml = '';
            const weekOrder = ['Saturday', 'Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday'];
            
            const giftIconUrl = "https://i.postimg.cc/dtj5JQqK/gift-box.png"; 

            weekOrder.forEach(dayName => {
                const isToday = (dayName === todayName);
                const isFriday = (dayName === 'Friday');
                const amount = bonusAmounts[dayName];
                
                // ‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤
                let boxClass = "bg-slate-50 border-slate-200 opacity-80"; 
                // ‡¶á‡¶Æ‡ßá‡¶ú ‡¶∏‡¶æ‡¶á‡¶ú ‡¶™‡¶æ‡¶∞‡¶´‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá
                let content = `<img src="${giftIconUrl}" class="w-8 h-8 mb-1 grayscale opacity-60">`; 
                let textClass = "text-slate-500";
                let text = `‡ß≥${amount}`;
                
                if (isToday) {
                    if (hasClaimedToday) {
                        boxClass = "bg-green-50 border-green-200";
                        content = `<i class="ri-checkbox-circle-fill text-3xl mb-1 text-green-500"></i>`;
                        textClass = "text-green-600";
                        text = "‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶®";
                    } else {
                        // ‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶¨‡¶ï‡ßç‡¶∏ ‡¶è‡¶ï‡¶ü‡ßÅ ‡¶π‡¶æ‡¶á‡¶≤‡¶æ‡¶á‡¶ü ‡¶ï‡¶∞‡¶æ
                        boxClass = "bg-white border-blue-500 shadow-md ring-2 ring-blue-100 cursor-pointer transform hover:scale-105 transition-all";
                        content = `<img src="${giftIconUrl}" class="w-10 h-10 mb-1 animate-bounce drop-shadow-md">`; 
                        textClass = "text-blue-600";
                        
                        if(isFriday) {
                             boxClass = "bg-gradient-to-br from-purple-600 to-indigo-600 border-none shadow-xl ring-4 ring-purple-200 cursor-pointer transform hover:scale-105";
                             content = `<img src="${giftIconUrl}" class="w-12 h-12 mb-1 animate-tada drop-shadow-lg filter brightness-125">`;
                             textClass = "text-yellow-300";
                             text = "‡¶Æ‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø";
                        }
                    }
                } else if (isFriday) {
                    boxClass = "bg-purple-50 border-purple-200";
                    content = `<img src="${giftIconUrl}" class="w-9 h-9 mb-1">`;
                    textClass = "text-purple-600";
                    text = "‡¶¨‡¶ø‡¶ó ‡¶Ö‡¶´‡¶æ‡¶∞";
                } else {
                    content = `<img src="${giftIconUrl}" class="w-8 h-8 mb-1">`;
                    textClass = "text-slate-600";
                }

                // üî• ‡¶π‡¶æ‡¶á‡¶ü ‡¶´‡¶ø‡¶ï‡ßç‡¶∏‡¶° ‡¶ï‡¶∞‡ßá ‡¶¶‡¶ø‡ßü‡ßá‡¶õ‡¶ø (h-24) ‡¶Ø‡¶æ‡¶§‡ßá ‡¶∏‡¶¨ ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶ß‡¶∞‡ßá
                boxesHtml += `
                    <div class="flex flex-col items-center justify-center h-24 p-1 rounded-2xl border ${boxClass} relative overflow-hidden transition-all" 
                        ${(isToday && !hasClaimedToday) ? `onclick="claimBonus('${dayName}', ${amount})"` : ''}>
                        
                        ${isToday && !hasClaimedToday ? '<span class="absolute top-0 right-0 bg-red-500 w-2.5 h-2.5 rounded-full m-1.5 animate-ping"></span>' : ''}
                        
                        ${content}
                        <span class="text-[11px] font-bold ${isFriday && isToday ? 'text-white' : 'text-slate-500'} mb-0.5">${banglaDays[dayName]}</span>
                        <span class="text-xs font-black ${textClass}">${text}</span>
                    </div>
                `;
            });

            Swal.fire({
                title: 'üéÅ ‡¶°‡ßá‡¶á‡¶≤‡¶ø ‡¶¨‡ßã‡¶®‡¶æ‡¶∏',
                html: `
                    <p class="text-sm text-slate-500 mb-5">‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶¶‡¶ø‡¶® ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡ßá ‡¶¢‡ßÅ‡¶ï‡ßá ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶∏‡¶Ç‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßÅ‡¶®!</p>
                    <div class="grid grid-cols-4 gap-3 mb-2 px-1">
                        ${boxesHtml}
                    </div>
                `,
                showConfirmButton: false,
                showCloseButton: true,
                background: '#f8fafc',
                customClass: {
                    popup: 'rounded-[30px] w-full max-w-md border border-slate-200',
                    title: 'text-slate-800 font-bold text-xl'
                }
            });
        };

        // ‡ß¨. ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶ï‡ßç‡¶≤‡ßá‡¶á‡¶Æ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® (Birthday Confetti üéâ)
        window.claimBonus = async (dayName, baseAmount) => {
            Swal.close(); 

            let finalAmount = baseAmount;
            let message = `‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡ß≥${baseAmount}`;

            // ‡¶∂‡ßÅ‡¶ï‡ßç‡¶∞‡¶¨‡¶æ‡¶∞ ‡¶Æ‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø ‡¶¨‡¶ï‡ßç‡¶∏ ‡¶≤‡¶ú‡¶ø‡¶ï
            if (dayName === 'Friday') {
                finalAmount = Math.floor(Math.random() * (15 - 5 + 1)) + 5; 
                message = `üéâ ‡¶ú‡ßÅ‡¶Æ‡ßç‡¶Æ‡¶æ ‡¶Æ‡ßã‡¶¨‡¶æ‡¶∞‡¶ï! ‡¶Æ‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø ‡¶¨‡¶ï‡ßç‡¶∏‡ßá ‡¶™‡ßá‡ßü‡ßá‡¶õ‡ßá‡¶® ‡ß≥${finalAmount}`;
            }

            const result = await Swal.fire({
                title: 'üéÅ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶®‡¶ø‡¶®',
                html: `<div class="text-center">
                        <img src="https://i.postimg.cc/dtj5JQqK/gift-box.png" class="w-20 mx-auto mb-3 animate-bounce">
                        <p class="text-slate-600 font-bold">‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶™‡ßá‡¶§‡ßá ‡¶è‡¶ï‡¶ü‡¶ø ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®</p>
                       </div>`,
                showCancelButton: true,
                confirmButtonText: '‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®',
                cancelButtonText: '‡¶®‡¶æ, ‡¶•‡¶æ‡¶ï',
                confirmButtonColor: '#8b5cf6'
            });

            if (result.isConfirmed) {
                onAdCompleted = async () => {
                    showLoading();
                    try {
                        const userRef = db.collection("users").doc(currentUserId);
                        
                        await userRef.update({
                            mainBalance: firebase.firestore.FieldValue.increment(finalAmount),
                            totalEarnings: firebase.firestore.FieldValue.increment(finalAmount),
                            todayEarnings: firebase.firestore.FieldValue.increment(finalAmount),
                            lastDailyBonus: firebase.firestore.FieldValue.serverTimestamp()
                        });

                        await db.collection("history").add({
                            userId: currentUserId,
                            type: "‡¶°‡ßá‡¶á‡¶≤‡¶ø ‡¶¨‡ßã‡¶®‡¶æ‡¶∏",
                            amount: finalAmount,
                            status: "Success",
                            details: `${dayName} - ‡¶ö‡ßá‡¶ï ‡¶á‡¶® ‡¶¨‡ßã‡¶®‡¶æ‡¶∏`,
                            date: new Date().toLocaleDateString('bn-BD'),
                            time: new Date().toLocaleTimeString('bn-BD'),
                            timestamp: firebase.firestore.FieldValue.serverTimestamp()
                        });
                        
                        if(typeof todayEarnings !== 'undefined') {
                            todayEarnings += finalAmount;
                            document.getElementById('todayEarnings').textContent = todayEarnings.toFixed(2);
                        }

                        // üî• ‡¶¶‡ßÅ‡¶á ‡¶™‡¶æ‡¶∂ ‡¶•‡ßá‡¶ï‡ßá ‡¶¨‡¶æ‡¶∞‡ßç‡¶•‡¶°‡ßá ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ ‡¶ï‡¶®‡¶´‡ßá‡¶ü‡¶ø
                        if(typeof confetti === 'function') {
                            var duration = 3000;
                            var end = Date.now() + duration;

                            (function frame() {
                                confetti({
                                    particleCount: 5, angle: 60, spread: 55, origin: { x: 0 },
                                    colors: ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#purple']
                                });
                                confetti({
                                    particleCount: 5, angle: 120, spread: 55, origin: { x: 1 },
                                    colors: ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#purple']
                                });

                                if (Date.now() < end) {
                                    requestAnimationFrame(frame);
                                }
                            }());
                        }

                        showSmartToast(message, 'success');
        
                
          window.playSound('snd_success');
     
                        hideLoading();
                        
                    } catch (e) {
                        console.error(e);
                        showSmartToast("‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá", "error");
                        hideLoading();
                    }
                };
                showInterstitialAd();
            }
        };



        // ‚úÖ OTHER FUNCTIONS
        window.copyReferralLink = () => {
            const link = document.getElementById('referralLink').innerText;
            navigator.clipboard.writeText(link);
            showSmartToast('‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶ï‡¶™‡¶ø ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!', 'success');
        };
        
        window.openSupport = () => {
            window.open('https://t.me/TAKAR_WALA_ADMIN', '_blank');
        };
        
                       // ‚úÖ DYNAMIC DRIVE OFFER FUNCTION (UPDATED)
        window.showDriveOffer = async () => {
            window.showPage('driveOfferScreen');
            showLoading();

            try {
                const doc = await db.collection("settings").doc("drive_offer").get();
                let isActive = false;
                
                if(doc.exists) {
                    const data = doc.data();
                    if(data.isActive === true) isActive = true;
                    
                    document.getElementById('driveMainTitle').innerText = data.title || "‡¶ï‡¶æ‡¶ú ‡¶ö‡¶≤‡¶õ‡ßá...";
                    document.getElementById('driveMainMessage').innerText = data.message || "‡¶∂‡ßÄ‡¶ò‡ßç‡¶∞‡¶á ‡¶Ü‡¶∏‡¶õ‡ßá...";
                    document.getElementById('driveLaunchDate').innerText = data.launchDate || "COMING SOON";
                }

                if(isActive) {
                    document.getElementById('driveMaintenanceView').classList.add('hidden');
                    document.getElementById('driveActiveView').classList.remove('hidden');
                    window.loadDriveOffers('gp'); // ‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü ‡¶π‡¶ø‡¶∏‡ßá‡¶¨‡ßá GP ‡¶≤‡ßã‡¶° ‡¶π‡¶¨‡ßá
                } else {
                    document.getElementById('driveMaintenanceView').classList.remove('hidden');
                    document.getElementById('driveActiveView').classList.add('hidden');
                    hideLoading();
                }
            } catch(e) {
                console.log("Drive settings error:", e);
                hideLoading();
            }
        };

        // üîÑ LOAD OFFERS BY OPERATOR
        window.loadDriveOffers = async (operator) => {
            // ‡ßß. ‡¶ü‡ßç‡¶Ø‡¶æ‡¶¨ ‡¶°‡¶ø‡¶ú‡¶æ‡¶á‡¶® ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
            ['gp', 'robi', 'bl', 'airtel', 'teletalk'].forEach(op => {
                const btn = document.getElementById(`tab_${op}`);
                if(op === operator) {
                    btn.className = 'flex-shrink-0 flex items-center gap-2 px-5 py-2 rounded-full bg-blue-600 text-white font-bold text-xs shadow-lg transition-all scale-105';
                } else {
                    btn.className = 'flex-shrink-0 flex items-center gap-2 px-4 py-2 rounded-full bg-slate-800 border border-slate-700 text-slate-300 font-bold text-xs transition-all hover:bg-slate-700';
                }
            });

            const container = document.getElementById('driveOffersContainer');
            container.innerHTML = '<div class="text-center py-10"><div class="w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto"></div></div>';

            try {
                // ‡¶´‡¶æ‡¶Ø‡¶º‡¶æ‡¶∞‡¶¨‡ßá‡¶∏ ‡¶•‡ßá‡¶ï‡ßá ‡¶Ö‡¶´‡¶æ‡¶∞ ‡¶≤‡ßã‡¶°
                const snapshot = await db.collection("drive_offers")
                    .where("operator", "==", operator)
                    .orderBy("price", "asc") // ‡¶¶‡¶æ‡¶Æ ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡ßü‡ßÄ ‡¶∏‡¶æ‡¶ú‡¶æ‡¶®‡ßã
                    .get();

                container.innerHTML = '';
                
                if(snapshot.empty) {
                    container.innerHTML = `
                        <div class="text-center py-10 opacity-50">
                            <img src="https://i.postimg.cc/qByrJYrn/sim-card.png" class="w-16 mx-auto mb-3 grayscale opacity-50">
                            <p class="text-sm">‡¶è‡¶á ‡¶∏‡¶ø‡¶Æ‡ßá ‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶®‡ßá ‡¶ï‡ßã‡¶®‡ßã ‡¶Ö‡¶´‡¶æ‡¶∞ ‡¶®‡ßá‡¶á</p>
                        </div>`;
                    hideLoading();
                    return;
                }

                snapshot.forEach(doc => {
                    const data = doc.data();
                    // ‡¶Ö‡¶™‡¶æ‡¶∞‡ßá‡¶ü‡¶∞ ‡¶ï‡¶æ‡¶≤‡¶æ‡¶∞ ‡¶≤‡¶ú‡¶ø‡¶ï
                    let colorClass = 'border-l-4 border-blue-500'; // GP default
                    if(operator === 'robi') colorClass = 'border-l-4 border-red-500';
                    else if(operator === 'bl') colorClass = 'border-l-4 border-orange-500';
                    else if(operator === 'airtel') colorClass = 'border-l-4 border-red-600';
                    else if(operator === 'teletalk') colorClass = 'border-l-4 border-green-500';

                    const card = `
                        <div class="bg-slate-800 p-4 rounded-xl shadow-lg border border-slate-700 relative overflow-hidden ${colorClass}">
                            <div class="flex justify-between items-start mb-2">
                                <div>
                                    <h3 class="font-bold text-white text-lg">${data.title}</h3>
                                    <p class="text-xs text-slate-400 mt-1">${data.description || '‡¶Æ‡ßá‡¶Ø‡¶º‡¶æ‡¶¶: ‡ß©‡ß¶ ‡¶¶‡¶ø‡¶®'}</p>
                                </div>
                                <div class="text-right">
                                    <span class="block text-xl font-black text-green-400">‡ß≥${data.price}</span>
                                    ${data.regularPrice ? `<span class="text-[10px] text-slate-500 line-through">‡ß≥${data.regularPrice}</span>` : ''}
                                </div>
                            </div>
                            
                            <div class="flex items-center justify-between mt-4 pt-3 border-t border-slate-700">
                                <div class="bg-slate-700/50 px-2 py-1 rounded text-[10px] text-slate-300 font-mono">
                                    ${data.area || '‡¶∏‡¶æ‡¶∞‡¶æ ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂'}
                                </div>
                                <button onclick="window.buyDriveOffer('${data.title}', '${data.price}', '${operator}')" class="bg-white text-slate-900 px-6 py-2 rounded-lg font-bold text-xs hover:bg-blue-50 transition active:scale-95">
                                    ‡¶ï‡¶ø‡¶®‡ßÅ‡¶® <i class="ri-shopping-cart-2-line ml-1"></i>
                                </button>
                            </div>
                        </div>
                    `;
                    container.innerHTML += card;
                });

            } catch(e) {
                console.error("Error loading offers:", e);
                container.innerHTML = '<p class="text-center text-red-400 text-xs">‡¶°‡¶æ‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶π‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá</p>';
            }
            hideLoading();
        };

        // üõçÔ∏è BUY FUNCTION (TELEGRAM REDIRECT)
        window.buyDriveOffer = (offerName, price, operator) => {
            const opName = operator.toUpperCase();
            const message = encodeURIComponent(`‡¶Ü‡¶∏‡¶∏‡¶æ‡¶≤‡¶æ‡¶Æ‡ßÅ ‡¶Ü‡¶≤‡¶æ‡¶á‡¶ï‡ßÅ‡¶Æ, ‡¶Ü‡¶Æ‡¶ø ${currentUserData.name} (${currentUserData.phone})‡•§\n\n‡¶Ö‡¶´‡¶æ‡¶∞: ${offerName}\n‡¶Ö‡¶™‡¶æ‡¶∞‡ßá‡¶ü‡¶∞: ${opName}\n‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø: ‡ß≥${price}\n\n‡¶Ü‡¶Æ‡¶ø ‡¶è‡¶á ‡¶Ö‡¶´‡¶æ‡¶∞‡¶ü‡¶ø ‡¶®‡¶ø‡¶§‡ßá ‡¶ö‡¶æ‡¶á‡•§`);
            
            window.open(`https://t.me/TAKAR_WALA_ADMIN?text=${message}`, '_blank');
            showSmartToast('‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡ßá ‡¶∞‡¶ø‡¶°‡¶æ‡¶á‡¶∞‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...', 'info');
        };


                // ‚úÖ DYNAMIC SPIN FUNCTION
        window.showSpinGame = async () => {
            window.showPage('spinScreen');
            showLoading();

            let title = "‡¶∂‡ßÄ‡¶ò‡ßç‡¶∞‡¶á ‡¶Ü‡¶∏‡¶õ‡ßá...";
            let message = "‡¶∏‡ßç‡¶™‡¶ø‡¶® ‡¶´‡¶ø‡¶ö‡¶æ‡¶∞‡¶ü‡¶ø‡¶∞ ‡¶ï‡¶æ‡¶ú ‡¶ö‡¶≤‡¶õ‡ßá‡•§ ‡¶ñ‡ßÅ‡¶¨ ‡¶∂‡ßÄ‡¶ò‡ßç‡¶∞‡¶á ‡¶Ü‡¶™‡¶®‡¶ø ‡¶∏‡ßç‡¶™‡¶ø‡¶® ‡¶ï‡¶∞‡ßá ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶Ü‡ßü ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®‡•§";
            let date = "‡ßß‡¶≤‡¶æ ‡¶ú‡ßÅ‡¶® ‡ß®‡ß¶‡ß®‡ß¨";
            let isActive = false;

            try {
                const doc = await db.collection("settings").doc("spin_game").get();
                if(doc.exists) {
                    const data = doc.data();
                    if(data.title) title = data.title;
                    if(data.message) message = data.message;
                    if(data.launchDate) date = data.launchDate;
                    if(data.isActive === true) isActive = true;
                }
            } catch(e) { console.log("Spin settings error", e); }

            document.getElementById('spinMainTitle').innerText = title;
            document.getElementById('spinMainMessage').innerText = message;
            document.getElementById('spinLaunchDate').innerText = date;

            if(isActive) {
                document.getElementById('spinMaintenanceView').classList.add('hidden');
                document.getElementById('spinActiveView').classList.remove('hidden');
                // ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶∏‡ßç‡¶™‡¶ø‡¶® ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶¨‡¶æ ‡¶≤‡¶ú‡¶ø‡¶ï ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶ø‡¶∏
                document.getElementById('spinCount').innerText = currentUserData.dailySpins || 5; 
            } else {
                document.getElementById('spinMaintenanceView').classList.remove('hidden');
                document.getElementById('spinActiveView').classList.add('hidden');
            }
            
            hideLoading();
        };

        // üé∞ SPIN LOGIC (Visual Demo)
        window.spinTheWheel = () => {
            const wheel = document.getElementById('wheel');
            const btn = document.getElementById('spinBtn');
            
            // ‡¶¨‡¶æ‡¶ü‡¶® ‡¶°‡¶ø‡¶ú‡ßá‡¶¨‡¶≤ ‡¶ï‡¶∞‡¶æ
            btn.disabled = true;
            btn.classList.add('opacity-50', 'cursor-not-allowed');
            
            // ‡¶∞‚Äç‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶Æ ‡¶∞‡ßã‡¶ü‡ßá‡¶∂‡¶® (‡ß©‡ß¶‡ß¶‡ß¶ ‡¶•‡ßá‡¶ï‡ßá ‡ß´‡ß¶‡ß¶‡ß¶ ‡¶°‡¶ø‡¶ó‡ßç‡¶∞‡¶ø)
            const deg = Math.floor(3000 + Math.random() * 2000); 
            
            wheel.style.transform = `rotate(${deg}deg)`;
            
            // ‡ß™ ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶™‡¶∞ ‡¶∞‡ßá‡¶ú‡¶æ‡¶≤‡ßç‡¶ü
            setTimeout(() => {
                Swal.fire({
                    title: '‡¶Ö‡¶≠‡¶ø‡¶®‡¶®‡ßç‡¶¶‡¶®! üéâ',
                    text: '‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶™‡ßü‡ßá‡¶®‡ßç‡¶ü ‡¶ú‡¶ø‡¶§‡ßá‡¶õ‡ßá‡¶® (‡¶°‡ßá‡¶Æ‡ßã)',
                    icon: 'success',
                    confirmButtonText: '‡¶ü‡¶æ‡¶ï‡¶æ ‡¶®‡¶ø‡¶®',
                    confirmButtonColor: '#8b5cf6'
                });
                
                btn.disabled = false;
                btn.classList.remove('opacity-50', 'cursor-not-allowed');
                // ‡¶ö‡¶æ‡¶ï‡¶æ ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü (Visual only logic for now)
                wheel.style.transition = 'none';
                wheel.style.transform = `rotate(${deg % 360}deg)`;
                setTimeout(() => wheel.style.transition = 'transform 4s cubic-bezier(0.2, 0.8, 0.2, 1)', 50);
                
            }, 4000);
        };

        
        
        window.logout = () => {
            auth.signOut();
            showSmartToast('‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü ‡¶∏‡¶´‡¶≤', 'success');
            document.getElementById('globalChatIcon').style.display = 'none';
            document.getElementById('twaiChatbotIcon').style.display = 'none';
        };
        
                // ‚úÖ PASSWORD RESET FUNCTION
        window.resetPassword = async () => {
            const { value: email } = await Swal.fire({
                title: '‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü',
                input: 'email',
                inputLabel: '‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶¶‡¶ø‡¶®',
                inputPlaceholder: 'example@mail.com',
                confirmButtonText: '‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶™‡¶æ‡¶†‡¶æ‡¶®',
                confirmButtonColor: '#059669',
                showCancelButton: true,
                cancelButtonText: '‡¶¨‡¶æ‡¶§‡¶ø‡¶≤',
                customClass: {
                    popup: 'rounded-[25px]'
                }
            });

            if (email) {
                showLoading();
                try {
                    await auth.sendPasswordResetEmail(email);
                    showSmartToast('‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶á‡¶Æ‡ßá‡¶á‡¶≤‡ßá ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§ ‡¶∏‡ßç‡¶™‡ßç‡¶Ø‡¶æ‡¶Æ ‡¶´‡ßã‡¶≤‡ßç‡¶°‡¶æ‡¶∞ ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®‡•§', 'success');
                    
                    Swal.fire({
                        icon: 'success',
                        title: '‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶π‡ßü‡ßá‡¶õ‡ßá',
                        text: '‡¶¶‡ßü‡¶æ ‡¶ï‡¶∞‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç ‡¶≤‡¶ø‡¶Ç‡¶ï‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßá ‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®‡•§',
                        confirmButtonText: '‡¶†‡¶ø‡¶ï ‡¶Ü‡¶õ‡ßá',
                        confirmButtonColor: '#059669',
                        customClass: { popup: 'rounded-[25px]' }
                    });
                    
                } catch (error) {
                    console.error(error);
                    if(error.code === 'auth/user-not-found') {
                        showSmartToast('‡¶è‡¶á ‡¶á‡¶Æ‡ßá‡¶á‡¶≤‡ßá ‡¶ï‡ßã‡¶®‡ßã ‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶®‡ßá‡¶á', 'error');
                    } else {
                        showSmartToast('‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá, ‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶∏‡¶†‡¶ø‡¶ï ‡¶ï‡¶ø‡¶®‡¶æ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®', 'error');
                    }
                }
                hideLoading();
            }
        };

        
        
        // ‚úÖ DYNAMIC RULES SHOW FUNCTION
        window.showRules = (title) => {
            // ‡ßß. ‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü ‡¶≠‡ßç‡¶Ø‡¶æ‡¶≤‡ßÅ ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ
            let ruleKey = 'appRules'; // ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£ ‡¶®‡¶ø‡ßü‡¶Æ
            let headerTitle = title + ' ‡¶®‡¶ø‡¶Ø‡¶º‡¶Æ‡¶æ‡¶¨‡¶≤‡ßÄ';

            // ‡ß®. ‡¶ü‡¶æ‡¶á‡¶ü‡ßá‡¶≤ ‡¶¶‡ßá‡¶ñ‡ßá ‡¶¨‡ßÅ‡¶ù‡¶¨ ‡¶ï‡ßã‡¶® ‡¶®‡¶ø‡ßü‡¶Æ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶§‡ßá ‡¶π‡¶¨‡ßá
            if (title.includes('‡¶∞‡¶ø‡¶ö‡¶æ‡¶∞‡ßç‡¶ú')) {
                ruleKey = 'rulesRecharge';
            } else if (title.includes('‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶®') || title.includes('‡¶≤‡ßá‡¶®‡¶¶‡ßá‡¶®')) {
                ruleKey = 'rulesWithdraw';
            } else if (title.includes('‡¶ü‡¶æ‡¶∏‡ßç‡¶ï')) {
                ruleKey = 'rulesTask';
            }

            // ‡ß©. ‡¶°‡¶æ‡¶ü‡¶æ‡¶¨‡ßá‡¶∏ ‡¶•‡ßá‡¶ï‡ßá ‡¶®‡¶ø‡ßü‡¶Æ ‡¶Ü‡¶®‡¶æ
            const rulesContent = systemSettings[ruleKey] 
                ? `<div class="text-left text-sm space-y-2">${systemSettings[ruleKey]}</div>` 
                : `<div class="text-center text-slate-400 py-4">‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶®‡ßá ‡¶ï‡ßã‡¶®‡ßã ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑ ‡¶®‡¶ø‡ßü‡¶Æ ‡¶®‡ßá‡¶á‡•§<br>‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£ ‡¶®‡¶ø‡ßü‡¶Æ‡¶æ‡¶¨‡¶≤‡ßÄ ‡¶Æ‡ßá‡¶®‡ßá ‡¶ö‡¶≤‡ßÅ‡¶®‡•§</div>`;

            // ‡ß™. ‡¶™‡¶™-‡¶Ü‡¶™ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã
            Swal.fire({
                title: headerTitle,
                html: rulesContent,
                confirmButtonText: '‡¶¨‡ßÅ‡¶ù‡ßá‡¶õ‡¶ø',
                confirmButtonColor: '#059669',
                customClass: {
                    popup: 'rounded-[25px]',
                    content: 'text-sm text-slate-600'
                }
            });
        };

        // ‚úÖ UPDATED TWAI CHATBOT FUNCTIONS
        window.openTWAI = () => {
            document.getElementById('twaiModal').classList.remove('hidden');
        };
        
        window.closeTWAI = () => {
            document.getElementById('twaiModal').classList.add('hidden');
        };
        
                // ‚úÖ UPDATED ASK TWAI (AUTO SCROLL FIX)
        window.askTWAI = (question) => {
            const response = twaiResponses[question] || twaiResponses['default'];
            const chatContainer = document.getElementById('chatbotMessages');
            
            // ‡ßß. ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡ßá‡¶∞ ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú
            const userMessage = document.createElement('div');
            userMessage.className = 'chat-message user-message';
            userMessage.innerHTML = `
                <div class="message-bubble user-bubble">${question}</div>
                <div class="message-time">‡¶è‡¶ñ‡¶®‡¶á</div>
            `;
            chatContainer.appendChild(userMessage);
            
            // ‡¶∏‡¶æ‡¶•‡ßá ‡¶∏‡¶æ‡¶•‡ßá ‡¶®‡¶ø‡¶ö‡ßá ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶≤ ‡¶ï‡¶∞‡¶¨‡ßá
            chatContainer.scrollTop = chatContainer.scrollHeight;
            
            // ‡ß®. ‡¶¨‡¶ü‡ßá‡¶∞ ‡¶â‡¶§‡ßç‡¶§‡¶∞ (‡¶è‡¶ï‡¶ü‡ßÅ ‡¶¶‡ßá‡¶∞‡¶ø‡¶§‡ßá)
            setTimeout(() => {
                const botMessage = document.createElement('div');
                botMessage.className = 'chat-message bot-message';
                botMessage.innerHTML = `
                    <div class="message-bubble bot-bubble">${response}</div>
                    <div class="message-time">‡¶è‡¶ñ‡¶®‡¶á</div>
                `;
                chatContainer.appendChild(botMessage);
                
                // üî• ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶Ü‡¶∏‡¶æ‡¶∞ ‡¶™‡¶∞ ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶Ö‡¶ü‡ßã‡¶Æ‡ßá‡¶ü‡¶ø‡¶ï ‡¶®‡¶ø‡¶ö‡ßá ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶≤ ‡¶π‡¶¨‡ßá
                chatContainer.scrollTo({
                    top: chatContainer.scrollHeight,
                    behavior: 'smooth'
                });
                
            }, 600); // ‡¶è‡¶ï‡¶ü‡ßÅ ‡¶®‡ßç‡¶Ø‡¶æ‡¶ö‡¶æ‡¶∞‡¶æ‡¶≤ ‡¶°‡¶ø‡¶≤‡ßá
        };

        
        window.sendTWAI = () => {
            const input = document.getElementById('chatbotInput');
            const question = input.value.trim();
            
            if(!question) return;
            
            window.askTWAI(question);
        };

        // ‚úÖ SETTINGS FUNCTIONS
        function loadSettingsFromLocalStorage() {
            const notificationToggle = document.getElementById('notificationToggle');
            const darkModeToggle = document.getElementById('darkModeToggle');
            const soundToggle = document.getElementById('soundToggle');
            const vibrationToggle = document.getElementById('vibrationToggle');
            
            if(localStorage.getItem('notificationEnabled') !== null) {
                notificationToggle.checked = localStorage.getItem('notificationEnabled') === 'true';
            }
            
            if(localStorage.getItem('darkModeEnabled') !== null) {
                darkModeToggle.checked = localStorage.getItem('darkModeEnabled') === 'true';
                if(darkModeToggle.checked) {
                    document.body.classList.add('bg-slate-900', 'text-white');
                }
            }
            
            if(localStorage.getItem('soundEnabled') !== null) {
                soundToggle.checked = localStorage.getItem('soundEnabled') === 'true';
            }
            
            if(localStorage.getItem('vibrationEnabled') !== null) {
                vibrationToggle.checked = localStorage.getItem('vibrationEnabled') === 'true';
            }
            
            // Add event listeners
            notificationToggle.addEventListener('change', function() {
                localStorage.setItem('notificationEnabled', this.checked);
                showSmartToast(`‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® ${this.checked ? '‡¶ö‡¶æ‡¶≤‡ßÅ' : '‡¶¨‡¶®‡ßç‡¶ß'} ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá`, 'info');
            });
            
            darkModeToggle.addEventListener('change', function() {
                localStorage.setItem('darkModeEnabled', this.checked);
                if(this.checked) {
                    document.body.classList.add('bg-slate-900', 'text-white');
                } else {
                    document.body.classList.remove('bg-slate-900', 'text-white');
                }
                showSmartToast(`‡¶°‡¶æ‡¶∞‡ßç‡¶ï ‡¶Æ‡ßã‡¶° ${this.checked ? '‡¶ö‡¶æ‡¶≤‡ßÅ' : '‡¶¨‡¶®‡ßç‡¶ß'} ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá`, 'info');
            });
            
            soundToggle.addEventListener('change', function() {
                localStorage.setItem('soundEnabled', this.checked);
                showSmartToast(`‡¶∏‡¶æ‡¶â‡¶®‡ßç‡¶° ${this.checked ? '‡¶ö‡¶æ‡¶≤‡ßÅ' : '‡¶¨‡¶®‡ßç‡¶ß'} ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá`, 'info');
            });
            
            vibrationToggle.addEventListener('change', function() {
                localStorage.setItem('vibrationEnabled', this.checked);
                showSmartToast(`‡¶≠‡¶æ‡¶á‡¶¨‡ßç‡¶∞‡ßá‡¶∂‡¶® ${this.checked ? '‡¶ö‡¶æ‡¶≤‡ßÅ' : '‡¶¨‡¶®‡ßç‡¶ß'} ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá`, 'info');
            });
        }

        // ‚úÖ TOGGLE BALANCE FUNCTION (MISSING FUNCTION)
        window.toggleBalance = () => {
            const balanceText = document.getElementById('balanceText');
            const balanceAmount = document.getElementById('balanceAmount');
            
            if(balanceAmount.classList.contains('hidden')) {
                balanceText.classList.add('hidden');
                balanceAmount.classList.remove('hidden');
                if(currentUserData) {
                    balanceAmount.textContent = `‡ß≥${currentUserData.mainBalance.toFixed(2)}`;
                }
            } else {
                balanceText.classList.remove('hidden');
                balanceAmount.classList.add('hidden');
            }
        };

        // ‚úÖ GLOBAL WINDOW FUNCTIONS
        window.toggleAuthTab = (t) => {
            document.getElementById('loginForm').classList.toggle('hidden', t!=='login');
            document.getElementById('registerForm').classList.toggle('hidden', t!=='register');
            document.getElementById('btnTabLogin').className = t==='login'?'flex-1 py-3 rounded-full text-sm font-bold bg-premium text-white shadow-lg':'flex-1 py-3 rounded-full text-sm font-bold text-slate-500';
            document.getElementById('btnTabRegister').className = t==='register'?'flex-1 py-3 rounded-full text-sm font-bold bg-premium text-white shadow-lg':'flex-1 py-3 rounded-full text-sm font-bold text-slate-500';
        };
        
        window.showPage = (id) => { 
            showLoading();
            setTimeout(() => {
                document.querySelectorAll('#mainApp > div').forEach(d => { 
                    if(d.id !== 'bottomNav') d.classList.add('hidden'); 
                }); 
                document.getElementById(id).classList.remove('hidden'); 
                
                if(id === 'summaryScreen' && currentUserId) {
                    loadSummary(currentUserId);
                }
                                if(id === 'subscriptionScreen') {
                    window.switchSubscriptionTab('stars'); // ‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü ‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßá
                    loadSubscriptions(); // ‡¶´‡¶æ‡¶Ø‡¶º‡¶æ‡¶∞‡¶¨‡ßá‡¶∏ ‡¶•‡ßá‡¶ï‡ßá ‡¶¨‡¶æ‡¶ï‡¶ø‡¶ó‡ßÅ‡¶≤‡ßã ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶¨‡ßá
                

                }
                if(id === 'walletScreen') {
                    updateDepositAddress(selectedMethod || 'bKash');
                }
                if(id === 'quizScreen') {
                    window.switchQuizTab('types');
                }
                if(id === 'settingsScreen') {
                    loadSettingsFromLocalStorage();
                }
                if(id === 'vipScreen') {
                    loadPackages();
                }
                
                hideLoading();
            }, 500);
        };
        
        window.toggleWalletTab = (t) => {
            ['deposit','withdraw','transfer'].forEach(id => document.getElementById(id+'Section').classList.add('hidden'));
            document.getElementById(t+'Section').classList.remove('hidden');
            ['tabDeposit','tabWithdraw','tabTransfer'].forEach(id => document.getElementById(id).className = 'flex-1 py-3 font-bold text-sm rounded-xl text-slate-500');
            document.getElementById('tab'+t.charAt(0).toUpperCase()+t.slice(1)).className = 'flex-1 py-3 font-bold text-sm rounded-xl bg-slate-800 text-white shadow';
            
            if(t === 'deposit') {
                document.getElementById('depositAmount').addEventListener('input', window.calculateDepositVAT);
                window.calculateDepositVAT();
            } else if(t === 'withdraw') {
                document.getElementById('withdrawAmount').addEventListener('input', window.calculateWithdrawVAT);
                window.calculateWithdrawVAT();
            }
        };
        
        window.switchTaskTab = (type) => {
            // ‡¶´‡ßç‡¶∞‡¶ø ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶ö‡ßá‡¶ï
            if (type === 'vip') {
                if (!currentUserData || currentUserData.plan === 'Free Member' || currentUserData.plan.includes('Free')) {
                    Swal.fire({
                        icon: 'error',
                        title: '‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡ßç‡¶∏‡ßá‡¶∏ ‡¶°‡¶ø‡¶®‡¶æ‡¶á‡¶°!',
                        text: '‡¶≠‡¶ø‡¶Ü‡¶á‡¶™‡¶ø ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶ï‡¶∞‡¶§‡ßá ‡¶π‡¶≤‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶ï‡ßá ‡¶≠‡¶ø‡¶Ü‡¶á‡¶™‡¶ø ‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ú ‡¶ï‡¶ø‡¶®‡¶§‡ßá ‡¶π‡¶¨‡ßá‡•§',
                        confirmButtonText: '‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ú ‡¶ï‡¶ø‡¶®‡ßÅ‡¶®',
                        confirmButtonColor: '#059669'
                    }).then((result) => {
                        if (result.isConfirmed) {
                            window.showPage('vipScreen');
                        }
                    });
                    return;
                }
            }

            currentTaskType = type;
            document.getElementById('tabFreeTask').className = type==='free'?'flex-1 py-3 font-bold text-sm rounded-xl bg-green-500 text-white shadow':'flex-1 py-3 font-bold text-sm rounded-xl text-slate-500';
            document.getElementById('tabVipTask').className = type==='vip'?'flex-1 py-3 font-bold text-sm rounded-xl bg-green-500 text-white shadow':'flex-1 py-3 font-bold text-sm rounded-xl text-slate-500';
            renderTasks();
        };
 
        window.selectOperator = (el, operator) => { 
            document.querySelectorAll('#rechargeScreen .bg-white').forEach(d=>d.classList.remove('border-green-500','bg-green-50')); 
            el.classList.add('border-green-500','bg-green-50'); 
            selectedOperator = operator;
            document.getElementById('selectedOperator').value = operator;
        };
        
        window.selectWithdrawMethod = (el, method) => { 
            if(!paymentNumbers[method] || paymentNumbers[method] === "OFF" || paymentNumbers[method] === "") {
                showSmartToast(`${method} ‡¶≤‡ßá‡¶®‡¶¶‡ßá‡¶® ‡¶¨‡¶®‡ßç‡¶ß`, 'error');
                return;
            }
            
            document.querySelectorAll('#withdrawSection .grid .bg-white').forEach(d=>d.classList.remove('border-green-500','bg-green-50')); 
            el.classList.add('border-green-500','bg-green-50'); 
            selectedMethod = method;
            document.getElementById('selectedWithdrawMethod').value = method;
        };

        // ‚úÖ SUBSCRIPTION FUNCTIONS
        window.switchSubscriptionTab = (tab) => {
            document.getElementById('tabStars').className = tab === 'stars' ? 'flex-1 py-3 font-bold text-sm rounded-xl bg-green-500 text-white shadow' : 'flex-1 py-3 font-bold text-sm rounded-xl text-slate-500';
            document.getElementById('tabTelegram').className = tab === 'telegram' ? 'flex-1 py-3 font-bold text-sm rounded-xl bg-green-500 text-white shadow' : 'flex-1 py-3 font-bold text-sm rounded-xl text-slate-500';
            
            document.getElementById('starsSection').classList.toggle('hidden', tab !== 'stars');
            document.getElementById('telegramSection').classList.toggle('hidden', tab !== 'telegram');
        };
        
        window.selectStarPackage = (stars) => {
            selectedStarPackage = stars;
            document.getElementById('selectedStars').textContent = stars;
            
            let price = 0;
            if(stars === 100) price = 290;
            else if(stars === 250) price = 652.5;
            else if(stars === 500) price = 1305;
            
            document.getElementById('totalStarPrice').textContent = price;
        };
        
        window.selectTelegramPlan = (plan) => {
            selectedTelegramPlan = plan;
            let planText = '';
            let price = 0;
            
            if(plan === '1month') {
                planText = '‡ßß ‡¶Æ‡¶æ‡¶∏‡ßá‡¶∞ ‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ú';
                price = 600;
            } else if(plan === '3month') {
                planText = '‡ß© ‡¶Æ‡¶æ‡¶∏‡ßá‡¶∞ ‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ú';
                price = 1550;
            } else if(plan === '1year') {
                planText = '‡ßß ‡¶¨‡¶õ‡¶∞‡ßá‡¶∞ ‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ú';
                price = 3900;
            }
            
            document.getElementById('selectedPlanText').textContent = planText;
            document.getElementById('selectedPlanPrice').textContent = price;
        };
        
        window.buyStars = () => {
            if(selectedStarPackage === 0) {
                showSmartToast('‡¶¶‡¶Ø‡¶º‡¶æ ‡¶ï‡¶∞‡ßá ‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ ‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ú ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®', 'error');
                return;
            }
            
            const message = encodeURIComponent(`‡¶Ü‡¶∏‡¶∏‡¶æ‡¶≤‡¶æ‡¶Æ‡ßÅ ‡¶Ü‡¶≤‡¶æ‡¶á‡¶ï‡ßÅ‡¶Æ, ‡¶Ü‡¶Æ‡¶ø ${currentUserData.name} (${currentUserData.phone})‡•§ ‡¶Ü‡¶Æ‡¶ø ${selectedStarPackage} ‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ - ‡ß≥${document.getElementById('totalStarPrice').textContent} ‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ú‡¶ü‡¶ø ‡¶ï‡¶ø‡¶®‡¶§‡ßá ‡¶ö‡¶æ‡¶á‡•§`);
            
            window.open(`https://t.me/TAKAR_WALA_ADMIN?text=${message}`, '_blank');
            
            showSmartToast('‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡ßá ‡¶∞‡¶ø‡¶°‡¶æ‡¶á‡¶∞‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...', 'info');
        };
        
        window.buyTelegramPremium = () => {
            if(!selectedTelegramPlan) {
                showSmartToast('‡¶¶‡¶Ø‡¶º‡¶æ ‡¶ï‡¶∞‡ßá ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶™‡ßç‡¶≤‡ßç‡¶Ø‡¶æ‡¶® ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®', 'error');
                return;
            }
            
            const planText = document.getElementById('selectedPlanText').textContent;
            const price = document.getElementById('selectedPlanPrice').textContent;
            
            const message = encodeURIComponent(`‡¶Ü‡¶∏‡¶∏‡¶æ‡¶≤‡¶æ‡¶Æ‡ßÅ ‡¶Ü‡¶≤‡¶æ‡¶á‡¶ï‡ßÅ‡¶Æ, ‡¶Ü‡¶Æ‡¶ø ${currentUserData.name} (${currentUserData.phone})‡•§ ‡¶Ü‡¶Æ‡¶ø ${planText} - ‡ß≥${price} ‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ú‡¶ü‡¶ø ‡¶ï‡¶ø‡¶®‡¶§‡ßá ‡¶ö‡¶æ‡¶á‡•§`);
            
            window.open(`https://t.me/TAKAR_WALA_ADMIN?text=${message}`, '_blank');
            
            showSmartToast('‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡ßá ‡¶∞‡¶ø‡¶°‡¶æ‡¶á‡¶∞‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...', 'info');
        };
        
                // ‚úÖ GLOBAL VARS FOR SUBSCRIPTION
        let subscriptionData = [];
        let selectedService = null;
        let selectedPlan = null;

        // 1Ô∏è‚É£ LOAD SUBSCRIPTIONS FROM FIREBASE
        async function loadSubscriptions() {
            try {
                const snapshot = await db.collection("subscriptions").orderBy("order", "asc").get();
                subscriptionData = [];
                
                // Tabs Container Clear (Keep Stars)
                const tabsContainer = document.getElementById('subTabsContainer');
                // ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡¶ü‡¶æ (Stars) ‡¶∞‡ßá‡¶ñ‡ßá ‡¶¨‡¶æ‡¶ï‡¶ø ‡¶∏‡¶¨ ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü
                while (tabsContainer.children.length > 1) {
                    tabsContainer.removeChild(tabsContainer.lastChild);
                }

                if(!snapshot.empty) {
                    snapshot.forEach(doc => {
                        const data = doc.data();
                        subscriptionData.push({ id: doc.id, ...data });
                        
                        // Create Tab Button
                        const btn = document.createElement('button');
                        btn.className = 'whitespace-nowrap px-6 py-3 font-bold text-sm rounded-xl text-slate-500 bg-white shadow-sm border border-slate-100 transition-all';
                        btn.innerText = data.name; // e.g., Telegram, YouTube
                        btn.id = `tab_${doc.id}`;
                        btn.onclick = () => window.switchSubscriptionTab(doc.id);
                        tabsContainer.appendChild(btn);
                    });
                }
            } catch (e) {
                console.error("Error loading subs:", e);
            }
        }

        // 2Ô∏è‚É£ SWITCH TABS FUNCTION
        window.switchSubscriptionTab = (tabId) => {
            // Reset UI Colors
            document.querySelectorAll('#subTabsContainer button').forEach(btn => {
                btn.className = 'whitespace-nowrap px-6 py-3 font-bold text-sm rounded-xl text-slate-500 bg-white shadow-sm border border-slate-100 transition-all';
            });

            // Active Tab Style
            const activeBtn = document.getElementById(tabId === 'stars' ? 'tabStars' : `tab_${tabId}`);
            if(activeBtn) {
                activeBtn.className = 'whitespace-nowrap px-6 py-3 font-bold text-sm rounded-xl bg-green-500 text-white shadow-lg transition-all transform scale-105';
            }

            // Show/Hide Sections
            if (tabId === 'stars') {
                document.getElementById('starsSection').classList.remove('hidden');
                document.getElementById('dynamicServiceSection').classList.add('hidden');
            } else {
                document.getElementById('starsSection').classList.add('hidden');
                document.getElementById('dynamicServiceSection').classList.remove('hidden');
                
                // Render Service Data
                renderServiceData(tabId);
            }
        };

        // 3Ô∏è‚É£ RENDER PACKAGES DYNAMICALLY
        function renderServiceData(serviceId) {
            const service = subscriptionData.find(s => s.id === serviceId);
            if(!service) return;

            selectedService = service;
            selectedPlan = null; // Reset selection
            document.getElementById('selectedDynamicPlanName').innerText = "‡¶ï‡ßã‡¶®‡ßã‡¶ü‡¶ø‡¶á ‡¶®‡¶æ";
            document.getElementById('selectedDynamicPlanPrice').innerText = "0";

            // Update Header
            document.getElementById('dynamicServiceTitle').innerText = service.title; // e.g. "Telegram Premium"
            document.getElementById('dynamicServiceIcon').src = service.icon || "https://i.postimg.cc/TwfTZM7Z/award.png";

            // Render Packages
            const list = document.getElementById('dynamicPackagesList');
            list.innerHTML = '';

            if(service.plans && service.plans.length > 0) {
                service.plans.forEach((plan, index) => {
                    // Badge Logic
                    let badgeHtml = '';
                    if(plan.tag) {
                        badgeHtml = `<div class="absolute -top-2 -right-2 bg-${plan.tagColor || 'purple'}-500 text-white text-[10px] px-2 py-0.5 rounded-full">${plan.tag}</div>`;
                    }

                    list.innerHTML += `
                        <div onclick="window.selectDynamicPlan(${index})" id="plan_${index}" class="bg-white p-4 rounded-2xl border cursor-pointer text-left hover:border-blue-500 relative transition-all shadow-sm">
                            ${badgeHtml}
                            <div class="flex justify-between items-center">
                                <div>
                                    <h4 class="font-bold text-slate-800">${plan.name}</h4>
                                    <p class="text-[11px] text-slate-500">${plan.desc || 'Best Value'}</p>
                                </div>
                                <span class="bg-blue-50 text-blue-700 px-3 py-1 rounded-lg font-bold">‡ß≥${plan.price}</span>
                            </div>
                        </div>
                    `;
                });
            } else {
                list.innerHTML = `<p class="text-slate-400">‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶®‡ßá ‡¶ï‡ßã‡¶®‡ßã ‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ú ‡¶®‡ßá‡¶á</p>`;
            }
        }

        // 4Ô∏è‚É£ SELECT PLAN FUNCTION
        window.selectDynamicPlan = (index) => {
            if(!selectedService || !selectedService.plans[index]) return;

            // Remove active class from all
            document.querySelectorAll('#dynamicPackagesList > div').forEach(div => {
                div.classList.remove('border-blue-600', 'bg-blue-50', 'ring-2', 'ring-blue-200');
                div.classList.add('bg-white', 'border-slate-200');
            });

            // Add active class
            const activeDiv = document.getElementById(`plan_${index}`);
            activeDiv.classList.remove('bg-white', 'border-slate-200');
            activeDiv.classList.add('border-blue-600', 'bg-blue-50', 'ring-2', 'ring-blue-200');

            selectedPlan = selectedService.plans[index];
            
            document.getElementById('selectedDynamicPlanName').innerText = selectedPlan.name;
            document.getElementById('selectedDynamicPlanPrice').innerText = selectedPlan.price;
        };

        // 5Ô∏è‚É£ BUY FUNCTION (REDIRECT TO TELEGRAM)
        window.buyDynamicSubscription = () => {
            if(!selectedPlan || !selectedService) {
                showSmartToast('‡¶¶‡ßü‡¶æ ‡¶ï‡¶∞‡ßá ‡¶è‡¶ï‡¶ü‡¶ø ‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ú ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®', 'error');
                return;
            }

            const message = encodeURIComponent(`‡¶Ü‡¶∏‡¶∏‡¶æ‡¶≤‡¶æ‡¶Æ‡ßÅ ‡¶Ü‡¶≤‡¶æ‡¶á‡¶ï‡ßÅ‡¶Æ, ‡¶Ü‡¶Æ‡¶ø ${currentUserData.name} (${currentUserData.phone})‡•§\n\n‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏: ${selectedService.title}\n‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ú: ${selectedPlan.name}\n‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø: ‡ß≥${selectedPlan.price}\n\n‡¶Ü‡¶Æ‡¶ø ‡¶è‡¶ü‡¶ø ‡¶ï‡¶ø‡¶®‡¶§‡ßá ‡¶ö‡¶æ‡¶á‡•§`);
            
            window.open(`https://t.me/TAKAR_WALA_ADMIN?text=${message}`, '_blank');
            showSmartToast('‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡ßá ‡¶∞‡¶ø‡¶°‡¶æ‡¶á‡¶∞‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...', 'info');
        };

        // Call loadSubscriptions when page loads (inside showPage or onload)
        // ‡¶§‡ßã‡¶∞ existing showPage('subscriptionScreen') ‡¶è‡¶∞ ‡¶≠‡ßá‡¶§‡¶∞‡ßá `loadSubscriptions()` ‡¶ï‡¶≤ ‡¶ï‡¶∞‡ßá ‡¶¶‡¶ø‡¶¨‡¶ø‡•§

        // ‚úÖ SET TRANSACTION PIN FUNCTION
        window.setTransactionPin = async () => {
            const pin = document.getElementById('newPin').value;
            const confirm = document.getElementById('confirmPin').value;

            if(pin.length !== 4 || isNaN(pin)) {
                return showSmartToast('‡ß™ ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ‡¶∞ ‡¶™‡¶ø‡¶® ‡¶¶‡¶ø‡¶®', 'error');
            }
            if(pin !== confirm) {
                return showSmartToast('‡¶™‡¶ø‡¶® ‡¶Æ‡¶ø‡¶≤‡ßá‡¶®‡¶ø!', 'error');
            }

            showLoading();
            try {
                await db.collection("users").doc(auth.currentUser.uid).update({
                    transactionPin: pin
                });
                showSmartToast('‡¶™‡¶ø‡¶® ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶∏‡ßá‡¶ü ‡¶π‡ßü‡ßá‡¶õ‡ßá ‚úÖ', 'success');
                               window.playSound('snd_success');
                document.getElementById('newPin').value = "";
                document.getElementById('confirmPin').value = "";
            } catch(e) {
                showSmartToast('‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá!', 'error');
            }
            hideLoading();
        };



             // ‚úÖ INITIALIZE EVENT LISTENERS
        document.addEventListener('DOMContentLoaded', function() {
            loadSystemSettings();
            
            const depositAmount = document.getElementById('depositAmount');
            if(depositAmount) {
                depositAmount.addEventListener('input', window.calculateDepositVAT);
            }
            
            const withdrawAmount = document.getElementById('withdrawAmount');
            if(withdrawAmount) {
                withdrawAmount.addEventListener('input', window.calculateWithdrawVAT);
            }
            
            const rechAmount = document.getElementById('rechAmount');
            if(rechAmount) {
                rechAmount.addEventListener('input', window.calculateRechargeFee);
            }
            
            window.calculateDepositVAT();
            window.calculateWithdrawVAT();
            window.calculateRechargeFee();
            
            // üì≥ SECRET PRO TIP: HAPTIC FEEDBACK (‡¶†‡¶ø‡¶ï ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá)
            document.querySelectorAll('button, .glass-card, .cursor-pointer').forEach(element => {
                element.addEventListener('click', () => {
                    if (navigator.vibrate) {
                        navigator.vibrate(40); // ‡¶π‡¶æ‡¶≤‡¶ï‡¶æ ‡¶≠‡¶æ‡¶á‡¶¨‡ßç‡¶∞‡ßá‡¶∂‡¶®
                    }
                });
            });

        }); // <--- ‡¶è‡¶á ‡¶ï‡ßç‡¶≤‡ßã‡¶ú‡¶ø‡¶Ç ‡¶¨‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ü‡¶ü‡¶æ‡¶á ‡¶Æ‡¶ø‡¶∏‡¶ø‡¶Ç ‡¶õ‡¶ø‡¶≤!
        
                // ‚úÖ INTERNET CONNECTION CHECKER
        window.addEventListener('offline', () => {
            Swal.fire({
                title: '‡¶ï‡¶æ‡¶®‡ßá‡¶ï‡¶∂‡¶® ‡¶¨‡¶ø‡¶ö‡ßç‡¶õ‡¶ø‡¶®‡ßç‡¶®!',
                text: ' ‡¶™‡ßç‡¶∞‡¶ø‡¶Ø‡¶º ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶á‡¶®‡ßç‡¶ü‡¶æ‡¶∞‡¶®‡ßá‡¶ü ‡¶ï‡¶æ‡¶®‡ßá‡¶ï‡¶∂‡¶® ‡¶ö‡¶≤‡ßá ‡¶ó‡ßá‡¶õ‡ßá‡•§ ‡¶¶‡ßü‡¶æ ‡¶ï‡¶∞‡ßá ‡¶®‡ßá‡¶ü ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßá ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ  ‡¶ï‡¶∞‡ßÅ‡¶®‡•§',
                icon: 'warning',
                showConfirmButton: false,
                allowOutsideClick: false,
                background: '#fff',
                color: '#ef4444'
            });
        });

        window.addEventListener('online', () => {
            Swal.close();
            showSmartToast('‡¶á‡¶®‡ßç‡¶ü‡¶æ‡¶∞‡¶®‡ßá‡¶ü ‡¶´‡¶ø‡¶∞‡ßá ‡¶è‡¶∏‡ßá‡¶õ‡ßá! ‚úÖ', 'success');
        });

        // ‚úÖ SMART SOUND & HAPTICS FUNCTION
        window.playSound = (id) => {
            const audio = document.getElementById(id);
            if(audio) {
                audio.currentTime = 0; // ‡¶∏‡¶æ‡¶â‡¶®‡ßç‡¶° ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶•‡ßá‡¶ï‡ßá ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶π‡¶¨‡ßá
                audio.play().catch(e => console.log("Sound error:", e));
            }
        };

        // üîä ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡¶≤‡ßá‡¶á ‡¶Ö‡¶ü‡ßã‡¶Æ‡ßá‡¶ü‡¶ø‡¶ï ‡¶∏‡¶æ‡¶â‡¶®‡ßç‡¶° + ‡¶≠‡¶æ‡¶á‡¶¨‡ßç‡¶∞‡ßá‡¶∂‡¶® ‡¶π‡¶¨‡ßá
        const attachAppSounds = () => {
            document.querySelectorAll('button, .glass-card, .cursor-pointer, [onclick]').forEach(element => {
                element.addEventListener('click', () => {
                    window.playSound('snd_click'); // ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï‡ßá‡¶∞ ‡¶∏‡¶æ‡¶â‡¶®‡ßç‡¶°
                    if (navigator.vibrate) navigator.vibrate(30); // ‡¶π‡¶æ‡¶≤‡¶ï‡¶æ ‡¶≠‡¶æ‡¶á‡¶¨‡ßç‡¶∞‡ßá‡¶∂‡¶®
                });
            });
        };

        // ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶≤‡ßã‡¶° ‡¶π‡¶ì‡ßü‡¶æ‡¶∞ ‡ßß ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶™‡¶∞ ‡¶∏‡¶æ‡¶â‡¶®‡ßç‡¶° ‡¶è‡¶ï‡ßç‡¶ü‡¶ø‡¶≠‡ßá‡¶ü ‡¶π‡¶¨‡ßá
        setTimeout(attachAppSounds, 1000);



        // ‚úÖ REAL-TIME LIVE PAYMENT PROOF
        const startLivePayoutNotifications = () => {
            // ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶∏‡¶æ‡¶ï‡¶∏‡ßá‡¶∏ ‡¶π‡¶ì‡ßü‡¶æ ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü‡¶ó‡ßÅ‡¶≤‡ßã ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡¶¨‡ßá
            db.collection("history")
                .where("status", "==", "Success")
                .orderBy("date", "desc")
                .limit(1)
                .onSnapshot(snapshot => {
                    snapshot.docChanges().forEach(change => {
                        if (change.type === "added") {
                            const data = change.doc.data();
                            // ‡¶Ø‡¶¶‡¶ø ‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡¶ú‡ßá‡¶ï‡¶∂‡¶®‡¶ü‡¶ø ‡ßß ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü‡ßá‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶π‡ßü‡ßá ‡¶•‡¶æ‡¶ï‡ßá ‡¶§‡¶¨‡ßá‡¶á ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßá
                            showLiveToast(data.name || "‡¶è‡¶ï‡¶ú‡¶® ‡¶á‡¶â‡¶ú‡¶æ‡¶∞", data.amount, data.type);
                        }
                    });
                });
        };

        const showLiveToast = (name, amount, type) => {
            const toast = document.createElement('div');
            toast.className = 'fixed bottom-24 left-4 right-4 z-[1000] animate__animated animate__fadeInUp';
            toast.innerHTML = `
                <div class="bg-slate-900/90 backdrop-blur-md border border-white/10 p-3 rounded-2xl flex items-center gap-3 shadow-2xl">
                    <div class="w-10 h-10 rounded-full bg-green-500 flex items-center justify-center text-white shrink-0">
                        <i class="ri-check-double-line text-xl"></i>
                    </div>
                    <div class="flex-1">
                        <p class="text-[10px] text-slate-400 font-bold uppercase tracking-wider">‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡¶æ‡¶ï‡¶∏‡ßá‡¶∏‡¶´‡ßÅ‡¶≤! üéâ</p>
                        <p class="text-xs text-white"><b>${name}</b> ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ <b>‡ß≥${amount}</b> ${type === 'Withdraw' ? '‡¶â‡¶á‡¶•‡¶°‡ßç‡¶∞' : '‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü'} ‡¶™‡ßá‡ßü‡ßá‡¶õ‡ßá‡¶®‡•§</p>
                    </div>
                </div>
            `;
            document.body.appendChild(toast);
            
            // ‡ß© ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶™‡¶∞ ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶Ø‡¶æ‡¶¨‡ßá
            setTimeout(() => {
                toast.classList.replace('animate__fadeInUp', 'animate__fadeOutDown');
                setTimeout(() => toast.remove(), 1000);
            }, 4000);
        };

        // ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®‡¶ü‡¶ø ‡¶ï‡¶≤ ‡¶ï‡¶∞‡¶æ
        setTimeout(startLivePayoutNotifications, 5000); // ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶ñ‡ßã‡¶≤‡¶æ‡¶∞ ‡ß´ ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶™‡¶∞ ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶π‡¶¨‡ßá       
   
   // üõ°Ô∏è ANTI-SPAM SYSTEM (‡¶¨‡¶æ‡¶∞‡¶¨‡¶æ‡¶∞ ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶†‡ßá‡¶ï‡¶æ‡¶®‡ßã)
let clickTracker = 0;
document.addEventListener('click', () => {
    clickTracker++;
    if (clickTracker > 15) { 
        showSmartToast('‡¶Æ‡¶æ‡¶Æ‡¶æ, ‡¶Ü‡¶∏‡ßç‡¶§‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞! ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶ï‡ßã‡¶•‡¶æ‡¶ì ‡¶™‡¶æ‡¶≤‡¶æ‡¶ö‡ßç‡¶õ‡ßá ‡¶®‡¶æ‡•§', 'error');
        clickTracker = 0;
    }
    // ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡ß´ ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶™‡¶∞ ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶ú‡¶ø‡¶∞‡ßã ‡¶π‡¶¨‡ßá
    setTimeout(() => { clickTracker = 0; }, 5000);
});


// üì¢ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶®‡¶æ‡¶â‡¶®‡ßç‡¶∏‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶™‡¶™‡¶Ü‡¶™ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
function showAnnouncement() {
    window.playSound('snd_click');
    
    Swal.fire({
        title: '<span class="text-blue-600 font-bold">‡¶Ö‡¶´‡¶ø‡¶∂‡¶ø‡ßü‡¶æ‡¶≤ ‡¶ö‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤</span>',
        html: `
            <div class="space-y-4 p-2 text-center">
                <p class="text-sm text-slate-600">‡¶∏‡¶¨ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶è‡¶¨‡¶Ç ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶™‡ßç‡¶∞‡ßÅ‡¶´ ‡¶™‡ßá‡¶§‡ßá ‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡ßá ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶π‡¶®‡•§</p>
                
                <a href="https://t.me/TAKAR_GACHH" target="_blank" style="text-decoration: none;">
                    <div class="flex items-center gap-3 p-3 bg-blue-50 rounded-xl border border-blue-100 mb-2">
                        <i class="ri-telegram-fill text-3xl text-blue-500"></i>
                        <div class="text-left">
                            <p class="font-bold text-slate-800">‡¶Ö‡¶´‡¶ø‡¶∂‡¶ø‡ßü‡¶æ‡¶≤ ‡¶ö‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤</p>
                            <p class="text-xs text-blue-600">‡¶∏‡¶¨ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶™‡¶æ‡¶¨‡ßá‡¶®</p>
                        </div>
                    </div>
                </a>

                <a href="https://t.me/TAKAR_GACH_V27" target="_blank" style="text-decoration: none;">
                    <div class="flex items-center gap-3 p-3 bg-purple-50 rounded-xl border border-purple-100">
                        <i class="ri-group-fill text-3xl text-purple-500"></i>
                        <div class="text-left">
                            <p class="font-bold text-slate-800">‡¶Ö‡¶´‡¶ø‡¶∂‡¶ø‡ßü‡¶æ‡¶≤ ‡¶ó‡ßç‡¶∞‡ßÅ‡¶™</p>
                            <p class="text-xs text-purple-600">‡¶∏‡¶¶‡¶∏‡ßç‡¶Ø‡¶¶‡ßá‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶Ü‡¶≤‡ßã‡¶ö‡¶®‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®</p>
                        </div>
                    </div>
                </a>
            </div>
        `,
        showConfirmButton: true,
        confirmButtonText: '‡¶†‡¶ø‡¶ï ‡¶Ü‡¶õ‡ßá',
        confirmButtonColor: '#3b82f6',
        borderRadius: '20px'
    });
}

   
   
    </script>
    
        <audio id="snd_click" src="https://assets.mixkit.co/active_storage/sfx/2571/2571-preview.mp3"></audio>
    <audio id="snd_success" src="https://assets.mixkit.co/active_storage/sfx/1435/1435-preview.mp3"></audio>
    <audio id="snd_bonus" src="https://assets.mixkit.co/active_storage/sfx/2019/2019-preview.mp3"></audio>

    
</body>
</html>
